
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating Packages with Python &#8212; RSE-UP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css?v=c89437f7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/python_packaging';</script>
    <link rel="canonical" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/python_packaging.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Exercises - Packaging" href="../exercises/packaging.html" />
    <link rel="prev" title="Introduction to Packaging Python Software" href="introduction/packaging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">RSE-UP</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python, Bash and Git Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_refresher.html">Python Refresher</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/bash.html">Introduction to Bash</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="bash_basics.html">The Basics of the Unix Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_basics.html">Bash Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_tools.html">Building Tools with the Unix Shell</a></li>

<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_tools.html">BASH Tool Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_advanced.html">Going Further with the Unix Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_advanced.html">BASH Advanced</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/vcs.html">Version Control</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_version_control.html">Using Git at the Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/version_control.html">Exercise Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_advanced.html">Going Further with Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/git_advanced.html">Exercises Git Advanced</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Writing Clean Code</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clean_readable_code.html">Writing Readable Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_documentation.html">Documenting Programs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/documentation.html">Introduction to writing Documentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Narrative</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/jupyter.html">Introduction to Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="anaconda.html">Working with Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp_narative.html">Story Telling with Data Computational Narrative</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Licenses, Software Citation and FAIR</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses, Software Citation and FAIR</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working in teams</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_in_teams.html">Working in Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/work_teams.html">Exercise - Work Teams</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Requirements, Architecture and Design</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/requirements_architecture_design.html">Application Classes, Software Requirements, Architecture and Design</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="application_classes.html">Application Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Software Development Process and Requirements Engineering in RSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture_design.html">Architecture and Design</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing, Error Handling and CLI Apps using Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/testing.html">Introduction to Testing</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="testing_programs.html">Testing Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/testing.html">Exercises - Testing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/error_handling.html">Introduction to Error Handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="error_handling.html">Handling Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/error_handling.html">Exercises - Error Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/python_cli.html">Introduction to CLI application using Python</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="python_building_cli.html">Building Command-Line Tools with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/python_cli.html">Exercises - Scripting Python for CLI tools</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration and Packaging</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/config.html">Introduction to Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuring Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html">YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/config.html">Exercises - Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="introduction/packaging.html">Introduction to Packaging Python Software</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Creating Packages with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/packaging.html">Exercises - Packaging</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows and Automation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/workflows.html">Introduction to Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="workflow.html">Introduction to Workflows</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/automation.html">Introduction to Make and Snakemake</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_make.html">Automating Analyses with Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/intro_make.html">Exercises - Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_snakemake.html">Introduction to Snakemake</a></li>
<li class="toctree-l2"><a class="reference internal" href="snakemake_continued.html">Snakemake Continued</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/snakemake.html">Snakemake Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction/cicd.html">Introduction to CI/CD</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tracking Provenance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tracking_provenance.html">Tracking Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/provenance.html">Exercises - Provenance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="solutions.html">Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_remotely.html">Working Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Project Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP/issues/new?title=Issue%20on%20page%20%2Fchapters/python_packaging.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/python_packaging.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Creating Packages with Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-python-package">Creating a Python Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#virtual-environments">Virtual Environments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-a-development-package">Installing a Development Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-installation-does">What Installation Does</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distributing-packages">Distributing Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#documenting-packages">Documenting Packages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#including-package-level-documentation-in-the-readme">Including package-level documentation in the <code class="docutils literal notranslate"><span class="pre">README</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-web-page-for-documentation">Creating a web page for documentation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hosting-documentation-online">Hosting documentation online</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-journals">Software Journals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="creating-packages-with-python">
<h1>Creating Packages with Python<a class="headerlink" href="#creating-packages-with-python" title="Link to this heading">#</a></h1>
<p>We will continue with our Zipf’s Law project, which should include the following files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>zipf/
├── .gitignore
├── .travis.yml
├── CONDUCT.md
├── CONTRIBUTING.md
├── KhanVirtanen2020.md
├── LICENSE.md
├── Makefile
├── README.md
├── environment.yml
├── requirements.txt
├── bin
│   ├── book_summary.sh
│   ├── collate.py
│   ├── countwords.py
│   ├── plotcounts.py
│   ├── plotparams.yml
│   ├── script_template.py
│   ├── test_zipfs.py
│   └── utilities.py
├── data
│   ├── README.md
│   ├── dracula.txt
│   └── ...
├── results
│   ├── dracula.csv
│   ├── dracula.png
│   └── ...
└── test_data
    ├── random_words.txt
    └── risk.txt
</pre></div>
</div>
<section id="creating-a-python-package">
<h2>Creating a Python Package<a class="headerlink" href="#creating-a-python-package" title="Link to this heading">#</a></h2>
<p>A package consists of one or more Python source files in a specific directory structure combined with installation instructions for the computer.
Python packages can come from various sources:
some are distributed with Python itself as part of the language’s <a class="reference external" href="https://docs.python.org/3/library/">standard library</a>,
but anyone can create one,
and there are thousands that can be downloaded and installed from online repositories.</p>
<blockquote>
<div><p><strong>Terminology</strong></p>
<p>People sometimes refer to packages as modules.
Strictly speaking,
a module is a single source file,
while a package is a directory structure that contains one or more modules.</p>
</div></blockquote>
<p>A generic package folder hierarchy looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pkg_name
├── pkg_name
│   ├── module1.py
│   └── module2.py
├── README.md
└── setup.py
</pre></div>
</div>
<p>The top-level directory is named after the package.
It contains a directory that is also named after the package,
and that contains the package’s source files.
It is initially a little confusing to have two directories with the same name,
but most Python projects follow this convention because
it makes it easier to set up the project for installation.</p>
<blockquote>
<div><p><strong><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></strong></p>
<p>Python packages often contain a file with a special name:
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>
(two underscores before and after <code class="docutils literal notranslate"><span class="pre">init</span></code>).
Just as importing a module file executes the code in the module,
importing a package executes the code in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>.
Packages <em>had</em> to have this file before Python 3.3,
even if it was empty,
but since Python 3.3 it is only needed
if we want to run some code as the package is being imported.</p>
</div></blockquote>
<p>If we want to make our Zipf’s Law software available as a Python package,
we need to follow the generic folder hierarchy.
A quick search of the <a class="reference external" href="https://pypi.org/">Python Package Index (PyPI)</a> reveals that the package name <code class="docutils literal notranslate"><span class="pre">zipf</span></code> is already taken,
so we will need to use something different.
Let’s use <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> and update our directory names accordingly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mv<span class="w"> </span>~/zipf<span class="w"> </span>~/pyzipf
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/pyzipf
$<span class="w"> </span>mv<span class="w"> </span>bin<span class="w"> </span>pyzipf
</pre></div>
</div>
<blockquote>
<div><p><strong>Updating GitHub’s Repository Name</strong></p>
<p>We won’t do it in this case
(because it would break links/references from earlier in the book),
but now that we’ve decided to name our package <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code>,
we would normally update the name of our GitHub repository to match.
After changing the name at the GitHub website,
we would need to update our <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span></code> so that our
local repository could still be synchronized with GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span>
<span class="w">  </span>https://github.com/amira-khan/pyzipf.git<span class="w">  </span>
</pre></div>
</div>
</div></blockquote>
<p>Python has several ways to build an installable package.
We will show how to use <a class="reference external" href="https://setuptools.readthedocs.io/"><code class="docutils literal notranslate"><span class="pre">setuptools</span></code></a>,
which is the lowest common denominator and will allow everyone, regardless of what Python distribution they have, to use our package. To use <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, we must create a file called <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> in the directory <em>above</em> the root directory of the package. (This is why we require the two-level directory structure described earlier.)
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> must have exactly that name, and must contain lines like these:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>


<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1.0&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Amira Khan&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">author</span></code> parameters are self-explanatory.
Most software projects use <strong>semantic versioning</strong>
for software releases.
A version number consists of three integers X.Y.Z,
where X is the major version, Y is the minor version,
and Z is the <strong>patch</strong> version.
Major version zero (0.Y.Z) is for initial development, so we have started with 0.1.0.
The first stable public release would be version 1.0.0,
and in general, the version number is incremented as follows:</p>
<ul class="simple">
<li><p>Increment <code class="docutils literal notranslate"><span class="pre">major</span></code> every time there’s an incompatible externally visible change.</p></li>
<li><p>Increment <code class="docutils literal notranslate"><span class="pre">minor</span></code> when adding new functionality in a backwards-compatible manner
(i.e., without breaking any existing code).</p></li>
<li><p>Increment <code class="docutils literal notranslate"><span class="pre">patch</span></code> for backwards-compatible bug fixes that don’t add any new features.</p></li>
</ul>
<p>Finally,
we specify the name of the directory
containing the code to be packaged with the <code class="docutils literal notranslate"><span class="pre">packages</span></code> parameter.
This is straightforward in our case because we only have a single package directory.
For more complex projects,
the <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#using-find-packages"><code class="docutils literal notranslate"><span class="pre">find_packages</span></code></a> function from <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>
can automatically find all packages by recursively searching the current directory.</p>
</section>
<section id="virtual-environments">
<h2>Virtual Environments<a class="headerlink" href="#virtual-environments" title="Link to this heading">#</a></h2>
<p>We can add additional information to our package later,
but this is enough to be able to build it for testing purposes.
Before we do that,
though,
we should create a <strong>virtual environment</strong> to test how our package installs
without breaking anything in our main Python installation.
We exported details of our environment in Chapter <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/tracking_provenance.html">Provenance</a> as a way to document the software we’re using;
in this section, we’ll use environments to make the software we’re creating more robust.</p>
<p>A virtual environment is a layer on top of an existing Python installation.
Whenever Python needs to find a package,
it looks in the virtual environment before checking the main Python installation.
This gives us a place to install packages that only some projects need
without affecting other projects.</p>
<p>Virtual environments also help with package development:</p>
<ul class="simple">
<li><p>We want to be able to easily test install and uninstall our package,
without affecting the entire Python environment.</p></li>
<li><p>We want to answer problems people have with our package with something more helpful than
“I don’t know, it works for me.”
By installing and running our package in a completely empty environment,
we can ensure that we’re not accidentally relying on other packages being installed.</p></li>
</ul>
<p>We can manage virtual environments using <a class="reference external" href="https://conda.io/"><code class="docutils literal notranslate"><span class="pre">conda</span></code></a> (Appendix <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/anaconda.html">Anaconda</a>).
To create a new virtual environment called <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> we run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span></code>,
specifying the environment’s name with the <code class="docutils literal notranslate"><span class="pre">-n</span></code> or <code class="docutils literal notranslate"><span class="pre">--name</span></code> flag
and including <code class="docutils literal notranslate"><span class="pre">pip</span></code> and our current version of Python in the new environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>pyzipf<span class="w"> </span>pip<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7.6
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Collecting package metadata (current_repodata.json): done
Solving environment: done

## Package Plan ##

  environment location: /Users/amira/anaconda3/envs/pyzipf

  added / updated specs:
    - pip
    - python=3.7.6


The following packages will be downloaded:
...list of packages...

The following NEW packages will be INSTALLED:
...list of packages...

Proceed ([y]/n)? y

...

Preparing transaction: done
Verifying transaction: done
Executing transaction: done
#
# To activate this environment, use
#
#     $ conda activate pyzipf
#
# To deactivate an active environment, use
#
#     $ conda deactivate
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> creates the directory <code class="docutils literal notranslate"><span class="pre">/Users/amira/anaconda3/envs/pyzipf</span></code>,
which contains the subdirectories needed for a minimal Python installation,
such as <code class="docutils literal notranslate"><span class="pre">bin</span></code> and <code class="docutils literal notranslate"><span class="pre">lib</span></code>.
It also creates <code class="docutils literal notranslate"><span class="pre">/Users/amira/anaconda3/envs/pyzipf/bin/python</span></code>,
which checks for packages in these directories before checking the main installation.</p>
<blockquote>
<div><p><strong><code class="docutils literal notranslate"><span class="pre">conda</span></code> Variations</strong></p>
<p>As with many of the other tools we’ve explored in this book,
the behavior of some <code class="docutils literal notranslate"><span class="pre">conda</span></code> commands differ depending on the operating system.
There are multiple ways to accomplish some of the tasks we present in this chapter.
The options we present here represent the approaches most likely to work across multiple platforms.</p>
<p>Additionally, the path for Anaconda differs among operating systems.
Our examples show the default path for Anaconda installed via the Unix shell
on MacOS (<code class="docutils literal notranslate"><span class="pre">/Users/amira/anaconda3</span></code>),
but for the MacOS graphical installer it is <code class="docutils literal notranslate"><span class="pre">/Users/amira/opt/anaconda3</span></code>,
for Linux it is <code class="docutils literal notranslate"><span class="pre">/home/amira/anaconda3</span></code>,
and on Windows it is <code class="docutils literal notranslate"><span class="pre">C:\Users\amira\Anaconda3</span></code>.
During the installation process, users can also choose a custom location
if they like (Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/getting_started.html#installing-the-software">Getting started - Installing software</a>).</p>
</div></blockquote>
<p>We can switch to the <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> environment by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>activate<span class="w"> </span>pyzipf
</pre></div>
</div>
<p>Once we have done this,
the <code class="docutils literal notranslate"><span class="pre">python</span></code> command runs the interpreter in <code class="docutils literal notranslate"><span class="pre">pyzipf/bin</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>which<span class="w"> </span>python
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/amira/anaconda3/envs/pyzipf/bin/python
</pre></div>
</div>
<p>Notice that every shell command displays <code class="docutils literal notranslate"><span class="pre">(pyzipf)</span></code> when that virtual environment is active.
Between Git branches and virtual environments,
it can be very easy to lose track of what exactly we are working on and with.
Prompts like this can make it a little less confusing;
using virtual environment names that match the names of your projects
(and branches, if you’re testing different environments on different branches)
quickly becomes essential.</p>
<p>We can now install packages safely.
Everything we install will go into the <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> virtual environment
without affecting the underlying Python installation.
When we are done,
we can switch back to the default environment using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">deactivate</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>conda<span class="w"> </span>deactivate
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>which<span class="w"> </span>python
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/usr/bin/python
</pre></div>
</div>
</section>
<section id="installing-a-development-package">
<h2>Installing a Development Package<a class="headerlink" href="#installing-a-development-package" title="Link to this heading">#</a></h2>
<p>Let’s install our package in this virtual environment.
First we re-activate it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>activate<span class="w"> </span>pyzipf
</pre></div>
</div>
<p>Next,
we go into the upper <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> directory that contains our <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file
and install our package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/pyzipf
<span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Obtaining file:///Users/amira/pyzipf
Installing collected packages: pyzipf
  Running setup.py develop for pyzipf
Successfully installed pyzipf
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-e</span></code> option indicates that we want to install the package in “editable” mode,
which means that any changes we make in the package code are directly available to use
without having to reinstall the package;
the <code class="docutils literal notranslate"><span class="pre">.</span></code> means “install from the current directory.”</p>
<p>If we look in the location containing package installations
(e.g., <code class="docutils literal notranslate"><span class="pre">/Users/amira/anaconda3/envs/pyzipf/lib/python3.7/site-packages/</span></code>),
we can see the <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> package beside all the other locally installed packages.
If we try to use the package at this stage,
though,
Python will complain that some of the packages it depends on,
such as <code class="docutils literal notranslate"><span class="pre">pandas</span></code>,
are not installed.
We could install these manually,
but it is more reliable to automate this process
by listing everything that our package depends on
using the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>


<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Amira Khan&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">],</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pandas&#39;</span><span class="p">,</span>
        <span class="s1">&#39;scipy&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pyyaml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pytest&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>We don’t have to list <code class="docutils literal notranslate"><span class="pre">numpy</span></code> explicitly
because it will be installed as a dependency for <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">scipy</span></code>.</p>
<blockquote>
<div><p><strong>Versioning Dependencies</strong></p>
<p>It is good practice to specify the versions of our dependencies
and even better to specify version ranges.
For example, if we have only tested our package on pandas version 1.1.2,
we could put <code class="docutils literal notranslate"><span class="pre">pandas==1.1.2</span></code> or <code class="docutils literal notranslate"><span class="pre">pandas&gt;=1.1.2</span></code> instead of just <code class="docutils literal notranslate"><span class="pre">pandas</span></code>
in the list argument passed to the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> parameter.</p>
</div></blockquote>
<p>Next,
we can install our package using the modified <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/pyzipf
<span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Obtaining file:///Users/amira/pyzipf
Collecting matplotlib
  Downloading matplotlib-3.3.3-cp37-cp37m-macosx_10_9_x86_64.whl
     |████████████████████████████████| 8.5 MB 3.1 MB/s 
Collecting cycler&gt;=0.10
  Using cached cycler-0.10.0-py2.py3-none-any.whl
Collecting kiwisolver&gt;=1.0.1
  Downloading kiwisolver-1.3.1-cp37-cp37m-macosx_10_9_x86_64.whl 
     |████████████████████████████████| 61 kB 2.0 MB/s 
Collecting numpy&gt;=1.15
  Downloading numpy-1.19.4-cp37-cp37m-macosx_10_9_x86_64.whl
     |████████████████████████████████| 15.3 MB 8.9 MB/s 
Collecting pillow&gt;=6.2.0
  Downloading Pillow-8.0.1-cp37-cp37m-macosx_10_10_x86_64.whl
     |████████████████████████████████| 2.2 MB 6.3 MB/s 
Collecting pyparsing!=2.0.4,!=2.1.2,!=2.1.6,&gt;=2.0.3
  Using cached pyparsing-2.4.7-py2.py3-none-any.whl
Collecting python-dateutil&gt;=2.1
  Using cached python_dateutil-2.8.1-py2.py3-none-any.whl
Collecting six
  Using cached six-1.15.0-py2.py3-none-any.whl
Collecting pandas
  Downloading pandas-1.1.5-cp37-cp37m-macosx_10_9_x86_64.whl
     |████████████████████████████████| 10.0 MB 1.4 MB/s 
Collecting pytz&gt;=2017.2
  Using cached pytz-2020.4-py2.py3-none-any.whl
Collecting pytest
  Using cached pytest-6.2.1-py3-none-any.whl
Collecting attrs&gt;=19.2.0
  Using cached attrs-20.3.0-py2.py3-none-any.whl
Collecting importlib-metadata&gt;=0.12
  Downloading importlib_metadata-3.3.0-py3-none-any.whl
Collecting pluggy&lt;1.0.0a1,&gt;=0.12
  Using cached pluggy-0.13.1-py2.py3-none-any.whl
Collecting py&gt;=1.8.2
  Using cached py-1.10.0-py2.py3-none-any.whl
Collecting typing-extensions&gt;=3.6.4
  Downloading typing_extensions-3.7.4.3-py3-none-any.whl
Collecting zipp&gt;=0.5
  Downloading zipp-3.4.0-py3-none-any.whl
Collecting iniconfig
  Using cached iniconfig-1.1.1-py2.py3-none-any.whl
Collecting packaging
  Using cached packaging-20.8-py2.py3-none-any.whl
Collecting pyyaml
  Using cached PyYAML-5.3.1.tar.gz
Collecting scipy
  Downloading scipy-1.5.4-cp37-cp37m-macosx_10_9_x86_64.whl
     |████████████████████████████████| 28.7 MB 10.7 MB/s 
Collecting toml
  Using cached toml-0.10.2-py2.py3-none-any.whl
Building wheels for collected packages: pyyaml
  Building wheel for pyyaml (setup.py) ... done
  Created wheel for pyyaml:
    filename=PyYAML-5.3.1-cp37-cp37m-macosx_10_9_x86_64.whl
    size=44626
    sha256=5a59ccf08237931e7946ec6b526922e4
           f0c8ee903d43671f50289431d8ee689d
  Stored in directory: /Users/amira/Library/Caches/pip/wheels/
    5e/03/1e/e1e954795d6f35dfc7b637fe2277bff021303bd9570ecea653
Successfully built pyyaml
Installing collected packages: zipp, typing-extensions, six,
pyparsing, importlib-metadata, toml, pytz, python-dateutil, py,
pluggy, pillow, packaging, numpy, kiwisolver, iniconfig, cycler,
attrs, scipy, pyyaml, pytest, pandas, matplotlib, pyzipf
  Attempting uninstall: pyzipf
    Found existing installation: pyzipf 0.1.0
    Uninstalling pyzipf-0.1.0:
      Successfully uninstalled pyzipf-0.1.0
  Running setup.py develop for pyzipf
Successfully installed attrs-20.3.0 cycler-0.10.0
importlib-metadata-3.3.0 iniconfig-1.1.1 kiwisolver-1.3.1
matplotlib-3.3.3 numpy-1.19.4 packaging-20.8 pandas-1.1.5
pillow-8.0.1 pluggy-0.13.1 py-1.10.0 pyparsing-2.4.7
pytest-6.2.1 python-dateutil-2.8.1 pytz-2020.4 pyyaml-5.3.1
pyzipf scipy-1.5.4 six-1.15.0 toml-0.10.2
typing-extensions-3.7.4.3 zipp-3.4.0
</pre></div>
</div>
<p>(The precise output of this command will change
depending on which versions of our dependencies get installed.)</p>
<p>We can now import our package in a script or a <a class="reference external" href="https://jupyter.org/">Jupyter notebook</a> just as we would any other package.
For example, to use the function in <code class="docutils literal notranslate"><span class="pre">utilities</span></code>, we would write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyzipf</span> <span class="kn">import</span> <span class="n">utilities</span> <span class="k">as</span> <span class="n">util</span>


<span class="n">util</span><span class="o">.</span><span class="n">collection_to_csv</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>To allow our functions to continue accessing <code class="docutils literal notranslate"><span class="pre">utilities.py</span></code>,
we need to change that line in both <code class="docutils literal notranslate"><span class="pre">countwords.py</span></code> and <code class="docutils literal notranslate"><span class="pre">collate.py</span></code>.</p>
<p>However,
the useful command-line scripts that we used to count and plot word counts
are no longer accessible directly from the Unix shell.
Fortunately there is an alternative to changing the function import
as described above.
The <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> package allows us to install programs along with the package.
These programs are placed beside those of other packages.
We tell <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> to do this by defining
<strong>entry points</strong> in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>


<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Amira Khan&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pyzipf&#39;</span><span class="p">],</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pandas&#39;</span><span class="p">,</span>
        <span class="s1">&#39;scipy&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pyyaml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pytest&#39;</span><span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;countwords = pyzipf.countwords:main&#39;</span><span class="p">,</span>
            <span class="s1">&#39;collate = pyzipf.collate:main&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotcounts = pyzipf.plotcounts:main&#39;</span><span class="p">]})</span>
</pre></div>
</div>
<p>The right side of the <code class="docutils literal notranslate"><span class="pre">=</span></code> operator is the location of a function,
written as <code class="docutils literal notranslate"><span class="pre">package.module:function</span></code>;
the left side is the name we want to use to call this function from the command line.
In this case we want to call each module’s <code class="docutils literal notranslate"><span class="pre">main</span></code> function;
right now, it requires an input argument <code class="docutils literal notranslate"><span class="pre">args</span></code>
containing the command-line arguments given by the user (Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/building_cli_python.html#handling-command-line-options">Scripting Options</a>).
For example,
the relevant section of our <code class="docutils literal notranslate"><span class="pre">countwords.py</span></code> program is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">count_words</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">)</span>
    <span class="n">util</span><span class="o">.</span><span class="n">collection_to_csv</span><span class="p">(</span><span class="n">word_counts</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Input file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--num&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output n most frequent words&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>We can’t pass any arguments to <code class="docutils literal notranslate"><span class="pre">main</span></code> when we define entry points in our <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file,
so we need to change our script slightly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">parse_command_line</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse the command line for input arguments.&quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Input file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--num&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output n most frequent words&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">args</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_command_line</span><span class="p">()</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">count_words</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">)</span>
    <span class="n">util</span><span class="o">.</span><span class="n">collection_to_csv</span><span class="p">(</span><span class="n">word_counts</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The new <code class="docutils literal notranslate"><span class="pre">parse_command_line</span></code> function handles the command-line arguments,
so that <code class="docutils literal notranslate"><span class="pre">main()</span></code> no longer requires any input arguments.</p>
<p>Once we have made the corresponding change in <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> and <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>,
we can re-install our package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Defaulting to user installation because normal site-packages is
  not writeable
Obtaining file:///Users/amira/pyzipf
Requirement already satisfied: matplotlib in
  /usr/lib/python3.7/site-packages (from pyzipf==0.1) (3.2.1)
Requirement already satisfied: pandas in
  /Users/amira/.local/lib/python3.7/site-packages
  (from pyzipf==0.1) (1.0.3)
Requirement already satisfied: scipy in
  /usr/lib/python3.7/site-packages (from pyzipf==0.1) (1.4.1)
Requirement already satisfied: pyyaml in
  /usr/lib/python3.7/site-packages (from pyzipf==0.1) (5.3.1)
Requirement already satisfied: cycler&gt;=0.10 in
  /usr/lib/python3.7/site-packages
  (from matplotlib-&gt;pyzipf==0.1) (0.10.0)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in
  /usr/lib/python3.7/site-packages
  (from matplotlib-&gt;pyzipf==0.1) (1.1.0)
Requirement already satisfied: numpy&gt;=1.11 in
  /usr/lib/python3.7/site-packages
  (from matplotlib-&gt;pyzipf==0.1) (1.18.2)
Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,
!=2.1.6,&gt;=2.0.1 in
  /usr/lib/python3.7/site-packages
  (from matplotlib-&gt;pyzipf==0.1) (2.4.6)
Requirement already satisfied: python-dateutil&gt;=2.1 in
  /usr/lib/python3.7/site-packages
  (from matplotlib-&gt;pyzipf==0.1) (2.8.1)
Requirement already satisfied: pytz&gt;=2017.2 in
  /usr/lib/python3.7/site-packages
  (from pandas-&gt;pyzipf==0.1) (2019.3)
Requirement already satisfied: six in
  /usr/lib/python3.7/site-packages
  (from cycler&gt;=0.10-&gt;matplotlib-&gt;pyzipf==0.1) (1.14.0)
Requirement already satisfied: setuptools in
  /usr/lib/python3.7/site-packages
  (from kiwisolver&gt;=1.0.1-&gt;matplotlib-&gt;pyzipf==0.1) (46.1.3)
Installing collected packages: pyzipf
  Running setup.py develop for pyzipf
Successfully installed pyzipf
</pre></div>
</div>
<p>The output looks slightly different than the first run
because <code class="docutils literal notranslate"><span class="pre">pip</span></code> could re-use some packages saved locally by the previous install
rather than re-fetching them from online repositories.
(If we hadn’t used the <code class="docutils literal notranslate"><span class="pre">-e</span></code> option to make the package immediately editable,
we would have to uninstall it before reinstalling it during development.)</p>
<p>We can now use our commands directly from the Unix shell
without writing the full path to the file
and without prefixing it with <code class="docutils literal notranslate"><span class="pre">python</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>countwords<span class="w"> </span>data/dracula.txt<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>the,8036
and,5896
i,4712
to,4540
of,3738
</pre></div>
</div>
<blockquote>
<div><p><strong>Tracking <code class="docutils literal notranslate"><span class="pre">pyzipf.egg-info</span></code>?</strong></p>
<p>Using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> automatically creates a new folder
in your project directory named <code class="docutils literal notranslate"><span class="pre">pyzipf.egg-info</span></code>.
This folder is <a class="reference external" href="https://github.com/github/gitignore">another example</a> of information generated by a script
that is also included in the repository,
so it should be included in the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file to avoid tracking with Git.</p>
</div></blockquote>
</section>
<section id="what-installation-does">
<h2>What Installation Does<a class="headerlink" href="#what-installation-does" title="Link to this heading">#</a></h2>
<p>Now that we have created and installed a Python package,
let’s explore what actually happens during installation.
The short version is that the contents of the package are copied into a directory that Python will search when it imports things.
In theory we can “install” packages by manually copying source code into the right places, but it’s much more efficient and safer to use a tool specifically made for this purpose, such as <code class="docutils literal notranslate"><span class="pre">conda</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<p>Most of the time, these tools copy packages into the Python installation’s <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory, but this is not the only place Python searches. Just as the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment in the shell contains a list of directories it searches. We can look at this list inside the interpreter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;&#39;,
&#39;/Users/amira/anaconda3/envs/pyzipf/lib/python37.zip&#39;,
&#39;/Users/amira/anaconda3/envs/pyzipf/lib/python3.7&#39;,
&#39;/Users/amira/anaconda3/envs/pyzipf/lib/python3.7/lib-dynload&#39;,
&#39;/Users/amira/.local/lib/python3.7/site-packages&#39;,
&#39;/Users/amira/anaconda3/envs/pyzipf/lib/python3.7/
site-packages&#39;,
&#39;/Users/amira/pyzipf&#39;]
</pre></div>
</div>
<p>The empty string at the start of the list means “the current directory.”
The rest are system paths for our Python installation,
and will vary from computer to computer.</p>
</section>
<section id="distributing-packages">
<h2>Distributing Packages<a class="headerlink" href="#distributing-packages" title="Link to this heading">#</a></h2>
<blockquote>
<div><p><strong>Look but Don’t Execute</strong></p>
<p>In this section we upload the <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> package
to TestPyPI and PyPI:</p>
<p><a class="reference external" href="https://test.pypi.org/project/pyzipf">https://test.pypi.org/project/pyzipf</a></p>
<p><a class="reference external" href="https://pypi.org/project/pyzipf/">https://pypi.org/project/pyzipf/</a></p>
<p>You won’t be able to execute the <code class="docutils literal notranslate"><span class="pre">twine</span> <span class="pre">upload</span></code>
commands below exactly as shown
(because Amira has already uploaded the <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> package),
but the general sequence of commands in this section
is an excellent resource to refer to when you are
uploading your own packages.
If you want to try uploading your own <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> package via <code class="docutils literal notranslate"><span class="pre">twine</span></code>,
you could edit the project name to include your name (e.g., <code class="docutils literal notranslate"><span class="pre">pyzipf-yourname</span></code>)
and use the TestPyPI repository for the upload.</p>
</div></blockquote>
<p>An installable package is most useful
if we distribute it so that anyone who wants it
can run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pyzipf</span></code> and get it. To make this possible,
we need to use <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> to create a <strong>source distribution</strong> (known as an <code class="docutils literal notranslate"><span class="pre">sdist</span></code> in Python packaging jargon):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>python<span class="w"> </span>setup.py<span class="w"> </span>sdist
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>running sdist
running egg_info
creating pyzipf.egg-info
writing pyzipf.egg-info/PKG-INFO
writing dependency_links to pyzipf.egg-info/dependency_links.txt
writing entry points to pyzipf.egg-info/entry_points.txt
writing requirements to pyzipf.egg-info/requires.txt
writing top-level names to pyzipf.egg-info/top_level.txt
writing manifest file &#39;pyzipf.egg-info/SOURCES.txt&#39;
package init file &#39;pyzipf/__init__.py&#39; not found
(or not a regular file)
reading manifest file &#39;pyzipf.egg-info/SOURCES.txt&#39;
writing manifest file &#39;pyzipf.egg-info/SOURCES.txt&#39;
running check
warning: check: missing required meta-data: url

warning: check: missing meta-data: if &#39;author&#39; supplied, 
                &#39;author_email&#39; must be supplied too

creating pyzipf-0.1
creating pyzipf-0.1/pyzipf
creating pyzipf-0.1/pyzipf.egg-info
copying files to pyzipf-0.1...
copying README.md -&gt; pyzipf-0.1
copying setup.py -&gt; pyzipf-0.1
copying pyzipf/collate.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf/countwords.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf/plotcounts.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf/script_template.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf/test_zipfs.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf/utilities.py -&gt;
  pyzipf-0.1/pyzipf
copying pyzipf.egg-info/PKG-INFO -&gt;
  pyzipf-0.1/pyzipf.egg-info
copying pyzipf.egg-info/SOURCES.txt -&gt;
  pyzipf-0.1/pyzipf.egg-info
copying pyzipf.egg-info/dependency_links.txt -&gt;
  pyzipf-0.1/pyzipf.egg-info
copying pyzipf.egg-info/entry_points.txt -&gt;
  pyzipf-0.1/pyzipf.egg-info
copying pyzipf.egg-info/requires.txt -&gt;
  pyzipf-0.1/pyzipf.egg-info
copying pyzipf.egg-info/top_level.txt -&gt;
  pyzipf-0.1/pyzipf.egg-info
Writing pyzipf-0.1/setup.cfg
creating dist
Creating tar archive
removing &#39;pyzipf-0.1&#39; (and everything under it)
</pre></div>
</div>
<p>This creates a file named <code class="docutils literal notranslate"><span class="pre">pyzipf-0.1.tar.gz</span></code>,
located in a new directory in our project, <code class="docutils literal notranslate"><span class="pre">dist/</span></code>
(another directory to add to <a class="reference external" href="https://github.com/github/gitignore"><code class="docutils literal notranslate"><span class="pre">.gitignore</span></code></a>).
These distribution files can now be distributed via <a class="reference external" href="https://pypi.org">PyPI</a>,
the standard repository for Python packages.
Before doing that, though, we can put <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> on <a class="reference external" href="https://test.pypi.org">TestPyPI</a>, which lets us test the distribution of our package
without having things appear in the main PyPI repository.
We must have an account,
but they are free to create.</p>
<p>The preferred tool for uploading packages to PyPI is called <a class="reference external" href="https://twine.readthedocs.io/en/latest/">twine</a>, which we can install with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>twine
</pre></div>
</div>
<p>Following the <a class="reference external" href="https://packaging.python.org/guides/using-testpypi/">Python Packaging User Guide</a>, we upload our distribution from the <code class="docutils literal notranslate"><span class="pre">dist/</span></code> folder
using the <code class="docutils literal notranslate"><span class="pre">--repository</span></code> option to specify the TestPyPI repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>twine<span class="w"> </span>upload<span class="w"> </span>--repository<span class="w"> </span>testpypi<span class="w"> </span>dist/*
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Uploading distributions to https://test.pypi.org/legacy/
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Enter<span class="w"> </span>your<span class="w"> </span>username:<span class="w"> </span>amira-khan
Enter<span class="w"> </span>your<span class="w"> </span>password:<span class="w"> </span>*********
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Uploading pyzipf-0.1.0.tar.gz
100%|█████████████████| 5.59k/5.59k [00:01&lt;00:00, 3.27kB/s]

View at:
https://test.pypi.org/project/pyzipf/0.1/
</pre></div>
</div>
<figure class="align-default" id="packaging-testpypi">
<img alt="../_images/testpypi.png" src="../_images/testpypi.png" />
<figcaption>
<p><span class="caption-number">Fig. 62 </span><span class="caption-text">Test PyPi</span><a class="headerlink" href="#packaging-testpypi" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>and view the results at the new test project webpage
(<a class="reference internal" href="#packaging-testpypi"><span class="std std-ref">Figure Test Pypi</span></a>).
In the exercises,
we will explore additional metadata that can be added to <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>
so that it appears on the project webpage.</p>
<p>We can test that everything works as expected
by creating a virtual environment
and installing our package from TestPyPI
(the <code class="docutils literal notranslate"><span class="pre">--extra-index-url</span></code> reference to PyPI below accounts for the fact that
not all of our package dependencies are available on TestPyPI):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>pyzipf-test<span class="w"> </span>pip<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7.6
<span class="o">(</span>pyzipf<span class="o">)</span>$<span class="w"> </span>conda<span class="w"> </span>activate<span class="w"> </span>pyzipf-test<span class="w"> </span>
<span class="o">(</span>pyzipf-test<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--index-url
<span class="w">  </span>https://test.pypi.org/simple<span class="w"> </span>
<span class="w">  </span>--extra-index-url<span class="w"> </span>https://pypi.org/simple<span class="w"> </span>pyzipf
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Looking in indexes: https://test.pypi.org/simple,
                    https://pypi.org/simple
Collecting pyzipf
  Downloading pyzipf-0.1.tar.gz (5.5 kB)
Collecting matplotlib
 Using cached matplotlib-3.3.3-cp37-cp37m-macosx_10_9_x86_64.whl
...collecting other packages...
Building wheels for collected packages: pyzipf
  Building wheel for pyzipf (setup.py) ... done
  Created wheel for pyzipf:
    filename=pyzipf-0.1-py3-none-any.whl
    size=6836
    sha256=62a23715379b71ad5a6b124444fab194
           596d094c7df293c4019d33bdd648aff1
  Stored in directory: /Users/amira/Library/Caches/pip/wheels/
   c6/d6/08/f16cf80ec82a9c70ab8a5d9c8acc7ab35c9a01009539aeb2be
Successfully built pyzipf
Installing collected packages: zipp, typing-extensions, six,
pyparsing, importlib-metadata, toml, pytz, python-dateutil, py,
pluggy, pillow, packaging, numpy, kiwisolver, iniconfig, cycler,
attrs, scipy, pyyaml, pytest, pandas, matplotlib, pyzipf
Successfully installed attrs-20.3.0 cycler-0.10.0
importlib-metadata-3.3.0 iniconfig-1.1.1 kiwisolver-1.3.1
matplotlib-3.3.3 numpy-1.19.4 packaging-20.8 pandas-1.1.5
pillow-8.0.1 pluggy-0.13.1 py-1.10.0 pyparsing-2.4.7
pytest-6.2.1 python-dateutil-2.8.1 pytz-2020.4 pyyaml-5.3.1
pyzipf-0.1 scipy-1.5.4 six-1.15.0 toml-0.10.2
typing-extensions-3.7.4.3 zipp-3.4.0
</pre></div>
</div>
<p>Once again,
<code class="docutils literal notranslate"><span class="pre">pip</span></code> takes advantage of the fact that some packages already existing on our system
(e.g., they are cached from our previous installs)
and doesn’t download them again.
Once we are happy with our package at TestPyPI,
we can go through the same process to put it on the main <a class="reference external" href="https://pypi.org">PyPI</a> repository.</p>
<blockquote>
<div><p><strong>Python Wheels</strong></p>
<p>When we installed our package from TestPyPI,
the output said that it collected our source distribution
and then used it to build a <strong>wheel</strong> for <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code>.
This build takes time (especially for large, complex packages),
so it can be a good idea for package authors to create and upload wheel files (<code class="docutils literal notranslate"><span class="pre">.whl</span></code>)
to PyPI along with the source distribution.
<code class="docutils literal notranslate"><span class="pre">pip</span></code> will use the appropriate wheel file if it’s available at PyPI
instead of building it from the source distribution,
which makes the installation process faster and more efficient.
Check out the <a class="reference external" href="https://realpython.com/python-wheels/">Real Python guide to wheels</a> for details.</p>
</div></blockquote>
<blockquote>
<div><p><strong><code class="docutils literal notranslate"><span class="pre">conda</span></code> Installation Packages</strong></p>
<p>Given the widespread use of <a class="reference external" href="https://conda.io"><code class="docutils literal notranslate"><span class="pre">conda</span></code></a> for package management,
it can be a good idea to post a <code class="docutils literal notranslate"><span class="pre">conda</span></code> installation package to
<a class="reference external" href="https://anaconda.org">Anaconda Cloud</a>.
The <code class="docutils literal notranslate"><span class="pre">conda</span></code> documentation has <a class="reference external" href="https://docs.conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs-skeleton.html">instructions</a> for quickly building
a <code class="docutils literal notranslate"><span class="pre">conda</span></code> package for a Python module that is already available on PyPI.
See <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/anaconda.html">Appendix on Anaconda</a> for more information about <code class="docutils literal notranslate"><span class="pre">conda</span></code> and Anaconda Cloud.</p>
</div></blockquote>
</section>
<section id="documenting-packages">
<h2>Documenting Packages<a class="headerlink" href="#documenting-packages" title="Link to this heading">#</a></h2>
<p>Now that our package has been distributed,
we need to think about whether we have provided sufficient documentation.
Docstrings (Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/building_cli_python.html#handling-command-line-options">Scripting Docstring</a>) and READMEs
are sufficient to describe most simple packages,
but as our code base grows larger,
we will want to complement these manually written sections with automatically generated content,
references between functions,
and search functionality.
For most large Python packages,
such documentation is generated using a <strong>documentation generator</strong>} called <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>,
which is often used in combination with a free online hosting service called
<a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/v2.html">Read the Docs</a>.
In this section we will update our README file with some basic package-level documentation,
before using Sphinx and Read the Docs to host that information online
along with more detailed function-level documentation.
For further advice on writing documentation for larger and more complex packages,
see <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/writing_documentation.html">Appendix Documentation</a>).</p>
<section id="including-package-level-documentation-in-the-readme">
<h3>Including package-level documentation in the <code class="docutils literal notranslate"><span class="pre">README</span></code><a class="headerlink" href="#including-package-level-documentation-in-the-readme" title="Link to this heading">#</a></h3>
<p>When a user first encounters a package, they usually want to know what the package is meant to do,instructions on how to install it, and examples of how to use it. We can include these elements in the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file we started in <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/git_advanced.html">Chapter Git Advanced</a>. At the moment it reads as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>README.md
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

These Zipf&#39;s Law scripts tally the occurrences of words in text
files and plot each word&#39;s rank versus its frequency.

...
</pre></div>
</div>
<p>This file is currently written in <a class="reference external" href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>, but Sphinx uses a format called <strong>reStructuredText</strong> (reST), so we will switch to that. Like Markdown, reST is a plain-text markup format that can be rendered into HTML or PDF documents with complex indices and cross-links. GitHub recognizes files ending in <code class="docutils literal notranslate"><span class="pre">.rst</span></code> as reST files and displays them nicely,
so our first task is to rename our existing file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>mv<span class="w"> </span>README.md<span class="w"> </span>README.rst
</pre></div>
</div>
<p>We then make a few edits to the file formatting:
titles are underlined and overlined,
section headings are underlined,
and code blocks are set off with two colons (<code class="docutils literal notranslate"><span class="pre">::</span></code>) and indented.
We can also add some context about why to use the package,
as well as updated information about package installation:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>The ``pyzipf`` package tallies the occurrences of words in text
files and plots each word&#39;s rank versus its frequency together 
with a line for the theoretical distribution for Zipf&#39;s Law.

<span class="gu">Motivation</span>
<span class="gu">----------</span>

Zipf&#39;s Law is often stated as an observational pattern in the
relationship between the frequency and rank of words in a text:

`&quot;…the most frequent word will occur approximately twice as
often as the second most frequent word,
three times as often as the third most
frequent word, etc.&quot;`
— <span class="sb">`wikipedia &lt;https://en.wikipedia.org/wiki/Zipf%27s_law&gt;`</span>_

Many books are available to download in plain text format
from sites such as
<span class="sb">`Project Gutenberg &lt;https://www.gutenberg.org/&gt;`</span>_,
so we created this package to qualitatively explore how well
different books align with the word frequencies predicted by
Zipf&#39;s Law.

<span class="gu">Installation</span>
<span class="gu">------------</span>

``pip install pyzipf``

<span class="gu">Usage</span>
<span class="gu">-----</span>

After installing this package, the following three commands will
be available from the command line

<span class="k">-</span><span class="w"> </span>``countwords`` for counting the occurrences of words in a text
<span class="k">-</span><span class="w"> </span>``collate`` for collating multiple word count files together
<span class="k">-</span><span class="w"> </span>``plotcounts`` for visualizing the word counts

A typical usage scenario would include running the following
from your terminal::

    countwords dracula.txt &gt; dracula.csv
    countwords moby_dick.txt &gt; moby_dick.csv
    collate dracula.csv moby_dick.csv &gt; collated.csv
    plotcounts collated.csv --outfile zipf-drac-moby.jpg

Additional information on each function
can be found in their docstrings and appending the ``-h`` flag,
e.g., ``countwords -h``.

<span class="gu">Contributing</span>
<span class="gu">------------</span>

Interested in contributing?
Check out the CONTRIBUTING.md
file for guidelines on how to contribute.
Please note that this project is released with a
Contributor Code of Conduct (CONDUCT.md).
By contributing to this project,
you agree to abide by its terms.
Both of these files can be found in our
<span class="sb">`GitHub repository. &lt;https://github.com/amira-khan/zipf&gt;`</span>_
</pre></div>
</div>
</section>
<section id="creating-a-web-page-for-documentation">
<h3>Creating a web page for documentation<a class="headerlink" href="#creating-a-web-page-for-documentation" title="Link to this heading">#</a></h3>
<p>Now that we’ve added package-level documentation to our README file,
we need to think about function-level documentation.
We want to provide users with a list of all the functions available in our package
along with a short description of what they do and how to use them.
We could achieve this by manually cutting and pasting function names and docstrings
from our Python modules (i.e., <code class="docutils literal notranslate"><span class="pre">countwords.py</span></code>, <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>, etc.),
but that would be a time-consuming process prone to errors as more functions are added over time.
Instead, we can use a <strong>documentation generator</strong> called <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> that is capable of scanning Python code for function names and docstrings and can export that information to HTML format for hosting on the web.</p>
<p>To start, let’s install Sphinx and create a <code class="docutils literal notranslate"><span class="pre">docs/</span></code> directory at the top of our repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sphinx
$<span class="w"> </span>mkdir<span class="w"> </span>docs
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>docs
</pre></div>
</div>
<p>We can then run Sphinx’s <code class="docutils literal notranslate"><span class="pre">quickstart</span></code> tool to create a minimal set of documentation
that includes the package-level information in the <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> file we just created
and the function-level information in the docstrings we’ve written along the way.
It asks us to specify the project’s name,
the name of the project’s author,
and a release;
we can use the default settings for everything else.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sphinx-quickstart
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Welcome to the Sphinx 3.1.1 quickstart utility.

Please enter values for the following settings (just press Enter
to accept a default value, if one is given in brackets).

Selected root path: .

You have two options for placing the build directory for Sphinx
output. Either, you use a directory &quot;_build&quot; within the root
path, or you separate &quot;source&quot; and &quot;build&quot; directories within
the root path.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>Separate<span class="w"> </span><span class="nb">source</span><span class="w"> </span>and<span class="w"> </span>build<span class="w"> </span>directories<span class="w"> </span><span class="o">(</span>y/n<span class="o">)</span><span class="w"> </span><span class="o">[</span>n<span class="o">]</span>:<span class="w"> </span>n
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The project name will occur in several places in the built
documentation.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>Project<span class="w"> </span>name:<span class="w"> </span>pyzipf
&gt;<span class="w"> </span>Author<span class="w"> </span>name<span class="o">(</span>s<span class="o">)</span>:<span class="w"> </span>Amira<span class="w"> </span>Khan
&gt;<span class="w"> </span>Project<span class="w"> </span>release<span class="w"> </span><span class="o">[]</span>:<span class="w"> </span><span class="m">0</span>.1
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>If the documents are to be written in a language other than
English, you can select a language here by its language code.
Sphinx will then translate text that it generates into that
language.

For a list of supported codes, see
https://www.sphinx-doc.org/en/master/usage/configuration.html
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>Project<span class="w"> </span>language<span class="w"> </span><span class="o">[</span>en<span class="o">]</span>:
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Creating file /Users/amira/pyzipf/docs/conf.py.
Creating file /Users/amira/pyzipf/docs/index.rst.
Creating file /Users/amira/pyzipf/docs/Makefile.
Creating file /Users/amira/pyzipf/docs/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file
/Users/amira/pyzipf/docs/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where &quot;builder&quot; is one of the supported builders, e.g. HTML,
LaTeX or linkcheck.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">quickstart</span></code> creates a file called <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory that configures Sphinx.
We will make two changes to that file
so that another tool called <code class="docutils literal notranslate"><span class="pre">autodoc</span></code> can find our modules (and their docstrings).
The first change relates to the “path setup” section near the head of the file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># -- Path setup -----------------------------------------------

# If extensions (or modules to document with autodoc) are in
# another directory, add these directories to sys.path here. If
# the directory is relative to the documentation root, use
# os.path.abspath to make it absolute, like shown here.
</pre></div>
</div>
<p>Relative to the <code class="docutils literal notranslate"><span class="pre">docs/</span></code> directory,
our modules (i.e., <code class="docutils literal notranslate"><span class="pre">countwords.py</span></code>, <code class="docutils literal notranslate"><span class="pre">utilities.py</span></code>, etc.) are located in the <code class="docutils literal notranslate"><span class="pre">../pyzipf</span></code> directory.
We therefore need to uncomment the relevant lines of the path setup section in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>
to tell Sphinx where those modules are:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;../pyzipf&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>We will also change the “general configuration” section
to add <code class="docutils literal notranslate"><span class="pre">autodoc</span></code> to the list of Sphinx extensions we want:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinx.ext.autodoc&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>With those edits complete,
we can now generate a Sphinx <code class="docutils literal notranslate"><span class="pre">autodoc</span></code> script
that generates information about each of our modules
and puts it in corresponding <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files in the <code class="docutils literal notranslate"><span class="pre">docs/source</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sphinx-apidoc<span class="w"> </span>-o<span class="w"> </span>source/<span class="w"> </span>../pyzipf
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Creating file source/collate.rst.
Creating file source/countwords.rst.
Creating file source/plotcounts.rst.
Creating file source/test_zipfs.rst.
Creating file source/utilities.rst.
Creating file source/modules.rst.
</pre></div>
</div>
<p>At this point, we are ready to generate our webpage.
The <code class="docutils literal notranslate"><span class="pre">docs</span></code> sub-directory contains a Makefile that was generated by <code class="docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code>.
If we run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> and open <code class="docutils literal notranslate"><span class="pre">docs/_build/index.html</span></code> in a web browser,
we’ll have a landing page with minimal documentation (<a class="reference internal" href="#packaging-sphinx-landing-page-original"><span class="std std-ref">Figure Packaging Sphinx Landing page</span></a>).
If we click on the <code class="docutils literal notranslate"><span class="pre">Module</span> <span class="pre">Index</span></code> link we can access the documentation for the individual modules
(Figures <a class="reference internal" href="#packaging-sphinx-module-list"><span class="std std-ref">Module List</span></a> and <a class="reference internal" href="#packaging-sphinx-module-countwords"><span class="std std-ref">Sphinx Module Countwords</span></a>).</p>
<figure class="align-default" id="packaging-sphinx-landing-page-original">
<img alt="../_images/landing-page-original.png" src="../_images/landing-page-original.png" />
<figcaption>
<p><span class="caption-number">Fig. 63 </span><span class="caption-text">Packaging Sphinx Landing Page</span><a class="headerlink" href="#packaging-sphinx-landing-page-original" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="packaging-sphinx-module-list">
<img alt="../_images/module-index.png" src="../_images/module-index.png" />
<figcaption>
<p><span class="caption-number">Fig. 64 </span><span class="caption-text">Sphinx Module List</span><a class="headerlink" href="#packaging-sphinx-module-list" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="packaging-sphinx-module-countwords">
<img alt="../_images/module-countwords.png" src="../_images/module-countwords.png" />
<figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Sphinx Module Countwords</span><a class="headerlink" href="#packaging-sphinx-module-countwords" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The landing page for the website is the perfect place for the content of our README file,
so we can add the line <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">include::</span> <span class="pre">../README.rst</span></code> to the <code class="docutils literal notranslate"><span class="pre">docs/index.rst</span></code> file to insert it:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh">Welcome to pyzipf&#39;s documentation!</span>
<span class="gh">==================================</span>

.. include:: ../README.rst

.. toctree::
   :maxdepth: 2
   :caption: Contents:

<span class="gh">Indices and tables</span>
<span class="gh">==================</span>

<span class="k">*</span><span class="w"> </span>:ref:`genindex`
<span class="k">*</span><span class="w"> </span>:ref:`modindex`
<span class="k">*</span><span class="w"> </span>:ref:`search`
</pre></div>
</div>
<p>If we re-run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code>,
we now get an updated set of web pages that
re-uses our README as the introduction to the documentation (Figure <a class="reference internal" href="#packaging-sphinx-landing-page"><span class="std std-ref">Sphinx Landing page</span></a>).</p>
<figure class="align-default" id="packaging-sphinx-landing-page">
<img alt="../_images/landing-page.png" src="../_images/landing-page.png" />
<figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Sphinx Landing page</span><a class="headerlink" href="#packaging-sphinx-landing-page" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Before going on,
note that Sphinx is not included in the installation requirements in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/advanced_cicd.html">Chapter CI/CD - Testing CLI</a>.
Sphinx isn’t needed to run, develop, or even test our package,
but it is needed for building the documentation.
To note this requirement,
but without requiring everyone installing the package to install Sphinx,
let’s create a <code class="docutils literal notranslate"><span class="pre">requirements_docs.txt</span></code> file that contains this line
(where the version number is found by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">freeze</span></code>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Sphinx&gt;=1.7.4
</pre></div>
</div>
<p>Anyone wanting to build the documentation (including us, on another computer)
now only needs run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements_docs.txt</span></code></p>
</section>
<section id="hosting-documentation-online">
<h3>Hosting documentation online<a class="headerlink" href="#hosting-documentation-online" title="Link to this heading">#</a></h3>
<p>Now that we have generated our package documentation,
we need to host it online.
A common option for Python projects is <a class="reference external" href="https://docs.readthedocs.io/en/latest/">Read the Docs</a>, which is a community-supported site that hosts software documentation free of charge.</p>
<p>Just as continuous integration systems automatically re-test things (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/advanced_cicd.html">Chapter CI/CD - Testing CLI</a>, Read the Docs integrates with GitHub
so that documentation is automatically re-built
every time updates are pushed to the project’s GitHub repository.
If we register for Read the Docs with our GitHub account,
we can log in at the Read the Docs website and
import a project from our GitHub repository.
Read the Docs will then build the documentation
(using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> as we did earlier)
and host the resulting files.</p>
<p>For this to work,
all of the source files generated by Sphinx
need to be checked into your GitHub repository:
in our case,
this means <code class="docutils literal notranslate"><span class="pre">docs/source/*.rst</span></code>,
<code class="docutils literal notranslate"><span class="pre">docs/Makefile</span></code>,
<code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code>,
and <code class="docutils literal notranslate"><span class="pre">docs/index.rst</span></code>.
We also need to create and save a
<a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/v2.html">Read the Docs configuration file</a> in the root directory of our <code class="docutils literal notranslate"><span class="pre">pyzipf</span></code> package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/pyzipf
$<span class="w"> </span>cat<span class="w"> </span>.readthedocs.yml
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># .readthedocs.yml
# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html
# for details

# Required
version: 2

# Build documentation in the docs/ directory with Sphinx
sphinx:
  configuration: docs/conf.py

# Optionally set the version of Python and requirements required
# to build your docs
python:
  version: 3.7
  install:
    - requirements: requirements.txt
</pre></div>
</div>
<p>The configuration file uses the now-familiar <strong>YAML</strong> format
(Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/configuration.html#configuration-file-formats">Configuration Formats</a> and Appendix <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/yaml.html">YAML</a> to specify the location of the Sphinx configuration script (<code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code>) and the dependencies for our package (<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>).</p>
<p>Amira has gone through this process and the documentation is now available at:</p>
<p><a class="reference external" href="https://pyzipf.readthedocs.io/">https://pyzipf.readthedocs.io/</a></p>
</section>
</section>
<section id="software-journals">
<h2>Software Journals<a class="headerlink" href="#software-journals" title="Link to this heading">#</a></h2>
<p>As a final step to releasing our new package,
we might want to give it a <strong>DOI</strong> so that it can be cited by researchers. As we saw in Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/tracking_provedance.html#code-provenance">Provenance Code Scripts</a>,
GitHub <a class="reference external" href="https://guides.github.com/activities/citable-code/">integrates with Zenodo</a> for precisely this purpose.</p>
<p>While creating a DOI using a site like Zenodo
is often the end of the software publishing process,
there is the option of publishing
a journal paper to describe the software in detail.
Some research disciplines have journals devoted
to describing particular types of software
(e.g., <a class="reference external" href="https://www.geoscientific-model-development.net/"><em>Geoscientific Model Development</em></a>),
and there are also a number of generic software journals such as the
<a class="reference external" href="https://openresearchsoftware.metajnl.com/"><em>Journal of Open Research Software</em></a> and
the <a class="reference external" href="https://joss.theoj.org/"><em>Journal of Open Source Software</em></a>.
Packages submitted to these journals are typically assessed against a range of criteria
relating to how easy the software is to install
and how well it is documented,
so the peer review process can be a great way to get critical feedback
from people who have seen many research software packages come and go over the years.</p>
<p>Once you have obtained a DOI and possibly published with a software journal,
the last step is to tell users how to cite your new software package.
This is traditionally done by adding a <code class="docutils literal notranslate"><span class="pre">CITATION</span></code> file to the associated GitHub repository (alongside <code class="docutils literal notranslate"><span class="pre">README</span></code>, <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>, <code class="docutils literal notranslate"><span class="pre">CONDUCT</span></code> and similar files discussed in Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/getting_started.html#standard-information">Getting Started</a>), containing a plain text citation that can be copied and pasted into email as well as entries formatted for various bibliographic systems like <a class="reference external" href="http://www.bibtex.org/">BibTeX</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>CITATION.md
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Citation

If you use the pyzipf package for work/research presented in a
publication, we ask that you please cite:

Khan A and Virtanen S, 2020. pyzipf: A Python package for word
count analysis. *Journal of Important Software*, 5(51), 2317,
https://doi.org/10.21105/jois.02317

### BibTeX entry

@article{Khan2020,
    title={pyzipf: A Python package for word count analysis.},
    author={Khan, Amira and Virtanen, Sami},
    journal={Journal of Important Software},
    volume={5},
    number={51},
    eid={2317},
    year={2020},
    doi={10.21105/jois.02317},
    url={https://doi.org/10.21105/jois.02317},
}
</pre></div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>Thousands of people have helped write the software that our Zipf’s Law example relies on,
but their work is only useful because they packaged it
and documented how to use it.
Doing this is increasingly recognized as a credit-worthy activity
by universities, government labs, and other organizations,
particularly for research software engineers.
It is also deeply satisfying to make strangers’ lives better,
if only in small ways.</p>
</section>
<section id="keypoints">
<h2>Keypoints<a class="headerlink" href="#keypoints" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Use <a class="reference external" href="https://setuptools.readthedocs.io/"><code class="docutils literal notranslate"><span class="pre">setuptools</span></code></a> to build and distribute Python packages.</p></li>
<li><p>Create a directory named <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> containing a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> script with a subdirectory also called <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> containing the package’s source files.</p></li>
<li><p>Use <strong>semantic versioning</strong> for software releases.</p></li>
<li><p>Use a <strong>virtual environment</strong> to test how your package installs without disrupting your main Python installation.</p></li>
<li><p>Use <a class="reference external" href="https://pypi.org/project/pip"><code class="docutils literal notranslate"><span class="pre">pip</span></code></a> install Python packages.</p></li>
<li><p>The default repository for Python packages is <a class="reference external" href="https://pypi.org">PyPI</a>.</p></li>
<li><p>Use <a class="reference external" href="https://test.pypi.org">TestPyPI</a> to test the distribution of your package.</p></li>
<li><p>Use a README file for package-level documentation.</p></li>
<li><p>Use <a class="reference external" href="https://sphinx-doc.org">Sphinx</a> to generate documentation for a package.</p></li>
<li><p>Use <a class="reference external" href="https://docs.readthedocs.io">Read the Docs</a> to host package documentation online.</p></li>
<li><p>Create a <strong>DOI</strong> for your package using <a class="reference external" href="https://guides.github.com/activities/citable-code/">GitHub’s Zenodo integration</a></p></li>
<li><p>Publish details of your package in a software journal so others can cite it.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="introduction/packaging.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to Packaging Python Software</p>
      </div>
    </a>
    <a class="right-next"
       href="../exercises/packaging.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Exercises - Packaging</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-python-package">Creating a Python Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#virtual-environments">Virtual Environments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-a-development-package">Installing a Development Package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-installation-does">What Installation Does</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distributing-packages">Distributing Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#documenting-packages">Documenting Packages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#including-package-level-documentation-in-the-readme">Including package-level documentation in the <code class="docutils literal notranslate"><span class="pre">README</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-web-page-for-documentation">Creating a web page for documentation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hosting-documentation-online">Hosting documentation online</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-journals">Software Journals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Software Engineering Group - University of Potsdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>