
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bash Advanced &#8212; RSE-UP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css?v=c89437f7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/bash_advanced';</script>
    <link rel="canonical" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/bash_advanced.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bash Advanced Exercises" href="../exercises/bash_advanced.html" />
    <link rel="prev" title="Bash Tool Exercises" href="../exercises/bash_tools.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">RSE-UP</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Before we start</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Software to Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_refresher.html">Python Refresher</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Running Example and Project Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Software Licenses</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working with the Shell</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/bash.html">Introduction to Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash_basics.html">The Basics of the Unix Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/bash_basics.html">Bash Basics Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash_tools.html">Building Tools with the Unix Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/bash_tools.html">Bash Tool Exercises</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Bash Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/bash_advanced.html">Bash Advanced Exercises</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Version Control with Git</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/vcs.html">Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_version_control.html">Using Git at the Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/version_control.html">Exercise Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_ssh-key.html">Using SSH on Gitlab and Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit_messages.html">Writing good commit messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_advanced.html">Going Further with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_advanced_github.html">Forking on Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/git_advanced.html">Exercises Git Advanced</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Coding Style and Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clean_readable_code.html">Writing Readable Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_documentation.html">Documenting Programs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Markdown, READMEs, Notebooks and Computational Narratives</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/documentation.html">Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_files.html">README Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction/jupyter.html">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp_narative.html">Computational Narratives</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing and Error Handling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/testing.html">Introduction to Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing_programs.html">Testing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/testing.html">Exercises - Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction/error_handling.html">Introduction to Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">Handling Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/error_handling.html">Exercises - Error Handling</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working in teams</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_in_teams.html">Working in Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/work_teams.html">Exercise - Work Teams</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Data Analysis Workflows</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Requirements, Architecture and Design</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/requirements_architecture_design.html">Application Classes, Software Requirements, Architecture and Design</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="application_classes.html">Application Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Software Development Process and Requirements Engineering in RSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture_design.html">Architecture and Design</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Building Command-Line Tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/python_cli.html">Introduction to CLI application using Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_cli.html">Building Command-Line Tools with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_cli.html">Exercises - Scripting Python for CLI tools</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration and Packaging</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/config.html">Introduction to Configuration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuring Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html">YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/config.html">Exercises - Configuration</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/packaging.html">Introduction to Packaging Python Software</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="python_packaging.html">Creating Packages with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/packaging.html">Exercises - Packaging</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows and Automation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/automation.html">Introduction to Make and Snakemake</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_snakemake.html">Introduction to Snakemake</a></li>
<li class="toctree-l2"><a class="reference internal" href="snakemake_continued.html">Snakemake Continued</a></li>
<li class="toctree-l2"><a class="reference internal" href="snakemake_continued_2.html">Snakemake Continued Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/snakemake.html">Snakemake Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_make.html">Automating Analyses with Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/intro_make.html">Exercises - Make</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/cicd.html">Introduction to CI/CD</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="cicd_basics.html">CI/CD Basics</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tracking Provenance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tracking_provenance.html">Tracking Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/provenance.html">Exercises - Provenance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="solutions.html">Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_remotely.html">Working Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Project Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP/issues/new?title=Issue%20on%20page%20%2Fchapters/bash_advanced.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/bash_advanced.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Bash Advanced</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-commands">Creating New Commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-scripts-more-versatile">Making Scripts More Versatile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#turning-interactive-work-into-a-script">Turning Interactive Work into a Script</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-things-in-files">Finding Things in Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-files">Finding Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-shell">Configuring the Shell</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-points">Key Points</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="bash-advanced">
<h1>Bash Advanced<a class="headerlink" href="#bash-advanced" title="Link to this heading">#</a></h1>
<blockquote>
<div><p>There isn’t a way things should be. There’s just what happens, and what we do.</p>
<p>— Terry Pratchett</p>
</div></blockquote>
<p>The previous chapters explained how we can use the command line
to do all of the things we can do with a GUI,
and how to combine commands in new ways using pipes and redirection.
This chapter extends those ideas to show
how we can create new tools by saving commands in files
and how to use a more powerful version of <strong>wildcards</strong> to extract data from files.</p>
<p>We’ll be working with <code class="docutils literal notranslate"><span class="pre">zipf</span></code> project (found <a class="reference external" href="https://gitup.uni-potsdam.de/se-up/rse_course/rse_course_materials">here</a>), which should contain the following files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>zipf/
└── data
    ├── dracula.txt
    ├── frankenstein.txt
    ├── jane_eyre.txt
    ├── moby_dick.txt
    ├── sense_and_sensibility.txt
    ├── sherlock_holmes.txt
    └── time_machine.txt
</pre></div>
</div>
<blockquote>
<div><p><strong>Deleting Extra Files</strong></p>
<p>You may have additional files
if you worked through all of the exercises in the previous chapter.
Feel free to delete them or move them to a separate directory.
If you have accidentally deleted files you need,
you can download them again by following the instructions in Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/getting_started.html#downloading-the-data">Downloading the Data</a>.</p>
</div></blockquote>
<section id="creating-new-commands">
<h2>Creating New Commands<a class="headerlink" href="#creating-new-commands" title="Link to this heading">#</a></h2>
<p>Loops let us run the same commands many times,
but we can go further and save commands in files
so that we can repeat complex operations with a few keystrokes.
For historical reasons,
a file full of shell commands is usually called a <strong>shell script</strong> but it is really just another kind of program.</p>
<p>Let’s start by creating a new directory for our runnable programs called <code class="docutils literal notranslate"><span class="pre">bin/</span></code>,
consistent with the project structure described in Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/getting_started.html#organizing-project-content">Organizing the Project Content</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/zipf
$<span class="w"> </span>mkdir<span class="w"> </span>bin
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>bin
</pre></div>
</div>
<p>Edit a new file called <code class="docutils literal notranslate"><span class="pre">book_summary.sh</span></code> to hold our shell script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>nano<span class="w"> </span>book_summary.sh
</pre></div>
</div>
<p>and insert this line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>head -n 17 ../data/moby_dick.txt | tail -n 8
</pre></div>
</div>
<p>Note that we do <em>not</em> put the <code class="docutils literal notranslate"><span class="pre">$</span></code> prompt at the front of the line.
We have been showing that to highlight interactive commands,
but in this case we are putting the command in a file rather than running it immediately.</p>
<blockquote>
<div><p><strong>Empty Line at the End of a File?</strong></p>
<p>You’ll often see scripts from many languages that end in an empty line.
What you are seeing, though,
is the last line of code ending in a newline character.
This indicates to the computer that the code has ended.
While this newline character is not <em>required</em> for shell scripts to work,
and sometimes isn’t shown by coding tools,
it does make it easier to view and modify scripts.
When you are copying code from this book,
remember to add an empty line at the end!</p>
</div></blockquote>
<p>Once we have added this line,
we can save the file with <kbd>Ctrl</kbd>+<kbd>O</kbd>
and exit with <kbd>Ctrl</kbd>+<kbd>X</kbd>.
<code class="docutils literal notranslate"><span class="pre">ls</span></code> shows that our file now exists:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ls
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>book_summary.sh
</pre></div>
</div>
<p>We can check the contents of the file using <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">book_summary.sh</span></code>.
More importantly,
we can now ask the shell to run this file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Title: Moby Dick
       or The Whale
Author: Herman Melville
Editor:
Release Date: December 25, 2008 [EBook #2701]
Posting Date:
Last Updated: December 3, 2017
Language: English
</pre></div>
</div>
<p>Sure enough,
our script’s output is exactly the same text we would get if we ran the command directly.
If we want,
we can pipe the output of our shell script to another command to count how many lines it contains:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>     8
</pre></div>
</div>
<p>What if we want our script to print the name of the book’s author?
The command <code class="docutils literal notranslate"><span class="pre">grep</span></code> finds and prints lines that match a pattern.
We’ll learn more about <code class="docutils literal notranslate"><span class="pre">grep</span></code> in Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_advanced.html#finding-things-in-files">finding thins in files</a>,
but for now we can edit the script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>nano<span class="w"> </span>book_summary.sh
</pre></div>
</div>
<p>and add a search for the word “Author”:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>head -n 17 ../data/moby_dick.txt | tail -n 8 | grep Author
</pre></div>
</div>
<p>Sure enough,
when we run our modified script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh
</pre></div>
</div>
<p>we get the line we want:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Author: Herman Melville
</pre></div>
</div>
<p>And once again
we can pipe the output of our script into other commands
just as we would pipe the output from any other program.
Here,
we count the number of words in the author line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-w
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      3
</pre></div>
</div>
</section>
<section id="making-scripts-more-versatile">
<h2>Making Scripts More Versatile<a class="headerlink" href="#making-scripts-more-versatile" title="Link to this heading">#</a></h2>
<p>Getting the name of the author for only one of the books isn’t particularly useful.
What we really want is a way to get the name of the author from any of our files.
Let’s edit <code class="docutils literal notranslate"><span class="pre">book_summary.sh</span></code> again
and replace <code class="docutils literal notranslate"><span class="pre">../data/moby_dick.txt</span></code> with
a special variable <code class="docutils literal notranslate"><span class="pre">$1</span></code>.
Once our change is made, <code class="docutils literal notranslate"><span class="pre">book_summary.sh</span></code> should contain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>head -n 17 $1 | tail -n 8 | grep Author
</pre></div>
</div>
<p>Inside a shell script,
<code class="docutils literal notranslate"><span class="pre">$1</span></code> means “the first argument on the command line.”
If we now run our script like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span>../data/moby_dick.txt
</pre></div>
</div>
<p>then <code class="docutils literal notranslate"><span class="pre">$1</span></code> is assigned <code class="docutils literal notranslate"><span class="pre">../data/moby_dick.txt</span></code>
and we get exactly the same output as before.
If we give the script a different filename:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w">  </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span>../data/frankenstein.txt
</pre></div>
</div>
<p>we get the name of the author of that book instead:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Author: Mary Wollstonecraft (Godwin) Shelley
</pre></div>
</div>
<p>Our small script is now doing something useful,
but it may take the next person who reads it a moment to figureout exctly what. We can improve our script by adding a <strong>comment</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Get author information from a Project Gutenberg eBook.
# Usage: bash book_summary.sh /path/to/file.txt
head -n 17 $1 | tail -n 8 | grep Author
</pre></div>
</div>
<p>As in Python,
a comment starts with a <code class="docutils literal notranslate"><span class="pre">#</span></code> character and runs to the end of the line.
The computer ignores comments,
but they help people (including our future self) understand and use what we’ve created.</p>
<p>Let’s make one more change to our script.
Instead of always extracting the author name,
let’s have it select whatever information the user specified:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Get desired information from a Project Gutenberg eBook.
# Usage: bash book_summary.sh /path/to/file.txt what_to_look_for
head -n 17 $1 | tail -n 8 | grep $2
</pre></div>
</div>
<p>The change is very small: we have replaced the fixed string ‘Author’ with a reference to the special variable <code class="docutils literal notranslate"><span class="pre">$2</span></code>, which is assigned the value of the second command-line argument we give the script when we run it.</p>
<blockquote>
<div><p><strong>Update Your Comments</strong></p>
<p>As you update the code in your script,
don’t forget to update the comments that describe the code.
A description that sends readers in the wrong direction is worse than none at all,so do your best to avoid this common oversight.</p>
</div></blockquote>
<p>Let’s check that it works by asking for <em>Frankenstein</em>’s release date:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span>../data/frankenstein.txt<span class="w"> </span>Release
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Release Date: June 17, 2008 [EBook #84]
</pre></div>
</div>
</section>
<section id="turning-interactive-work-into-a-script">
<h2>Turning Interactive Work into a Script<a class="headerlink" href="#turning-interactive-work-into-a-script" title="Link to this heading">#</a></h2>
<p>Suppose we have just run a series of commands that did something useful,
such as summarizing all books in a given directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="k">for</span><span class="w"> </span>x<span class="w"> </span><span class="k">in</span><span class="w"> </span>../data/*.txt
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$x</span>
&gt;<span class="w">   </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span><span class="nv">$x</span><span class="w"> </span>Author
&gt;<span class="w"> </span><span class="k">done</span><span class="w"> </span>&gt;<span class="w"> </span>authors.txt
$<span class="w"> </span><span class="k">for</span><span class="w"> </span>x<span class="w"> </span><span class="k">in</span><span class="w"> </span>../data/*.txt
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$x</span>
&gt;<span class="w">   </span>bash<span class="w"> </span>book_summary.sh<span class="w"> </span><span class="nv">$x</span><span class="w"> </span>Release
&gt;<span class="w"> </span><span class="k">done</span><span class="w"> </span>&gt;<span class="w"> </span>releases.txt
$<span class="w"> </span>ls
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>authors.txt        book_summary.sh      releases.txt
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>../results
$<span class="w"> </span>mv<span class="w"> </span>authors.txt<span class="w"> </span>releases.txt<span class="w"> </span>../results
</pre></div>
</div>
<p>Instead of typing those commands into a file in an editor
(and potentially getting them wrong)
we can use <code class="docutils literal notranslate"><span class="pre">history</span></code> and redirection to save recent commands to a file.
For example,we can save the last six commands to <code class="docutils literal notranslate"><span class="pre">summarize_all_books.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">history</span><span class="w"> </span><span class="m">6</span><span class="w"> </span>&gt;<span class="w"> </span>summarize_all_books.sh
$<span class="w"> </span>cat<span class="w"> </span>summarize_all_books.sh
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>297 for x in ../data/*.txt; do echo $x;
  bash book_summary.sh $x Author; done &gt; authors.txt
298 for x in ../data/*.txt; do echo $x;
  bash book_summary.sh $x Release; done &gt; releases.txt
299 ls
300 mkdir ../results
301 mv authors.txt releases.txt ../results
302 history 6 &gt; summarize_all_books.sh
</pre></div>
</div>
<p>We can now open the file in an editor, remove the serial numbers at the start of each line, and delete the lines we don’t want to create a script that captures exactly what we actually did. This is how we usually develop shell scripts: run commands interactively a few times to make sure they are doing the right thing, then save our recent history to a file and turn that into a reusable script.</p>
</section>
<section id="finding-things-in-files">
<h2>Finding Things in Files<a class="headerlink" href="#finding-things-in-files" title="Link to this heading">#</a></h2>
<p>We can use <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> to select lines from a file by position,
but we also often want to select lines that contain certain values.
This is called <strong>filtering</strong>, and we usually do it in the shell with the command <code class="docutils literal notranslate"><span class="pre">grep</span></code> that we briefly met in Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_advanced.html#creating-new-commands">creating new commands</a>.
Its name is an acronym of “global regular expression print,”
which was a common sequence of operations in early Unix text editors.</p>
<p>To show how <code class="docutils literal notranslate"><span class="pre">grep</span></code> works,
we will use our sleuthing skills to explore <code class="docutils literal notranslate"><span class="pre">data/sherlock_holmes.txt</span></code>.
First,
let’s find lines that contain the word “Sherlock”.
Since there are likely to be hundreds of matches,
we will pipe <code class="docutils literal notranslate"><span class="pre">grep</span></code>’s output to <code class="docutils literal notranslate"><span class="pre">head</span></code> to show only the first few:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/zipf
$<span class="w"> </span>grep<span class="w"> </span>Sherlock<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">Sherlock</span></code> is our (very simple) pattern.
<code class="docutils literal notranslate"><span class="pre">grep</span></code> searches the file line by line
and shows those lines that contain matches,
so the output is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Project Gutenberg&#39;s The Adventures of Sherlock Holmes, by Arthur
Conan Doyle
Title: The Adventures of Sherlock Holmes
To Sherlock Holmes she is always THE woman. I have seldom heard
as I had pictured it from Sherlock Holmes&#39; succinct description,
&quot;Good-night, Mister Sherlock Holmes.&quot;
</pre></div>
</div>
<p>If we run <code class="docutils literal notranslate"><span class="pre">grep</span> <span class="pre">sherlock</span></code> instead, we get no output
because <code class="docutils literal notranslate"><span class="pre">grep</span></code> patterns are case-sensitive.
If we wanted to make the search case-insensitive,
we can add the option <code class="docutils literal notranslate"><span class="pre">-i</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>sherlock<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Project Gutenberg&#39;s The Adventures of Sherlock Holmes, by Arthur
Conan Doyle
Title: The Adventures of Sherlock Holmes
*** START OF THIS PROJECT GUTENBERG EBOOK THE ADVENTURES OF
SHERLOCK HOLMES ***
THE ADVENTURES OF SHERLOCK HOLMES
To Sherlock Holmes she is always THE woman. I have seldom heard
</pre></div>
</div>
<p>This output is different from our previous output
because of the lines containing “SHERLOCK” near the top of the file.</p>
<p>Next, let’s search for the pattern <code class="docutils literal notranslate"><span class="pre">on</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>on<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Project Gutenberg&#39;s The Adventures of Sherlock Holmes, by Arthur
Conan Doyle
This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away
or with this eBook or online at www.gutenberg.net
Author: Arthur Conan Doyle
</pre></div>
</div>
<p>In each of these lines,
our pattern (“on”) is part of a larger word such as “Conan”.
To restrict matching to lines containing <code class="docutils literal notranslate"><span class="pre">on</span></code> by itself,
we can give <code class="docutils literal notranslate"><span class="pre">grep</span></code> the <code class="docutils literal notranslate"><span class="pre">-w</span></code> option (for “match words”):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-w<span class="w"> </span>on<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>One night--it was on the twentieth of March, 1888--I was
put on seven and a half pounds since I saw you.&quot;
that I had a country walk on Thursday and came home in a dreadful
&quot;It is simplicity itself,&quot; said he; &quot;my eyes tell me that on the
on the right side of his top-hat to show where he has secreted
</pre></div>
</div>
<p>What if we want to search for a phrase rather than a single word?</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>grep: the: No such file or directory
data/sherlock_holmes.txt:Project Gutenberg&#39;s The Adventures of
  Sherlock Holmes, by Arthur Conan Doyle
data/sherlock_holmes.txt:This eBook is for the use of anyone
  anywhere at no cost and with
data/sherlock_holmes.txt:almost no restrictions whatsoever.
  You may copy it, give it away or
data/sherlock_holmes.txt:with this eBook or online at
  www.gutenberg.net
data/sherlock_holmes.txt:Author: Arthur Conan Doyle
</pre></div>
</div>
<p>In this case,
<code class="docutils literal notranslate"><span class="pre">grep</span></code> uses <code class="docutils literal notranslate"><span class="pre">on</span></code> as the pattern
and tries to find it in files called <code class="docutils literal notranslate"><span class="pre">the</span></code> and <code class="docutils literal notranslate"><span class="pre">data/sherlock_holmes.txt</span></code>.
It then tells us that the file <code class="docutils literal notranslate"><span class="pre">the</span></code> cannot be found,
but prints <code class="docutils literal notranslate"><span class="pre">data/sherlock_holmes.txt</span></code> as a prefix to each other line of output
to tell us which file those lines came from.
If we want to give <code class="docutils literal notranslate"><span class="pre">grep</span></code> both words as a single argument,
we must wrap them in quotation marks as before:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;on the&quot;</span><span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>One night--it was on the twentieth of March, 1888--I was
drug-created dreams and was hot upon the scent of some new
&quot;It is simplicity itself,&quot; said he; &quot;my eyes tell me that on the
on the right side of his top-hat to show where he has secreted
pink-tinted note-paper which had been lying open upon the table.
</pre></div>
</div>
<blockquote>
<div><p><strong>Quoting</strong></p>
<p>Quotation marks aren’t specific to <code class="docutils literal notranslate"><span class="pre">grep</span></code>:
the shell interprets them before running commands,
just as it expands wildcards to create filenames
no matter what command those filenames are being passed to.
This allows us to do things like <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">-n</span> <span class="pre">5</span> <span class="pre">&quot;My</span> <span class="pre">Thesis.txt&quot;</span></code>
to get lines from a file that has a space in its name.
It is also why many programmers write <code class="docutils literal notranslate"><span class="pre">&quot;$variable&quot;</span></code> instead of just <code class="docutils literal notranslate"><span class="pre">$variable</span></code>
when creating loops or shell scripts:
if there’s any chance at all that the variable’s value will contain spaces,
it’s safest to put it in quotes.</p>
</div></blockquote>
<p>One of the most useful options for <code class="docutils literal notranslate"><span class="pre">grep</span></code> is <code class="docutils literal notranslate"><span class="pre">-n</span></code>,
which numbers the lines that match the search:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;on the&quot;</span><span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>105:One night--it was on the twentieth of March, 1888--I was
118:drug-created dreams and was hot upon the scent of some new
155:&quot;It is simplicity itself,&quot; said he; &quot;my eyes tell me ...
165:on the right side of his top-hat to show where he has ...
198:pink-tinted note-paper which had been lying open upon ...
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">grep</span></code> has many options—so many,
in fact,
that almost every letter of the alphabet means something to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>man<span class="w"> </span>grep
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>GREP(1)           BSD General Commands Manual         GREP(1)

NAME
     grep, egrep, fgrep, zgrep, zegrep, zfgrep -- file pattern
      searcher

SYNOPSIS
     grep [-abcdDEFGHhIiJLlmnOopqRSsUVvwxZ] [-A num] [-B num]
          [-C[num]] [-e pattern] [-f file] [--binary-files=value]
          [--color[=when]] [--colour[=when]] [--context[=num]]
          [--label] [--line-buffered]
          [--null] [pattern] [file ...]
...more...
</pre></div>
</div>
<p>We can combine options to <code class="docutils literal notranslate"><span class="pre">grep</span></code> as we do with other Unix commands.
For example,
we can combine two options we’ve covered previously with <code class="docutils literal notranslate"><span class="pre">-v</span></code>
to invert the match—i.e.,
to print lines that <em>don’t</em> match the pattern:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>-n<span class="w"> </span>-v<span class="w"> </span>the<span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2:
4:almost no restrictions whatsoever. You may copy it, give ...
6:with this eBook or online at www.gutenberg.net
7:
8:
</pre></div>
</div>
<p>As we learned in Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_basics.html#moving-around">moving around</a>,
we can write this command as <code class="docutils literal notranslate"><span class="pre">grep</span> <span class="pre">-inv</span></code>,
but probably shouldn’t for the sake of readability.</p>
<p>If we want to search several files at once, all we have to do is give <code class="docutils literal notranslate"><span class="pre">grep</span></code> all of their names. The easiest way to do this is usually to use wildcards.
For example, this command counts how many lines contain “pain” in all of our books:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-w<span class="w"> </span>pain<span class="w"> </span>data/*.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>     122
</pre></div>
</div>
<p>Alternatively, the <code class="docutils literal notranslate"><span class="pre">-r</span></code> option (for “recursive”) tells <code class="docutils literal notranslate"><span class="pre">grep</span></code> to search all of the files in or below a directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-w<span class="w"> </span>-r<span class="w"> </span>pain<span class="w"> </span>data<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>     122
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">grep</span></code> becomes even more powerful
when we start using <strong>regular expressions</strong> which are sets of letters, numbers, and symbols that define complex patterns. For example, this command finds lines that start with the letter ‘T’:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;^T&quot;</span><span class="w"> </span>data/sherlock_holmes.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This eBook is for the use of anyone anywhere at no cost and with
Title: The Adventures of Sherlock Holmes
THE ADVENTURES OF SHERLOCK HOLMES
To Sherlock Holmes she is always THE woman. I have seldom heard
The distinction is clear. For example, you have frequently seen
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-E</span></code> option tells <code class="docutils literal notranslate"><span class="pre">grep</span></code> to interpret the pattern as a regular expression,
rather than searching for an actual circumflex followed by an upper-case ‘T’.
The quotation marks prevent the shell from treating special characters in the pattern as wildcards, and the <code class="docutils literal notranslate"><span class="pre">^</span></code> means that a line only matches
if it begins with the search term—in this case, <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<p>Many tools support regular expressions:
we can use them in programming languages, database queries, online search engines, and most text editors (though not Nano—its creators wanted to keep it as small as possible).
A detailed guide of regular expressions is outside the scope of this book,
but a wide range of tutorials are available online,
and <span id="id1">[<a class="reference internal" href="references.html#id41" title="Jan Goyvaerts and Steven Levithan. Regular Expressions Cookbook. O'Reilly Media, 2nd edition, 2012. ISBN 978-1449327453. An exhaustive collection of useful regular expressions in several programming languages.">Goyvaerts and Levithan, 2012</a>]</span> is a useful companion if you need to go further.</p>
</section>
<section id="finding-files">
<h2>Finding Files<a class="headerlink" href="#finding-files" title="Link to this heading">#</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">grep</span></code> finds things in files,
the <code class="docutils literal notranslate"><span class="pre">find</span></code> command finds files themselves.
It also has a lot of options, but unlike most Unix commands they are written as full words rather than single-letter abbreviations.
To show how it works, we will use the entire contents of our <code class="docutils literal notranslate"><span class="pre">zipf</span></code> directory,
including files we created earlier in this chapter:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>zipf/
├── bin
│   ├── book_summary.sh
│   ├── summarize_all_books.sh
├── data
│   ├── dracula.txt
│   ├── frankenstein.txt
│   ├── jane_eyre.txt
│   ├── moby_dick.txt
│   ├── sense_and_sensibility.txt
│   ├── sherlock_holmes.txt
│   └── time_machine.txt
└── results
    ├── authors.txt
    └── releases.txt
</pre></div>
</div>
<p>For our first command,
let’s run <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">.</span></code> to find and list everything in this directory.
As always,
<code class="docutils literal notranslate"><span class="pre">.</span></code> on its own means the current working directory,
which is where we want our search to start.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/zipf
$<span class="w"> </span>find<span class="w"> </span>.
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
./bin
./bin/summarize_all_books.sh
./bin/book_summary.sh
./results
./results/releases.txt
./results/authors.txt
./data
./data/moby_dick.txt
./data/sense_and_sensibility.txt
./data/sherlock_holmes.txt
./data/time_machine.txt
./data/frankenstein.txt
./data/dracula.txt
./data/jane_eyre.txt
</pre></div>
</div>
<p>If we only want to find directories,
we can tell <code class="docutils literal notranslate"><span class="pre">find</span></code> to show us things of type <code class="docutils literal notranslate"><span class="pre">d</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
./bin
./results
./data
</pre></div>
</div>
<p>If we change <code class="docutils literal notranslate"><span class="pre">-type</span> <span class="pre">d</span></code> to <code class="docutils literal notranslate"><span class="pre">-type</span> <span class="pre">f</span></code>
we get a listing of all the files instead:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>./bin/summarize_all_books.sh
./bin/book_summary.sh
./results/releases.txt
./results/authors.txt
./data/moby_dick.txt
./data/sense_and_sensibility.txt
./data/sherlock_holmes.txt
./data/time_machine.txt
./data/frankenstein.txt
./data/dracula.txt
./data/jane_eyre.txt
</pre></div>
</div>
<p>Now let’s try matching by name:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>./results/releases.txt
./results/authors.txt
./data/moby_dick.txt
./data/sense_and_sensibility.txt
./data/sherlock_holmes.txt
./data/time_machine.txt
./data/frankenstein.txt
./data/dracula.txt
./data/jane_eyre.txt
</pre></div>
</div>
<p>Notice the quotes around <code class="docutils literal notranslate"><span class="pre">&quot;*.txt&quot;</span></code>.
If we omit them and type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span>*.txt
</pre></div>
</div>
<p>then the shell tries to expand the <code class="docutils literal notranslate"><span class="pre">*</span></code> wildcard in <code class="docutils literal notranslate"><span class="pre">*.txt</span></code>
<em>before</em> running <code class="docutils literal notranslate"><span class="pre">find</span></code>.
Since there aren’t any text files in the current directory,
the expanded list is empty,
so the shell tries to run the equivalent of</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name
</pre></div>
</div>
<p>and gives us the error message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>find: -name: requires additional arguments
</pre></div>
</div>
<p>We have seen before how to combine commands using pipes.
Let’s use another technique to see how large our books are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>wc<span class="w"> </span>-l<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="k">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>14 ./results/releases.txt
14 ./results/authors.txt
22331 ./data/moby_dick.txt
13028 ./data/sense_and_sensibility.txt
13053 ./data/sherlock_holmes.txt
3582 ./data/time_machine.txt
7832 ./data/frankenstein.txt
15975 ./data/dracula.txt
21054 ./data/jane_eyre.txt
96883 total
</pre></div>
</div>
<p>When the shell executes our command,
it runs whatever is inside <code class="docutils literal notranslate"><span class="pre">$(...)</span></code> and then replaces <code class="docutils literal notranslate"><span class="pre">$(...)</span></code> with that command’s output. Since the output of <code class="docutils literal notranslate"><span class="pre">find</span></code> is the paths to our text files,
the shell constructs the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>wc<span class="w"> </span>-l<span class="w"> </span>./results/releases.txt<span class="w"> </span>...<span class="w"> </span>./data/jane_eyre.txt
</pre></div>
</div>
<p>(We are using <code class="docutils literal notranslate"><span class="pre">...</span></code> in place of seven files’ names in order to fit things neatly on the printed page.)
This results in the output as seen above.
It is exactly like expanding the wildcard in <code class="docutils literal notranslate"><span class="pre">*.txt</span></code>,
but more flexible.</p>
<p>We will often use <code class="docutils literal notranslate"><span class="pre">find</span></code> and <code class="docutils literal notranslate"><span class="pre">grep</span></code> together.
The first command finds files whose names match a pattern,
while the second looks for lines inside those files that match another pattern.
For example,
we can look for <code class="docutils literal notranslate"><span class="pre">Authors</span></code> in all our text files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Author:&quot;</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="k">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>./results/authors.txt:Author: Bram Stoker
./results/authors.txt:Author: Mary Wollstonecraft (Godwin)
Shelley
./results/authors.txt:Author: Charlotte Bronte
./results/authors.txt:Author: Herman Melville
./results/authors.txt:Author: Jane Austen
./results/authors.txt:Author: Arthur Conan Doyle
./results/authors.txt:Author: H. G. Wells
./data/moby_dick.txt:Author: Herman Melville
./data/sense_and_sensibility.txt:Author: Jane Austen
./data/sherlock_holmes.txt:Author: Arthur Conan Doyle
./data/time_machine.txt:Author: H. G. Wells
./data/frankenstein.txt:Author: Mary Wollstonecraft (Godwin)
Shelley
./data/dracula.txt:Author: Bram Stoker
./data/jane_eyre.txt:Author: Charlotte Bronte
</pre></div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">$(...)</span></code> expansion to create a list of filenames to use in a loop:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="k">)</span>
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w"> </span>cp<span class="w"> </span><span class="nv">$file</span><span class="w"> </span><span class="nv">$file</span>.bak
&gt;<span class="w"> </span><span class="k">done</span>
$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.bak&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>./results/releases.txt.bak
./results/authors.txt.bak
./data/frankenstein.txt.bak
./data/sense_and_sensibility.txt.bak
./data/dracula.txt.bak
./data/time_machine.txt.bak
./data/moby_dick.txt.bak
./data/jane_eyre.txt.bak
./data/sherlock_holmes.txt.bak
</pre></div>
</div>
</section>
<section id="configuring-the-shell">
<h2>Configuring the Shell<a class="headerlink" href="#configuring-the-shell" title="Link to this heading">#</a></h2>
<p>As Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_tools.html#repeating-commands-on-many-files">repeating commands on many files</a> explained,
the shell is a program, and it has variables like any other program.
Some of those variables control the shell’s operations;
by changing their values we can change how the shell and other programs behave.</p>
<p>Let’s run the command <code class="docutils literal notranslate"><span class="pre">set</span></code>and look at some of the variables the shell defines:</p>
<p><strong>DEPENDING ON THE SYSTEM YOU RUN OR WHETHER OR NOT YOU USE ANACONDA THE FOLLOWING WILL LOOK DIFFERENT</strong>
<strong>EXAMPLES BASED ON WINDOWS AND USING ANACONDA</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">set</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COMPUTERNAME=TURING
HOME=/Users/amira
HOMEDRIVE=C:
HOSTNAME=TURING
HOSTTYPE=i686
NUMBER_OF_PROCESSORS=4
OS=Windows_NT
PATH=/Users/amira/anaconda3/bin:/usr/bin:
  /bin:/usr/sbin:/sbin:/usr/local/bin
PWD=/Users/amira
UID=1000
USERNAME=amira
...
</pre></div>
</div>
<p>There are many more than are shown here—roughly a hundred
in our current shell session.
And yes,
using <code class="docutils literal notranslate"><span class="pre">set</span></code> to <em>show</em> things might seem a little strange,
even for Unix,
but if we don’t give it any arguments,
the command might as well show us things we <em>could</em> set.</p>
<p>By convention,
<strong>shell variables</strong> that are always present have upper-case names.
All shell variables’ values are strings,
even those (such as <code class="docutils literal notranslate"><span class="pre">UID</span></code>) that look like numbers.
It’s up to programs to convert these strings to other types when necessary.
For example,
if a program wanted to find out how many processors the computer had,
it would convert the value of <code class="docutils literal notranslate"><span class="pre">NUMBER_OF_PROCESSORS</span></code> from a string to an integer.</p>
<p>Similarly, some variables (like <code class="docutils literal notranslate"><span class="pre">PATH</span></code>) store lists of values. In this case, the convention is to use a colon ‘:’ as a separator.
If a program wants the individual elements of such a list, it must split the variable’s value into pieces.</p>
<p>Let’s have a closer look at <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.
Its value defines the shell’s <strong>search path</strong>,
which is the list of directories that the shell looks in for programs
when we type in a command name without specifying exactly where it is.
For example,
when we type a command like <code class="docutils literal notranslate"><span class="pre">analyze</span></code>,
the shell needs to decide whether to run <code class="docutils literal notranslate"><span class="pre">./analyze</span></code> (in our current directory)
or <code class="docutils literal notranslate"><span class="pre">/bin/analyze</span></code> (in a system directory).
To do this,
the shell checks each directory in the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable in turn.
As soon as it finds a program with the right name,
it stops searching and runs what it has found.</p>
<p>To show how this works,
here are the components of <code class="docutils literal notranslate"><span class="pre">PATH</span></code> listed one per line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/Users/amira/anaconda3/bin
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
</pre></div>
</div>
<p>Suppose that our computer has three programs called <code class="docutils literal notranslate"><span class="pre">analyze</span></code>:
<code class="docutils literal notranslate"><span class="pre">/bin/analyze</span></code>,
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin/analyze</span></code>,
and <code class="docutils literal notranslate"><span class="pre">/Users/amira/analyze</span></code>.
Since the shell searches the directories in the order in which they’re listed in <code class="docutils literal notranslate"><span class="pre">PATH</span></code>,
it finds <code class="docutils literal notranslate"><span class="pre">/bin/analyze</span></code> first and runs that.
Since <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code> is not in our path,
Bash will <em>never</em> find the program <code class="docutils literal notranslate"><span class="pre">/Users/amira/analyze</span></code>
unless we type the path in explicitly
(for example,
as <code class="docutils literal notranslate"><span class="pre">./analyze</span></code> if we are in <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code>).</p>
<p>If we want to see a variable’s value, we can print it using the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command
introduced at the end of Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_tools.html#redoing-things">redoing things</a>.
Let’s look at the value of the variable <code class="docutils literal notranslate"><span class="pre">HOME</span></code>, which keeps track of our home directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>HOME
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HOME
</pre></div>
</div>
<p>Whoops: this just prints “HOME”, which isn’t what we wanted.
Instead,
we need to run this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$HOME</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/amira
</pre></div>
</div>
<p>As with loop variables (Section <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_tools.html#redoing-things">redoing thins</a>,
the dollar sign before the variable names tells the shell
that we want the variable’s value.
This works just like wildcard expansion—the shell replaces
the variable’s name with its value <em>before</em> running the command we’ve asked for.
Thus,
<code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$HOME</span></code> becomes <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">/Users/amira</span></code>,
which displays the right thing.</p>
<p>Creating a variable is easy: we assign a value to a name using “=”,
putting quotes around the value if it contains spaces or special characters:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">DEPARTMENT</span><span class="o">=</span><span class="s2">&quot;Library Science&quot;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$DEPARTMENT</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Library Science
</pre></div>
</div>
<p>To change the value, we simply assign a new one:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">DEPARTMENT</span><span class="o">=</span><span class="s2">&quot;Information Science&quot;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$DEPARTMENT</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Information Science
</pre></div>
</div>
<p>If we want to set some variables automatically every time we run a shell,
we can put commands to do this in a file called <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> in our home directory.
For example, here are two lines in <code class="docutils literal notranslate"><span class="pre">/Users/amira/.bashrc</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export DEPARTMENT=&quot;Library Science&quot;
export TEMP_DIR=/tmp
export BACKUP_DIR=$TEMP_DIR/backup
</pre></div>
</div>
<p>These three lines create the variables <code class="docutils literal notranslate"><span class="pre">DEPARTMENT</span></code>,
<code class="docutils literal notranslate"><span class="pre">TEMP_DIR</span></code>, and <code class="docutils literal notranslate"><span class="pre">BACKUP_DIR</span></code>, and <strong>export</strong> them so that any programs the shell runs can see them as well.
Notice that <code class="docutils literal notranslate"><span class="pre">BACKUP_DIR</span></code>’s definition relies on the value of <code class="docutils literal notranslate"><span class="pre">TEMP_DIR</span></code>,
so that if we change where we put temporary files, our backups will be relocated automatically.</p>
<p>However, this will only happen once we restart the shell,
because <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> is only executed when the shell starts up.</p>
<blockquote>
<div><p><strong>What’s in a Name?</strong></p>
<p>The ‘.’ character at the front of the name <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>
prevents <code class="docutils literal notranslate"><span class="pre">ls</span></code> from listing this file
unless we specifically ask it to using <code class="docutils literal notranslate"><span class="pre">-a</span></code>.
The “rc” at the end is an abbreviation for “run commands”,
which meant something really important decades ago,
and is now just a convention everyone follows without understanding why.</p>
</div></blockquote>
<p>While we’re here,
it’s also common to use the <code class="docutils literal notranslate"><span class="pre">alias</span></code> command to create shortcuts for things we frequently type. For example, we can define the alias <code class="docutils literal notranslate"><span class="pre">backup</span></code>
to run <code class="docutils literal notranslate"><span class="pre">/bin/zback</span></code> with a specific set of arguments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span><span class="w"> </span><span class="nv">backup</span><span class="o">=</span>/bin/zback<span class="w"> </span>-v<span class="w"> </span>--nostir<span class="w"> </span>-R<span class="w"> </span><span class="m">20000</span><span class="w"> </span><span class="nv">$HOME</span><span class="w"> </span><span class="nv">$BACKUP_DIR</span>
</pre></div>
</div>
<p>Aliases can save us a lot of typing, and hence a lot of typing mistakes.
The name of an alias can be the same as an existing command,
so we can use them to change the behavior of a familiar command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long list format including hidden files</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls -la&#39;</span>

<span class="c1"># Print the file paths that were copied/moved</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">mv</span><span class="o">=</span><span class="s1">&#39;mv -v&#39;</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">cp</span><span class="o">=</span><span class="s1">&#39;cp -v&#39;</span>

<span class="c1"># Request confirmation to remove a file and</span>
<span class="c1"># print the file path that is removed</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">rm</span><span class="o">=</span><span class="s1">&#39;rm -iv&#39;</span>
</pre></div>
</div>
<p>We can find interesting suggestions for other aliases
by searching online for “sample bashrc”.</p>
<p>While searching for additional aliases, you’re likely to encounter references to other common shell features to customize, such as the color of your shell’s background and text.</p>
<p>As mentioned in Chapter <a class="reference external" href="https://se-up.github.io/RSE-UP/chapters/bash_basics.html">bash basics</a>, another important feature to consider customizing is your shell prompt.
In addition to a standard symbol (like <code class="docutils literal notranslate"><span class="pre">$</span></code>), your computer may include other information as well, such as the working directory, username, and/or date/time.
If your shell does not include that information and you would like to see it,
or if your current prompt is too long and you’d like to shorten it,
you can include a line in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file that defines <code class="docutils literal notranslate"><span class="pre">$PS1</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;\u \w </span>$<span class="s2"> &quot;</span>
</pre></div>
</div>
<p>This changes the prompt to include your username and current working directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amira<span class="w"> </span>~/Desktop<span class="w"> </span>$
</pre></div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>As powerful as the Unix shell is, it does have its shortcomings: dollar signs, quotes, and other punctuation can make a complex shell script look as though
it was created by a cat dancing on a keyboard.
However, it is the glue that holds data science together:
shell scripts are used to create pipelines from miscellaneous sets of programs,
while shell variables are used to do everything from
specifying package installation directories to managing database login credentials.
And while <code class="docutils literal notranslate"><span class="pre">grep</span></code> and <code class="docutils literal notranslate"><span class="pre">find</span></code> may take some getting used to,
they and their cousins can handle enormous datasets very efficiently.
If you would like to go further,
<span id="id2">[<a class="reference internal" href="references.html#id69" title="Eric J. Ray and Deborah S. Ray. Unix and Linux: Visual QuickStart Guide. Peachpit Press, 2014. ISBN 978-0321997548. An excellent general introduction to all things Unix.">Ray and Ray, 2014</a>]</span> is an excellent general introduction,
while <span id="id3">[<a class="reference internal" href="references.html#id46" title="Jeroen Janssens. Data Science at the Command Line. O'Reilly Media, 2014. ISBN 978-1491947852. How to process data using the Unix shell.">Janssens, 2014</a>]</span> looks specifically at how to process data on the command line.</p>
</section>
<section id="key-points">
<h2>Key Points<a class="headerlink" href="#key-points" title="Link to this heading">#</a></h2>
<div class="highlight-{include notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../exercises/bash_tools.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Bash Tool Exercises</p>
      </div>
    </a>
    <a class="right-next"
       href="../exercises/bash_advanced.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bash Advanced Exercises</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-commands">Creating New Commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-scripts-more-versatile">Making Scripts More Versatile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#turning-interactive-work-into-a-script">Turning Interactive Work into a Script</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-things-in-files">Finding Things in Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-files">Finding Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-shell">Configuring the Shell</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-points">Key Points</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Software Engineering Group - University of Potsdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>