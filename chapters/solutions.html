
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Solutions &#8212; RSE-UP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css?v=c89437f7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/solutions';</script>
    <link rel="canonical" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/solutions.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working Remotely" href="working_remotely.html" />
    <link rel="prev" title="Exercises - Provenance" href="../exercises/provenance.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">RSE-UP</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python, Bash and Git Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_refresher.html">Python Refresher</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/bash.html">Introduction to Bash</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="bash_basics.html">The Basics of the Unix Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_basics.html">Bash Basics Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_tools.html">Building Tools with the Unix Shell</a></li>

<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_tools.html">Bash Tool Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_advanced.html">Bash Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_advanced.html">Bash Advanced Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/vcs.html">Version Control</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_version_control.html">Using Git at the Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/version_control.html">Exercise Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_ssh-key.html">Using SSH on Gitlab and Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit_messages.html">Writing good commit messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_advanced.html">Going Further with Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_advanced_github.html">Forking on Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/git_advanced.html">Exercises Git Advanced</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Writing Clean Code</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clean_readable_code.html">Writing Readable Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/clean_code.html">Exercises - Clean Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_documentation.html">Documenting Programs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/documentation.html">Introduction to writing Documentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Narrative</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/jupyter.html">Introduction to Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="anaconda.html">Working with Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp_narative.html">Story Telling with Data Computational Narrative</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Licenses, Software Citation and FAIR</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses, Software Citation and FAIR</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working in teams</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_in_teams.html">Working in Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/work_teams.html">Exercise - Work Teams</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Requirements, Architecture and Design</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/requirements_architecture_design.html">Application Classes, Software Requirements, Architecture and Design</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="application_classes.html">Application Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Software Development Process and Requirements Engineering in RSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture_design.html">Architecture and Design</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing, Error Handling and CLI Apps using Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/python_cli.html">Introduction to CLI application using Python</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="python_cli.html">Building Command-Line Tools with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/python_cli.html">Exercises - Scripting Python for CLI tools</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/testing.html">Introduction to Testing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="testing_programs.html">Testing Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/testing.html">Exercises - Testing</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/error_handling.html">Introduction to Error Handling</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="error_handling.html">Handling Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/error_handling.html">Exercises - Error Handling</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration and Packaging</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/config.html">Introduction to Configuration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuring Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html">YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/config.html">Exercises - Configuration</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/packaging.html">Introduction to Packaging Python Software</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="python_packaging.html">Creating Packages with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/packaging.html">Exercises - Packaging</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows and Automation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/workflows.html">Introduction to Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction/automation.html">Introduction to Make and Snakemake</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_make.html">Automating Analyses with Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/intro_make.html">Exercises - Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_snakemake.html">Introduction to Snakemake</a></li>
<li class="toctree-l1"><a class="reference internal" href="snakemake_continued.html">Snakemake Continued</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/snakemake.html">Snakemake Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction/cicd.html">Introduction to CI/CD</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tracking Provenance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tracking_provenance.html">Tracking Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/provenance.html">Exercises - Provenance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_remotely.html">Working Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Project Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP/issues/new?title=Issue%20on%20page%20%2Fchapters/solutions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/solutions.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Solutions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-basics">Chapter Bash Basics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-8">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-9">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-10">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-11">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-12">Exercise 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-13">Exercise 13</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-14">Exercise 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-15">Exercise 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-16">Exercise 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-17">Exercise 17</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-tools">Chapter Bash-Tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Exercise 12</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-advanced">Chapter Bash Advanced</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Exercise 10</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-python-cli">Chapter Python CLI</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Exercise 3</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-introduction-to-version-control">Chapter Introduction to Version Control</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">Exercise 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">Exercise 13</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">Exercise 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">Exercise 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">Exercise 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">Exercise 17</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-18">Exercise 18</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-git-advanced">Chapter Git Advanced</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">Exercise 6</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-working-in-teams">Chapter Working in Teams</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">Exercise 9</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-configuration">Chapter Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">Exercise 5</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-testing">Chapter Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">Exercise 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-error-handling">Chapter Error Handling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">Exercise 6</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-tracking-provenance">Chapter Tracking Provenance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">Exercise 7</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-packaging">Chapter Packaging</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">Exercise 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#snakemake-exercise-solutions">Snakemake Exercise Solutions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#write-two-new-rules">1. Write two New Rules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-dependencies">2. Update Dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rewrite-dat-rules-to-use-wildcards">3. Rewrite .dat rules to use wildcards</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-one-input-file">4. Updating One Input File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-zipf-test-rule">5. Updating Zipf_test rule</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-it-all-together">6. Putting it all Together</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-the-dat-files">7. Moving the <code class="docutils literal notranslate"><span class="pre">dat</span></code> files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-pngs">8. Creating PNGs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-plots">9. Generating Plots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-an-archive">10. Creating an Archive</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-happens-if-snakemake-does-not-have-enough-resources">12. What happens if Snakemake does not have enough resources?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-all-other-duplicated-strings-with-global-variables">13. Replace all other duplicated strings with global variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-global-variables-and-wildcards-in-formatted-strings">14 Combining global variables and wildcards in formatted strings</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="solutions">
<h1>Solutions<a class="headerlink" href="#solutions" title="Link to this heading">#</a></h1>
<p>The exercises included in this book represent a wide variety of problems, from multiple choice questions to larger coding tasks.</p>
<p>It’s relatively straightforward to indicate a correct answer for the former, though there may be unanticipated cases in which the specific software version</p>
<p>you’re using leads to alternative answers being preferable.
It’s even more difficult to identify the “right” answer for the latter,
since there are often many ways to accomplish the same task with code.</p>
<p>Here we present possible solutions that the authors generally agree represent “good” code, but we encourage you to explore additional approaches.</p>
<p>Commits noted in a solution reference <strong>TODO</strong> Amira’s <code class="docutils literal notranslate"><span class="pre">zipf</span></code> repository on GitHub, which allow you to see the specific lines of a file modified to arrive at the answer.</p>
<section id="chapter-bash-basics">
<h2>Chapter Bash Basics<a class="headerlink" href="#chapter-bash-basics" title="Link to this heading">#</a></h2>
<section id="exercise-1">
<h3>Exercise 1<a class="headerlink" href="#exercise-1" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">-l</span></code> option makes <code class="docutils literal notranslate"><span class="pre">ls</span></code> use a <strong>l</strong>ong listing format, showing not only
the file/directory names but also additional information such as the file size
and the time of its last modification. If you use both the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option and the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option,
this makes the file size “<strong>h</strong>uman readable”, i.e., displaying something like <code class="docutils literal notranslate"><span class="pre">5.3K</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">5369</span></code>.</p>
</section>
<section id="exercise-2">
<h3>Exercise 2<a class="headerlink" href="#exercise-2" title="Link to this heading">#</a></h3>
<p>The command <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-R</span> <span class="pre">-t</span></code> results in the contents of
each directory sorted by time of last change.</p>
</section>
<section id="exercise-3">
<h3>Exercise 3<a class="headerlink" href="#exercise-3" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: <code class="docutils literal notranslate"><span class="pre">.</span></code> stands for the current directory.</p></li>
<li><p>No: <code class="docutils literal notranslate"><span class="pre">/</span></code> stands for the root directory.</p></li>
<li><p>No: Amira’s home directory is <code class="docutils literal notranslate"><span class="pre">/Users/Amira</span></code>.</p></li>
<li><p>No: This goes up two levels, i.e., ends in <code class="docutils literal notranslate"><span class="pre">/Users</span></code>.</p></li>
<li><p>Yes: <code class="docutils literal notranslate"><span class="pre">~</span></code> stands for the user’s home directory, in this case <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code>.</p></li>
<li><p>No: This would navigate into a directory <code class="docutils literal notranslate"><span class="pre">home</span></code> in the current directory if it exists.</p></li>
<li><p>Yes: Starting from the home directory <code class="docutils literal notranslate"><span class="pre">~</span></code>, this command goes into <code class="docutils literal notranslate"><span class="pre">data</span></code> then back (using <code class="docutils literal notranslate"><span class="pre">..</span></code>) to the home directory.</p></li>
<li><p>Yes: Shortcut to go back to the user’s home directory.</p></li>
<li><p>Yes: Goes up one level.</p></li>
<li><p>Yes: Same as the previous answer, but with an unnecessary <code class="docutils literal notranslate"><span class="pre">.</span></code> (indicating the current directory).</p></li>
</ol>
</section>
<section id="exercise-4">
<h3>Exercise 4<a class="headerlink" href="#exercise-4" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: There <em>is</em> a directory <code class="docutils literal notranslate"><span class="pre">backup</span></code> in <code class="docutils literal notranslate"><span class="pre">/Users</span></code>.</p></li>
<li><p>No: This is the content of <code class="docutils literal notranslate"><span class="pre">Users/sami/backup</span></code>,
but with <code class="docutils literal notranslate"><span class="pre">..</span></code> we asked for one level further up.</p></li>
<li><p>No: Same as previous explanation, but results shown as directories
(which is what the <code class="docutils literal notranslate"><span class="pre">-F</span></code> option specifies).</p></li>
<li><p>Yes: <code class="docutils literal notranslate"><span class="pre">../backup/</span></code> refers to <code class="docutils literal notranslate"><span class="pre">/Users/backup/</span></code>.</p></li>
</ol>
</section>
<section id="exercise-5">
<h3>Exercise 5<a class="headerlink" href="#exercise-5" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: <code class="docutils literal notranslate"><span class="pre">pwd</span></code> is not the name of a directory.</p></li>
<li><p>Yes: <code class="docutils literal notranslate"><span class="pre">ls</span></code> without directory argument lists files and directories
in the current directory.</p></li>
<li><p>Yes: Uses the absolute path explicitly.</p></li>
</ol>
</section>
<section id="exercise-6">
<h3>Exercise 6<a class="headerlink" href="#exercise-6" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">touch</span></code> command updates a file’s timestamp.
If no file exists with the given name, <code class="docutils literal notranslate"><span class="pre">touch</span></code> will create one.
Assuming you don’t already have <code class="docutils literal notranslate"><span class="pre">my_file.txt</span></code> in your working directory,
<code class="docutils literal notranslate"><span class="pre">touch</span> <span class="pre">my_file.txt</span></code> will create the file.
When you inspect the file with <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code>, note that the size of
<code class="docutils literal notranslate"><span class="pre">my_file.txt</span></code> is 0 bytes.  In other words, it contains no data.
If you open <code class="docutils literal notranslate"><span class="pre">my_file.txt</span></code> using your text editor, it is blank.</p>
<p>Some programs do not generate output files themselves, but
instead require that empty files have already been generated.
When the program is run, it searches for an existing file to
populate with its output.  The touch command allows you to
efficiently generate a blank text file to be used by such
programs.</p>
</section>
<section id="exercise-7">
<h3>Exercise 7<a class="headerlink" href="#exercise-7" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>remove<span class="w"> </span>my_file.txt?<span class="w"> </span>y
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-i</span></code> option will prompt before (every) removal
(use <kbd>y</kbd> to confirm deletion or <kbd>n</kbd> to keep the file).
The Unix shell doesn’t have a trash bin, so all the files removed will disappear forever.
By using the <code class="docutils literal notranslate"><span class="pre">-i</span></code> option, we have the chance to check that we are deleting
only the files that we want to remove.</p>
</section>
<section id="exercise-8">
<h3>Exercise 8<a class="headerlink" href="#exercise-8" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mv<span class="w"> </span>../data/chapter1.txt<span class="w"> </span>../data/chapter2.txt<span class="w"> </span>.
</pre></div>
</div>
<p>Recall that <code class="docutils literal notranslate"><span class="pre">..</span></code> refers to the parent directory (i.e., one above the current directory)
and that <code class="docutils literal notranslate"><span class="pre">.</span></code> refers to the current directory.</p>
</section>
<section id="exercise-9">
<h3>Exercise 9<a class="headerlink" href="#exercise-9" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: While this would create a file with the correct name,
the incorrectly named file still exists in the directory and would need to be deleted.</p></li>
<li><p>Yes: This would work to rename the file.</p></li>
<li><p>No: The period (<code class="docutils literal notranslate"><span class="pre">.</span></code>) indicates where to move the file, but does not provide a new filename;
identical filenames cannot be created.</p></li>
<li><p>No: The period (<code class="docutils literal notranslate"><span class="pre">.</span></code>) indicates where to copy the file, but does not provide a new filename;
identical filenames cannot be created.</p></li>
</ol>
</section>
<section id="exercise-10">
<h3>Exercise 10<a class="headerlink" href="#exercise-10" title="Link to this heading">#</a></h3>
<p>We start in the <code class="docutils literal notranslate"><span class="pre">/Users/amira/data</span></code> directory,
containing a single file, <code class="docutils literal notranslate"><span class="pre">books.dat</span></code>.
We create a new folder called <code class="docutils literal notranslate"><span class="pre">doc</span></code>
and move (<code class="docutils literal notranslate"><span class="pre">mv</span></code>) the file <code class="docutils literal notranslate"><span class="pre">books.dat</span></code> to that new folder.
Then we make a copy (<code class="docutils literal notranslate"><span class="pre">cp</span></code>) of the file we just moved named <code class="docutils literal notranslate"><span class="pre">books-saved.dat</span></code>.</p>
<p>The tricky part here is the location of the copied file.
Recall that <code class="docutils literal notranslate"><span class="pre">..</span></code> means “go up a level,” so the copied file is now in <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code>.
Notice that <code class="docutils literal notranslate"><span class="pre">..</span></code> is interpreted with respect to the current working
directory, <strong>not</strong> with respect to the location of the file being copied.
So, the only thing that will show using ls (in <code class="docutils literal notranslate"><span class="pre">/Users/amira/data</span></code>) is the <code class="docutils literal notranslate"><span class="pre">doc</span></code> folder.</p>
<ol class="arabic simple">
<li><p>No: <code class="docutils literal notranslate"><span class="pre">books-saved.dat</span></code> is located at <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code></p></li>
<li><p>Yes.</p></li>
<li><p>No: <code class="docutils literal notranslate"><span class="pre">books.dat</span></code> is located at <code class="docutils literal notranslate"><span class="pre">/Users/amira/data/doc</span></code></p></li>
<li><p>No: <code class="docutils literal notranslate"><span class="pre">books-saved.dat</span></code> is located at <code class="docutils literal notranslate"><span class="pre">/Users/amira</span></code></p></li>
</ol>
</section>
<section id="exercise-11">
<h3>Exercise 11<a class="headerlink" href="#exercise-11" title="Link to this heading">#</a></h3>
<p>If given more than one filename followed by a directory name (i.e., the destination directory must
be the last argument), <code class="docutils literal notranslate"><span class="pre">cp</span></code> copies the files to the named directory.</p>
<p>If given three filenames,
<code class="docutils literal notranslate"><span class="pre">cp</span></code> throws an error because it is expecting a directory name as the last argument.</p>
</section>
<section id="exercise-12">
<h3>Exercise 12<a class="headerlink" href="#exercise-12" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Yes: Shows all files whose names contain two different characters (<code class="docutils literal notranslate"><span class="pre">?</span></code>)
followed by the letter <code class="docutils literal notranslate"><span class="pre">n</span></code>,
then zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>) followed by <code class="docutils literal notranslate"><span class="pre">txt</span></code>.</p></li>
<li><p>No: Shows all files whose names start with zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>)
followed by <code class="docutils literal notranslate"><span class="pre">e_</span></code>,
zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>),
then <code class="docutils literal notranslate"><span class="pre">txt</span></code>.
The output includes the two desired books, but also <code class="docutils literal notranslate"><span class="pre">time_machine.txt</span></code>.</p></li>
<li><p>No: Shows all files whose names start with zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>)
followed by <code class="docutils literal notranslate"><span class="pre">n</span></code>,
zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>),
then <code class="docutils literal notranslate"><span class="pre">txt</span></code>.
The output includes the two desired books,
but also <code class="docutils literal notranslate"><span class="pre">frankenstein.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">time_machine.txt</span></code>.</p></li>
<li><p>No: Shows all files whose names start with zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>)
followed by <code class="docutils literal notranslate"><span class="pre">n</span></code>,
a single character <code class="docutils literal notranslate"><span class="pre">?</span></code>,
<code class="docutils literal notranslate"><span class="pre">e</span></code>,
zero or more characters (<code class="docutils literal notranslate"><span class="pre">*</span></code>),
then <code class="docutils literal notranslate"><span class="pre">txt</span></code>.
The output shows <code class="docutils literal notranslate"><span class="pre">frankenstein.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">sense_and_sensibility.txt</span></code>.</p></li>
</ol>
</section>
<section id="exercise-13">
<h3>Exercise 13<a class="headerlink" href="#exercise-13" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mv<span class="w"> </span>*.txt<span class="w"> </span>data
</pre></div>
</div>
<p>Amira needs to move her files <code class="docutils literal notranslate"><span class="pre">books.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">titles.txt</span></code> to the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.
The shell will expand <code class="docutils literal notranslate"><span class="pre">*.txt</span></code> to match all <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files in the current directory.
The <code class="docutils literal notranslate"><span class="pre">mv</span></code> command then moves the list of <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files to the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</section>
<section id="exercise-14">
<h3>Exercise 14<a class="headerlink" href="#exercise-14" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>Yes: This accurately re-creates the directory structure.</p></li>
<li><p>Yes: This accurately re-creates the directory structure.</p></li>
<li><p>No: The first line of this code set gives an error:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mkdir: 2016-05-20/data: No such file or directory
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mkdir</span></code> won’t create a subdirectory for a directory that doesn’t yet exist
(unless you use an option like <code class="docutils literal notranslate"><span class="pre">-p</span></code> that explicitly creates parent directories).</p>
</li>
<li><p>No: This creates <code class="docutils literal notranslate"><span class="pre">raw</span></code> and <code class="docutils literal notranslate"><span class="pre">processed</span></code> directories at the same level as <code class="docutils literal notranslate"><span class="pre">data</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2016-05-20/
    ├── data
    ├── processed
    └── raw
</pre></div>
</div>
</li>
</ol>
</section>
<section id="exercise-15">
<h3>Exercise 15<a class="headerlink" href="#exercise-15" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>A solution using two wildcard expressions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ls<span class="w"> </span>s*.txt
$<span class="w"> </span>ls<span class="w"> </span>t*.txt
</pre></div>
</div>
</li>
<li><p>When there are no files beginning with <code class="docutils literal notranslate"><span class="pre">s</span></code> and ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>,
or when there are no files beginning with <code class="docutils literal notranslate"><span class="pre">t</span></code> and ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>.</p></li>
</ol>
</section>
<section id="exercise-16">
<h3>Exercise 16<a class="headerlink" href="#exercise-16" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: This would remove only <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files with one-character names.</p></li>
<li><p>Yes: This removes only files ending in <code class="docutils literal notranslate"><span class="pre">.csv</span></code>.</p></li>
<li><p>No: The shell would expand <code class="docutils literal notranslate"><span class="pre">*</span></code> to match everything in the current directory,
so the command would try to remove all matched files and an additional
file called <code class="docutils literal notranslate"><span class="pre">.csv</span></code>.</p></li>
<li><p>No: The shell would expand <code class="docutils literal notranslate"><span class="pre">*.*</span></code> to match all files with any extension,
so this command would delete all files in the current directory.</p></li>
</ol>
</section>
<section id="exercise-17">
<h3>Exercise 17<a class="headerlink" href="#exercise-17" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">novel-????-[ab]*.{txt,pdf}</span></code> matches:</p>
<ul class="simple">
<li><p>Files whose names start with <code class="docutils literal notranslate"><span class="pre">novel-</span></code>,</p></li>
<li><p>which is then followed by exactly four characters
(since each <code class="docutils literal notranslate"><span class="pre">?</span></code> matches one character),</p></li>
<li><p>followed by another literal <code class="docutils literal notranslate"><span class="pre">-</span></code>,</p></li>
<li><p>followed by either the letter <code class="docutils literal notranslate"><span class="pre">a</span></code> or the letter <code class="docutils literal notranslate"><span class="pre">b</span></code>,</p></li>
<li><p>followed by zero or more other characters (the <code class="docutils literal notranslate"><span class="pre">*</span></code>),</p></li>
<li><p>followed by <code class="docutils literal notranslate"><span class="pre">.txt</span></code> or <code class="docutils literal notranslate"><span class="pre">.pdf</span></code>.</p></li>
</ul>
</section>
</section>
<section id="chapter-bash-tools">
<h2>Chapter Bash-Tools<a class="headerlink" href="#chapter-bash-tools" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>Exercise 1<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">hello</span> <span class="pre">&gt;</span> <span class="pre">testfile01.txt</span></code> writes the string “hello” to <code class="docutils literal notranslate"><span class="pre">testfile01.txt</span></code>,
but the file gets overwritten each time we run the command.</p>
<p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">hello</span> <span class="pre">&gt;&gt;</span> <span class="pre">testfile02.txt</span></code> writes “hello” to <code class="docutils literal notranslate"><span class="pre">testfile02.txt</span></code>,
but appends the string to the file if it already exists (i.e., when we run it for the second time).</p>
</section>
<section id="id2">
<h3>Exercise 2<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: This results from only running the first line of code (<code class="docutils literal notranslate"><span class="pre">head</span></code>).</p></li>
<li><p>No: This results from only running the second line of code (<code class="docutils literal notranslate"><span class="pre">tail</span></code>).</p></li>
<li><p>Yes: The first line writes the first three lines of <code class="docutils literal notranslate"><span class="pre">dracula.txt</span></code>,
the second line appends the last two lines of <code class="docutils literal notranslate"><span class="pre">dracula.txt</span></code> to the same file.</p></li>
<li><p>No: We would need to pipe the commands to obtain this answer (<code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">-n</span> <span class="pre">3</span> <span class="pre">dracula.txt</span> <span class="pre">|</span> <span class="pre">tail</span> <span class="pre">-n</span> <span class="pre">2</span> <span class="pre">&gt;</span> <span class="pre">extracted.txt</span></code>).</p></li>
</ol>
</section>
<section id="id3">
<h3>Exercise 3<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>Try running each line of code in the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
<ol class="arabic simple">
<li><p>No: This incorrectly uses redirect (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>),
and will result in an error.</p></li>
<li><p>No: The number of lines desired for <code class="docutils literal notranslate"><span class="pre">head</span></code> is reported incorrectly;
this will result in an error.</p></li>
<li><p>No: This will extract the first three files from the <code class="docutils literal notranslate"><span class="pre">wc</span></code> results,
which have not yet been sorted into length of lines.</p></li>
<li><p>Yes: This output correctly orders and connects each of the commands.</p></li>
</ol>
</section>
<section id="id4">
<h3>Exercise 4<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p>To obtain a list of unique results from these data,
we need to run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sort<span class="w"> </span>genres.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</pre></div>
</div>
<p>It makes sense that <code class="docutils literal notranslate"><span class="pre">uniq</span></code> is almost always run after using <code class="docutils literal notranslate"><span class="pre">sort</span></code>,
because that allows a computer to compare only adjacent lines.
If <code class="docutils literal notranslate"><span class="pre">uniq</span></code> did not compare only adjacent lines,
it would require comparing each line to all other lines.
For a small set of comparisons,
this doesn’t matter much,
but this isn’t always possible for large files.</p>
</section>
<section id="id5">
<h3>Exercise 5<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>When used on a single file,
<code class="docutils literal notranslate"><span class="pre">cat</span></code> prints the contents of that file to the screen.
In this case,
the contents of <code class="docutils literal notranslate"><span class="pre">titles.txt</span></code> are sent as input to <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">-n</span> <span class="pre">5</span></code>,
so the first five lines of <code class="docutils literal notranslate"><span class="pre">titles.txt</span></code> is output.
These five lines are used as the input for <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-n</span> <span class="pre">3</span></code>,
which results in lines 3–5 as output.
This is used as input to the final command,
which sorts them in reverse order.
These results are written to the file <code class="docutils literal notranslate"><span class="pre">final.txt</span></code>,
the contents of which are:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Sense and Sensibility,1811
Moby Dick,1851
Jane Eyre,1847
</pre></div>
</div>
</section>
<section id="id6">
<h3>Exercise 6<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cut</span></code> selects substrings from a line by:</p>
<ul class="simple">
<li><p>breaking the string into pieces wherever it finds a separator (<code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">,</span></code>),
which in this case is a comma, and</p></li>
<li><p>keeping one or more of the resulting fields/columns (<code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">2</span></code>).</p></li>
</ul>
<p>In this case,
the output is only the dates from <code class="docutils literal notranslate"><span class="pre">titles.txt</span></code>,
since this is in the second column.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cut<span class="w"> </span>-d<span class="w"> </span>,<span class="w"> </span>-f<span class="w"> </span><span class="m">2</span><span class="w"> </span>titles.txt
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1897
1818
1847
1851
1811
1892
1897
1895
1847
</pre></div>
</div>
</section>
<section id="id7">
<h3>Exercise 7<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: This sorts by the book title.</p></li>
<li><p>No: This results in an error because <code class="docutils literal notranslate"><span class="pre">sort</span></code> is being used incorrectly.</p></li>
<li><p>No: There are duplicate dates in the output because they have not been sorted first.</p></li>
<li><p>Yes: This results in the output shown below.</p></li>
<li><p>No: This extracts the desired data (below),
but then counts the number of lines,
resulting in the incorrect answer.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>   1 1811
   1 1818
   2 1847
   1 1851
   1 1892
   1 1895
   2 1897
</pre></div>
</div>
<p>If you have difficulty understanding the answers above,
try running the commands or sub-sections of the pipelines
(e.g., the code between pipes).</p>
</section>
<section id="id8">
<h3>Exercise 8<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>The difference between the versions is whether the code after <code class="docutils literal notranslate"><span class="pre">echo</span></code>
is inside quotation marks.</p>
<p>The first version redirects the output from <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">analyze</span> <span class="pre">$file</span></code>
to a file (<code class="docutils literal notranslate"><span class="pre">analyzed-$file</span></code>).
This doesn’t allow us to preview the commands,
but instead creates files (<code class="docutils literal notranslate"><span class="pre">analyzed-$file</span></code>)
containing the text <code class="docutils literal notranslate"><span class="pre">analyze</span> <span class="pre">$file</span></code>.</p>
<p>The second version will allow us to preview the commands.
This prints to screen everything enclosed in the quotation marks,
expanding the loop variable name (prefixed with <code class="docutils literal notranslate"><span class="pre">$</span></code>).</p>
<p>Try both versions for yourself to see the output. Be sure to open the
<code class="docutils literal notranslate"><span class="pre">analyzed-*</span></code> files to view their contents.</p>
</section>
<section id="id9">
<h3>Exercise 9<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>The first version gives the same output on each iteration through
the loop.
Bash expands the wildcard <code class="docutils literal notranslate"><span class="pre">*.txt</span></code> to match all files ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>
and then lists them using <code class="docutils literal notranslate"><span class="pre">ls</span></code>.
The expanded loop would look like this
(we’ll only show the first two data files):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="k">for</span><span class="w"> </span>datafile<span class="w"> </span><span class="k">in</span><span class="w"> </span>dracula.txt<span class="w">  </span>frankenstein.txt<span class="w"> </span>...
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w">	</span>ls<span class="w"> </span>dracula.txt<span class="w">  </span>frankenstein.txt<span class="w"> </span>...
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dracula.txt  frankenstein.txt ...
dracula.txt  frankenstein.txt ...
...
</pre></div>
</div>
<p>The second version lists a different file on each loop iteration.
The value of the <code class="docutils literal notranslate"><span class="pre">datafile</span></code> variable is evaluated using <code class="docutils literal notranslate"><span class="pre">$datafile</span></code>,
and then listed using <code class="docutils literal notranslate"><span class="pre">ls</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>dracula.txt
frankenstein.txt
jane_eyre.txt
moby_dick.txt
sense_and_sensibility.txt
sherlock_holmes.txt
time_machine.txt
</pre></div>
</div>
</section>
<section id="id10">
<h3>Exercise 10<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>The first version results in only <code class="docutils literal notranslate"><span class="pre">dracula.txt</span></code> output,
because it is the only file beginning in “d”.</p>
<p>The second version results in the following,
because these files all contain a “d” with zero or more characters before and after:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>README.md
dracula.txt
moby_dick.txt
sense_and_sensibility.txt
</pre></div>
</div>
</section>
<section id="id11">
<h3>Exercise 11<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<p>Both versions write the first 16 lines (<code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">-n</span> <span class="pre">16</span></code>)
of each book to a file (<code class="docutils literal notranslate"><span class="pre">headers.txt</span></code>).</p>
<p>The first version results in the text from each file being overwritten in each iteration
because of use of <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> as a redirect.</p>
<p>The second version uses <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>,
which appends the lines to the existing file.
This is preferable because the final <code class="docutils literal notranslate"><span class="pre">headers.txt</span></code>
includes the first 16 lines from all files.</p>
</section>
<section id="id12">
<h3>Exercise 12<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<p>If a command causes something to crash or hang, it might be useful
to know what that command was, in order to investigate the problem.
Were the command only be recorded after running it, we would not
have a record of the last command run in the event of a crash.</p>
</section>
</section>
<section id="chapter-bash-advanced">
<h2>Chapter Bash Advanced<a class="headerlink" href="#chapter-bash-advanced" title="Link to this heading">#</a></h2>
<section id="id13">
<h3>Exercise 1<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/zipf
</pre></div>
</div>
<p>Change into the <code class="docutils literal notranslate"><span class="pre">zipf</span></code> directory,
which is located in the home directory (designated by <code class="docutils literal notranslate"><span class="pre">~</span></code>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.bak&quot;</span><span class="k">)</span>
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w">   </span>rm<span class="w"> </span><span class="nv">$file</span>
&gt;<span class="w"> </span><span class="k">done</span>
</pre></div>
</div>
<p>Find all the files ending in <code class="docutils literal notranslate"><span class="pre">.bak</span></code> and remove them one by one.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>rm<span class="w"> </span>bin/summarize_all_books.sh
</pre></div>
</div>
<p>Remove the <code class="docutils literal notranslate"><span class="pre">summarize_all_books.sh</span></code> script.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>rm<span class="w"> </span>-r<span class="w"> </span>results
</pre></div>
</div>
<p>Recursively remove each file in the <code class="docutils literal notranslate"><span class="pre">results</span></code> directory
and then remove the directory itself.
(It is necessary to remove all the files first because you
cannot remove a non-empty directory.)</p>
</section>
<section id="id14">
<h3>Exercise 2<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>Running this script with the given parameters will print
the first and last line from each file in the directory ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>.</p>
<ol class="arabic simple">
<li><p>No: This answer misinterprets the lines printed.</p></li>
<li><p>Yes.</p></li>
<li><p>No: This answer includes the wrong files.</p></li>
<li><p>No: Leaving off the quotation marks would result in an error.</p></li>
</ol>
</section>
<section id="id15">
<h3>Exercise 3<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p>One possible script (<code class="docutils literal notranslate"><span class="pre">longest.sh</span></code>) to accomplish this task:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Shell script which takes two arguments:</span>
<span class="c1">#    1. a directory name</span>
<span class="c1">#    2. a file extension</span>
<span class="c1"># and prints the name of the file in that directory</span>
<span class="c1"># with the most lines which matches the file extension.</span>
<span class="c1">#</span>
<span class="c1"># Usage: bash longest.sh directory/ txt</span>

wc<span class="w"> </span>-l<span class="w"> </span><span class="nv">$1</span>/*.<span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-n<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3>Exercise 4<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script1.sh</span></code> will print the names of all files in the directory on a single line,
e.g., <code class="docutils literal notranslate"><span class="pre">README.md</span> <span class="pre">dracula.txt</span> <span class="pre">frankenstein.txt</span> <span class="pre">jane_eyre.txt</span> <span class="pre">moby_dick.txt</span> <span class="pre">script1.sh</span> <span class="pre">sense_and_sensibility.txt</span> <span class="pre">sherlock_holmes.txt</span> <span class="pre">time_machine.txt</span></code>.
Although <code class="docutils literal notranslate"><span class="pre">*.txt</span></code> is included when running the script,
the commands run by the script do not reference <code class="docutils literal notranslate"><span class="pre">$1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script2.sh</span></code> will print the contents of the first three files ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>;
the three variables (<code class="docutils literal notranslate"><span class="pre">$1</span></code>, <code class="docutils literal notranslate"><span class="pre">$2</span></code>, <code class="docutils literal notranslate"><span class="pre">$3</span></code>) refer to the first, second, and third argument
entered after the script, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script3.sh</span></code> will print the name of each file ending in <code class="docutils literal notranslate"><span class="pre">.txt</span></code>,
since <code class="docutils literal notranslate"><span class="pre">$&#64;</span></code> refers to <em>all</em> the arguments (e.g., filenames) given to a shell script.
The list of files would be followed by <code class="docutils literal notranslate"><span class="pre">.txt</span></code>:
<code class="docutils literal notranslate"><span class="pre">dracula.txt</span> <span class="pre">frankenstein.txt</span> <span class="pre">jane_eyre.txt</span> <span class="pre">moby_dick.txt</span> <span class="pre">sense_and_sensibility.txt</span> <span class="pre">sherlock_holmes.txt</span> <span class="pre">time_machine.txt.txt</span></code>.</p></li>
</ol>
</section>
<section id="id17">
<h3>Exercise 5<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>No: This command extracts any line containing “he”,
either as a word or within a word.</p></li>
<li><p>No: This results in the same output as the answer for #1.
<code class="docutils literal notranslate"><span class="pre">-E</span></code> allows the search term to represent an extended regular expression,
but the search term is simple enough that it doesn’t make a difference in the result.</p></li>
<li><p>Yes: <code class="docutils literal notranslate"><span class="pre">-w</span></code> means to return only matches for the word “he”.</p></li>
<li><p>No: <code class="docutils literal notranslate"><span class="pre">-i</span></code> means to invert the search result;
this would return all lines <em>except</em> the one we desire.</p></li>
</ol>
</section>
<section id="id18">
<h3>Exercise 6<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtain unique years from multiple comma-delimited</span>
<span class="c1"># lists of titles and publication years</span>
<span class="c1">#</span>
<span class="c1"># Usage: bash year.sh file1.txt file2.txt ...</span>

<span class="k">for</span><span class="w"> </span>filename<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$*</span>
<span class="k">do</span>
<span class="w">  </span>cut<span class="w"> </span>-d<span class="w"> </span>,<span class="w"> </span>-f<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">$filename</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-n<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
<span class="k">done</span>
</pre></div>
</div>
</section>
<section id="id19">
<h3>Exercise 7<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<p>One possible solution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>sister<span class="w"> </span><span class="k">in</span><span class="w"> </span>Elinor<span class="w"> </span>Marianne
<span class="k">do</span>
<span class="w">	</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$sister</span>:
<span class="w">	</span>grep<span class="w"> </span>-o<span class="w"> </span>-w<span class="w"> </span><span class="nv">$sister</span><span class="w"> </span>sense_and_sensibility.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
<span class="k">done</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-o</span></code> option prints only the matching part of a line.</p>
<p>An alternative (but possibly less accurate)
solution is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>sister<span class="w"> </span><span class="k">in</span><span class="w"> </span>Elinor<span class="w"> </span>Marianne
<span class="k">do</span>
<span class="w">	</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$sister</span>:
<span class="w">	</span>grep<span class="w"> </span>-o<span class="w"> </span>-c<span class="w"> </span>-w<span class="w"> </span><span class="nv">$sister</span><span class="w"> </span>sense_and_sensibility.txt
<span class="k">done</span>
</pre></div>
</div>
<p>This solution is potentially less accurate
because <code class="docutils literal notranslate"><span class="pre">grep</span> <span class="pre">-c</span></code> only reports the number of lines matched.
The total number of matches reported by this method
will be lower if there is more than one match per line.</p>
</section>
<section id="id20">
<h3>Exercise 8<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Yes: This returns <code class="docutils literal notranslate"><span class="pre">data/jane_eyre.txt</span></code>.</p></li>
<li><p>Maybe: This option may work on your computer,
but may not behave consistently across all shells
because expansion of the wildcard (<code class="docutils literal notranslate"><span class="pre">*e.txt</span></code>) may prevent piping from working correctly.
We recommend enclosing <code class="docutils literal notranslate"><span class="pre">*e.txt</span></code> in quotation marks,
as in answer 1.</p></li>
<li><p>No: This searches the contents of files for lines matching “machine”,
rather than the filenames.</p></li>
<li><p>See above.</p></li>
</ol>
</section>
<section id="id21">
<h3>Exercise 9<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Find all files with a <code class="docutils literal notranslate"><span class="pre">.dat</span></code> extension recursively from the current directory.</p></li>
<li><p>Count the number of lines each of these files contains.</p></li>
<li><p>Sort the output from step 2 numerically.</p></li>
</ol>
</section>
<section id="id22">
<h3>Exercise 10<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<p>The following command works if your working directory is <code class="docutils literal notranslate"><span class="pre">Desktop/</span></code>
and you replace “username” with that of your current computer.
<code class="docutils literal notranslate"><span class="pre">-mtime</span></code> needs to be negative because it is referencing a day prior to the current date.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-mtime<span class="w"> </span>-1<span class="w"> </span>-user<span class="w"> </span>username
</pre></div>
</div>
</section>
</section>
<section id="chapter-python-cli">
<h2>Chapter Python CLI<a class="headerlink" href="#chapter-python-cli" title="Link to this heading">#</a></h2>
<section id="id23">
<h3>Exercise 1<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<p>Running a Python statement directly from the command line is useful as a basic calculator
and for simple string operations,
since these commands occur in one line of code.
More complicated commands will require multiple statements;
when run using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span></code>,
statements must be separated by semi-colons:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import math; print(math.log(123))&quot;</span>
</pre></div>
</div>
<p>Multiple statements,
therefore,
quickly become more troublesome to run in this manner.</p>
</section>
<section id="id24">
<h3>Exercise 2<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">my_ls.py</span></code> script could read as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;List the files in a given directory with a given suffix.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">glob</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the program.&quot;&quot;&quot;</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dir</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">dir</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span> <span class="k">else</span> <span class="n">args</span><span class="o">.</span><span class="n">dir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
    <span class="n">glob_input</span> <span class="o">=</span> <span class="nb">dir</span> <span class="o">+</span> <span class="s1">&#39;*.&#39;</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="n">suffix</span>
    <span class="n">glob_output</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">glob_input</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">glob_output</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Directory&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;suffix&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;File suffix (e.g. py, sh)&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id25">
<h3>Exercise 3<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sentence_endings.py</span></code> script could read as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Count the occurrence of different sentence endings.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">argparse</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ending</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">]:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">ending</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of </span><span class="si">{</span><span class="n">ending</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Input file name&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="chapter-introduction-to-version-control">
<h2>Chapter Introduction to Version Control<a class="headerlink" href="#chapter-introduction-to-version-control" title="Link to this heading">#</a></h2>
<section id="id26">
<h3>Exercise 1<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<p>Amira does not need to make the <code class="docutils literal notranslate"><span class="pre">heaps-law</span></code> subdirectory a Git repository
because the <code class="docutils literal notranslate"><span class="pre">zipf</span></code> repository will track everything inside it regardless of how deeply nested.</p>
<p>Amira <em>shouldn’t</em> run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code> in <code class="docutils literal notranslate"><span class="pre">heaps-law</span></code> because nested Git repositories can interfere with each other.
If someone commits something in the inner repository,
Git will not know whether to record the changes in that repository,
the outer one,
or both.</p>
</section>
<section id="id27">
<h3>Exercise 2<a class="headerlink" href="#id27" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> now shows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>On branch master
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
	example.txt

nothing added to commit but untracked files present
(use &quot;git add&quot; to track)
</pre></div>
</div>
<p>Nothing has happened to the file;
it still exists but Git no longer has it in the staging area.
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span> <span class="pre">--cached</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span> <span class="pre">--staged</span></code>.
With newer versions of Git,
older commands will still work,
and you may encounter references to them when reading help documentation.
If you created this file in your <code class="docutils literal notranslate"><span class="pre">zipf</span></code> project,
we recommend removing it before proceeding.</p>
</section>
<section id="id28">
<h3>Exercise 3<a class="headerlink" href="#id28" title="Link to this heading">#</a></h3>
<p>If we make a few changes to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> such that it now reads:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>__pycache__ this is a change

this is another change
</pre></div>
</div>
<p>then <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> would show:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/.gitignore b/.gitignore</span>
<span class="gh">index bee8a64..5c83419 100644</span>
<span class="gd">--- a/.gitignore</span>
<span class="gi">+++ b/.gitignore</span>
<span class="gu">@@ -1 +1,3 @@</span>
<span class="gd">-__pycache__</span>
<span class="gi">+__pycache__ this is a change</span>
<span class="gi">+</span>
<span class="gi">+this is another change</span>
</pre></div>
</div>
<p>Whereas <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">--word-diff</span></code> shows:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/.gitignore b/.gitignore</span>
<span class="gh">index bee8a64..5c83419 100644</span>
<span class="gd">--- a/.gitignore</span>
<span class="gi">+++ b/.gitignore</span>
<span class="gu">@@ -1 +1,3 @@</span>
__pycache__ {+this is a change+}

{+this is another change+}
</pre></div>
</div>
<p>Depending on the nature of the changes you are viewing,
the latter may be easier to interpret
since it shows exactly what has been
changed.</p>
</section>
<section id="id29">
<h3>Exercise 4<a class="headerlink" href="#id29" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Maybe: would only create a commit if the file has already been staged.</p></li>
<li><p>No: would try to create a new repository,
which results in an error if a repository already exists.</p></li>
<li><p>Yes: first adds the file to the staging area, then commits.</p></li>
<li><p>No: would result in an error,
as it would try to commit a file “my recent changes” with the message “myfile.txt.”</p></li>
</ol>
</section>
<section id="id30">
<h3>Exercise 5<a class="headerlink" href="#id30" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Go into your home directory with <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~</span></code>.</p></li>
<li><p>Create a new folder called <code class="docutils literal notranslate"><span class="pre">bio</span></code> with <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">bio</span></code>.</p></li>
<li><p>Make the repository your working directory with <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">bio</span></code>.</p></li>
<li><p>Turn it into a repository with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code>.</p></li>
<li><p>Create your biography using <code class="docutils literal notranslate"><span class="pre">nano</span></code> or another text editor.</p></li>
<li><p>Add it and commit it in a single step with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-a</span> <span class="pre">-m</span> <span class="pre">&quot;Some</span> <span class="pre">message&quot;</span></code>.</p></li>
<li><p>Modify the file.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> to see the differences.</p></li>
</ol>
</section>
<section id="id31">
<h3>Exercise 6<a class="headerlink" href="#id31" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Create <code class="docutils literal notranslate"><span class="pre">employment.txt</span></code> using an editor like Nano.</p></li>
<li><p>Add both <code class="docutils literal notranslate"><span class="pre">me.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">employment.txt</span></code> to the staging area with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">*.txt</span></code>.</p></li>
<li><p>Check that both files are there with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p></li>
<li><p>Commit both files at once with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p></li>
</ol>
</section>
<section id="id32">
<h3>Exercise 7<a class="headerlink" href="#id32" title="Link to this heading">#</a></h3>
<p>GitHub displays timestamps in a human-readable relative format
(i.e., “22 hours ago” or “three weeks ago”),
since this makes it easy for anyone in any time zone
to know what changes have been made recently.
However, if we hover over the timestamp
we can see the exact time at which the last change to the file occurred.</p>
</section>
<section id="id33">
<h3>Exercise 8<a class="headerlink" href="#id33" title="Link to this heading">#</a></h3>
<p>The answer is 1.</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">motivation.txt</span></code> adds the current version of <code class="docutils literal notranslate"><span class="pre">motivation.txt</span></code> to the staging area.
The changes to the file from the second <code class="docutils literal notranslate"><span class="pre">echo</span></code> command are only applied to the working copy,
not the version in the staging area.</p>
<p>As a result,
when <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">&quot;Motivate</span> <span class="pre">project&quot;</span></code> is executed,
the version of <code class="docutils literal notranslate"><span class="pre">motivation.txt</span></code> committed to the repository is the content from the first <code class="docutils literal notranslate"><span class="pre">echo</span></code>.</p>
<p>However,
the working copy still has the output from the second <code class="docutils literal notranslate"><span class="pre">echo</span></code>;
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> would show that the file is modified.
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span> <span class="pre">HEAD</span> <span class="pre">motivation.txt</span></code> therefore replaces the working copy with
the most recently committed version of <code class="docutils literal notranslate"><span class="pre">motivation.txt</span></code>
(the content of the first <code class="docutils literal notranslate"><span class="pre">echo</span></code>),
so <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">motivation.txt</span></code> prints:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Zipf&#39;s Law describes the relationship between the frequency and
rarity of words.
</pre></div>
</div>
</section>
<section id="id34">
<h3>Exercise 10<a class="headerlink" href="#id34" title="Link to this heading">#</a></h3>
<p>Add this line to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>results/plots/
</pre></div>
</div>
</section>
<section id="id35">
<h3>Exercise 11<a class="headerlink" href="#id35" title="Link to this heading">#</a></h3>
<p>Add the following two lines to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>*.dat           # ignore all data files
!final.dat      # except final.data
</pre></div>
</div>
<p>The exclamation point <code class="docutils literal notranslate"><span class="pre">!</span></code> includes a previously excluded entry.</p>
<p>Note also that if we have previously committed <code class="docutils literal notranslate"><span class="pre">.dat</span></code> files in this repository,
they will not be ignored once these rules are added to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>.
Only future <code class="docutils literal notranslate"><span class="pre">.dat</span></code> files will be ignored.</p>
</section>
<section id="id36">
<h3>Exercise 12<a class="headerlink" href="#id36" title="Link to this heading">#</a></h3>
<p>The left button (with the picture of a clipboard)
copies the full identifier of the commit to the clipboard.
In the shell,
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> shows the full commit identifier for each commit.</p>
<p>The middle button (with seven letters and numbers)
shows all of the changes that were made in that particular commit;
green shaded lines indicate additions and red lines indicate removals.
We can show the same thing in the shell using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>
or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">FROM..TO</span></code>
(where <code class="docutils literal notranslate"><span class="pre">FROM</span></code> and <code class="docutils literal notranslate"><span class="pre">TO</span></code> are commit identifiers).</p>
<p>The right button lets us view all of the files in the repository at the time of that commit.
To do this in the shell,
we would need to check out the repository as it was at that commit
using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">ID</span></code>, where <code class="docutils literal notranslate"><span class="pre">ID</span></code> is the tag, branch name, or commit identifier.
If we do this,
we need to remember to put the repository back to the right state afterward.</p>
</section>
<section id="id37">
<h3>Exercise 13<a class="headerlink" href="#id37" title="Link to this heading">#</a></h3>
<p>Committing updates our local repository.
Pushing sends any commits we have made locally
that aren’t yet in the remote repository
to the remote repository.</p>
</section>
<section id="id38">
<h3>Exercise 14<a class="headerlink" href="#id38" title="Link to this heading">#</a></h3>
<p>When GitHub creates a <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file while setting up a new repository,
it actually creates the repository and then commits the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file.
When we try to pull from the remote repository to our local repository,
Git detects that their histories do not share a common origin and refuses to merge them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>warning: no common commits
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
From https://github.com/frances/eniac
 * branch            master     -&gt; FETCH_HEAD
 * [new branch]      master     -&gt; origin/master
fatal: refusing to merge unrelated histories
</pre></div>
</div>
<p>We can force Git to merge the two repositories with the option <code class="docutils literal notranslate"><span class="pre">--allow-unrelated-histories</span></code>.
Please check the contents of the local and remote repositories carefully before doing this.</p>
</section>
<section id="id39">
<h3>Exercise 15<a class="headerlink" href="#id39" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">checkout</span></code> command restores files from the repository,
overwriting the files in our working directory.
<code class="docutils literal notranslate"><span class="pre">HEAD</span></code> indicates the latest version.</p>
<ol class="arabic simple">
<li><p>No: this can be dangerous;
without a filename,
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> will restore all files in the current directory (and all directories below it)
to their state at the commit specified.
This command will restore <code class="docutils literal notranslate"><span class="pre">data_cruncher.sh</span></code> to the latest commit version,
but will also reset any other files we have changed to that version,
which will erase any unsaved changes you may have made to those files.</p></li>
<li><p>Yes: this restores the latest version of only the desired file.</p></li>
<li><p>No: this gets the version of <code class="docutils literal notranslate"><span class="pre">data_cruncher.sh</span></code> from the commit before <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
which is not what we want.</p></li>
<li><p>Yes: the unique ID (identifier) of the last commit is what <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> means.</p></li>
<li><p>Yes: this is equivalent to the answer to 2.</p></li>
<li><p>No: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span></code> assumes <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
so Git will assume you’re trying to restore a file called <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>,
resulting in an error.</p></li>
</ol>
</section>
<section id="id40">
<h3>Exercise 16<a class="headerlink" href="#id40" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Compares what has changed between the
current <code class="docutils literal notranslate"><span class="pre">bin/plotcounts.py</span></code> and the same file nine commits ago.</p></li>
<li><p>It returns an error:
<code class="docutils literal notranslate"><span class="pre">fatal:</span> <span class="pre">ambiguous</span> <span class="pre">argument</span> <span class="pre">'HEAD~9':</span> <span class="pre">unknown</span> <span class="pre">revision</span> <span class="pre">or</span> <span class="pre">path</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">working</span> <span class="pre">tree.</span></code>
We don’t have enough commits in history for the command to properly execute.</p></li>
<li><p>It compares changes (either staged or unstaged)
to the most recent commit.</p></li>
</ol>
</section>
<section id="id41">
<h3>Exercise 17<a class="headerlink" href="#id41" title="Link to this heading">#</a></h3>
<p>No, using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> on a staged file does not unstage it.
The changes are in the staging area and checkout would affect
the working directory.</p>
</section>
<section id="exercise-18">
<h3>Exercise 18<a class="headerlink" href="#exercise-18" title="Link to this heading">#</a></h3>
<p>Each line of output corresponds to a line in the file,
and includes the commit identifier,
who last modified the line,
when that change was made,
and what is included on that line.
Note that the edit you just committed is not present here;
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code> only shows the current lines in the file,
and doesn’t report on lines that have been removed.</p>
</section>
</section>
<section id="chapter-git-advanced">
<h2>Chapter Git Advanced<a class="headerlink" href="#chapter-git-advanced" title="Link to this heading">#</a></h2>
<section id="id42">
<h3>Exercise 1<a class="headerlink" href="#id42" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--oneline</span></code> shows each commit on a single line
with the <strong>short identifier</strong> at the start
and the title of the commit beside it.
<code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">NUMBER</span></code> limits the number of commits to show.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--since</span></code> and <code class="docutils literal notranslate"><span class="pre">--after</span></code> can be used to show commits
in a range of dates or times;
<code class="docutils literal notranslate"><span class="pre">--author</span></code> can be used to show commits by a particular person;
and <code class="docutils literal notranslate"><span class="pre">-w</span></code> tells Git to ignore whitespace when comparing commits.</p></li>
</ol>
</section>
<section id="id43">
<h3>Exercise 2<a class="headerlink" href="#id43" title="Link to this heading">#</a></h3>
<p>An online search for “show Git branch in Bash prompt” turns up several approaches,
one of the simplest of which is to add this line to our <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export PS1=&quot;\\w + \$(git branch 2&gt;/dev/null | grep &#39;^*&#39; |
colrm 1 2) \$ &quot;
</pre></div>
</div>
<p>Breaking it down:</p>
<ol class="arabic simple">
<li><p>Setting the <code class="docutils literal notranslate"><span class="pre">PS1</span></code> variable defines the primary shell <strong>prompt</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\w</span></code> in a shell prompt string means “the current directory.”</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">+</span></code> is a literal <code class="docutils literal notranslate"><span class="pre">+</span></code> sign between the current directory and the Git branch name.</p></li>
<li><p>The command that gets the name of the current Git branch is in <code class="docutils literal notranslate"><span class="pre">$(...)</span></code>.
(We need to escape the <code class="docutils literal notranslate"><span class="pre">$</span></code> as <code class="docutils literal notranslate"><span class="pre">\$</span></code> so Bash doesn’t just run it once
when defining the string.)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> command shows <em>all</em> the branches,
so we pipe that to <code class="docutils literal notranslate"><span class="pre">grep</span></code> and select the one marked with a <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p></li>
<li><p>Finally, we remove the first column (i.e., the one containing the <code class="docutils literal notranslate"><span class="pre">*</span></code>)
to leave just the branch name.</p></li>
</ol>
<p>So what’s <code class="docutils literal notranslate"><span class="pre">2&gt;/dev/null</span></code> about?
That redirects any error messages to <code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>,
a special “file” that consumes input without saving it.
We need that because sometimes we will be in a directory
that isn’t inside a Git repository,
and we don’t want error messages showing up in our shell prompt.</p>
<p><em>None of this is obvious,</em>
and we didn’t figure it out ourselves.
Instead,
we did a search and pasted various answers into <a class="reference external" href="http://explainshell.com">explainshell.com</a>
until we had something we understood and trusted.</p>
</section>
<section id="id44">
<h3>Exercise 3<a class="headerlink" href="#id44" title="Link to this heading">#</a></h3>
<p><a class="github reference external" href="https://github.com/github/gitignore/blob/master/Python.gitignore">github/gitignore</a>
ignores 76 files or patterns.
Of those,
we recognized less than half.
Searching online for some of these,
like <code class="docutils literal notranslate"><span class="pre">&quot;*.pot</span> <span class="pre">file&quot;</span></code>,
turns up useful explanations.
Searching for others like <code class="docutils literal notranslate"><span class="pre">var/</span></code> does not;
in that case,
we have to look at the category (in this case, “Python distribution”)
and set aside time to do more reading.</p>
</section>
<section id="id45">
<h3>Exercise 4<a class="headerlink" href="#id45" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">main..same</span></code> does not print anything
because there are no differences between the two branches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">same</span> <span class="pre">main</span></code> prints <code class="docutils literal notranslate"><span class="pre">merging</span></code>
because Git combines histories even when the files themselves do not differ.
After running this command,
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">history</span></code> shows a commit for the merge.</p></li>
</ol>
</section>
<section id="id46">
<h3>Exercise 5<a class="headerlink" href="#id46" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Git refuses to delete a branch with unmerged commits
because it doesn’t want to destroy our work.</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">-D</span></code> (capital-D) option to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> will delete the branch anyway.
This is dangerous because any content that exists only in that branch will be lost.</p></li>
<li><p>Even with <code class="docutils literal notranslate"><span class="pre">-D</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> will not delete the branch we are currently on.</p></li>
</ol>
</section>
<section id="id47">
<h3>Exercise 6<a class="headerlink" href="#id47" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Chartreuse has repositories on GitHub and their desktop
containing identical copies of <code class="docutils literal notranslate"><span class="pre">README.md</span></code> and nothing else.</p></li>
<li><p>Fuchsia has repositories on GitHub and their desktop
with exactly the same content as Chartreuse’s repositories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuchsia.txt</span></code> is in both of Fuchsia’s repositories
but not in Chartreuse’s repositories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuchsia.txt</span></code> is still in both of Fuchsia’s repositories
but still not in Chartreuse’s repositories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chartreuse.txt</span></code> is in both of Chartreuse’s repositories
but not yet in either of Fuchsia’s repositories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chartreuse.txt</span></code> is in Fuchsia’s desktop repository
but not yet in their GitHub repository.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chartreuse.txt</span></code> is in both of Fuchsia’s repositories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuchsia.txt</span></code> is in Chartreuse’s GitHub repository
but not in their desktop repository.</p></li>
<li><p>All four repositories contain both <code class="docutils literal notranslate"><span class="pre">fuchsia.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">chartreuse.txt</span></code>.</p></li>
</ol>
</section>
</section>
<section id="chapter-working-in-teams">
<h2>Chapter Working in Teams<a class="headerlink" href="#chapter-working-in-teams" title="Link to this heading">#</a></h2>
<section id="id48">
<h3>Exercise 1<a class="headerlink" href="#id48" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Our license is at <a class="github reference external" href="https://github.com/merely-useful/py-rse/blob/book/LICENSE.md">merely-useful/py-rse</a>.</p></li>
<li><p>Our contribution guidelines are at <a class="github reference external" href="https://github.com/merely-useful/py-rse/blob/book/CONTRIBUTING.md">merely-useful/py-rse</a>.</p></li>
</ul>
</section>
<section id="id49">
<h3>Exercise 2<a class="headerlink" href="#id49" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">CONDUCT.md</span></code> file should have contents that mimic those given in Section &#64;ref(teams-coc).</p>
</section>
<section id="id50">
<h3>Exercise 3<a class="headerlink" href="#id50" title="Link to this heading">#</a></h3>
<p>The newly created <code class="docutils literal notranslate"><span class="pre">LICENSE.md</span></code> should look something like the example
MIT License shown in Section &#64;ref(teams-license-software).</p>
</section>
<section id="id51">
<h3>Exercise 4<a class="headerlink" href="#id51" title="Link to this heading">#</a></h3>
<p>The text in the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> might look something like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## Contributing

Interested in contributing?
Check out the [CONTRIBUTING.md](CONTRIBUTING.md)
file for guidelines on how to contribute.
Please note that this project is released with a
[Contributor Code of Conduct](CONDUCT.md).
By contributing to this project,
you agree to abide by its terms.
</pre></div>
</div>
<p>Your <code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code> file might look something like the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Contributing

Thank you for your interest
in contributing to the Zipf&#39;s Law package!

If you are new to the package and/or
collaborative code development on GitHub,
feel free to discuss any suggested changes via issue or email.
We can then walk you through the pull request process if need be.
As the project grows,
we intend to develop more detailed guidelines for submitting
bug reports and feature requests.

We also have a code of conduct
(see [`CONDUCT.md`](CONDUCT.md)).
Please follow it in all your interactions with the project.
</pre></div>
</div>
</section>
<section id="id52">
<h3>Exercise 5<a class="headerlink" href="#id52" title="Link to this heading">#</a></h3>
<p>Be sure to tag the new issue as a feature request to help \gref{triage}{triage}.</p>
</section>
<section id="id53">
<h3>Exercise 6<a class="headerlink" href="#id53" title="Link to this heading">#</a></h3>
<p>We often delete the <code class="docutils literal notranslate"><span class="pre">duplicate</span></code> label:
when we mark an issue that way,
we (almost) always add a comment saying which issue it’s a duplicate <em>of</em>,
in which case it’s just as sensible to label the issue <code class="docutils literal notranslate"><span class="pre">wontfix</span></code>.</p>
</section>
<section id="id54">
<h3>Exercise 7<a class="headerlink" href="#id54" title="Link to this heading">#</a></h3>
<p>Some solutions could be:</p>
<ul class="simple">
<li><p>Give the team member their own office space so they don’t distract others.</p></li>
<li><p>Buy noise-cancelling headphones for the employees that find it distracting.</p></li>
<li><p>Re-arrange the work spaces so that there is a “quiet office” and a regular
office space and have the team member with the attention disorder work
in the regular office.</p></li>
</ul>
</section>
<section id="id55">
<h3>Exercise 8<a class="headerlink" href="#id55" title="Link to this heading">#</a></h3>
<p>Possible solutions:</p>
<ul class="simple">
<li><p>Change the rule so that anyone who contributes to the project, in any way,
gets included as a co-author.</p></li>
<li><p>Update the rule to include a contributor list on all projects with descriptions
of duties, roles, and tasks the contributor provided for the project.</p></li>
</ul>
</section>
<section id="id56">
<h3>Exercise 9<a class="headerlink" href="#id56" title="Link to this heading">#</a></h3>
<p>We obviously can’t say which description fits you best, but:</p>
<ul class="simple">
<li><p>Use \gref{three sticky notes}{three_stickies}
and \gref{interruption bingo}{interruption_bingo}
to stop <em>Anna</em> from cutting people off.</p></li>
<li><p>Tell <em>Bao</em> that the devil doesn’t need more advocates,
and that he’s only allowed one “but what about” at a time.</p></li>
<li><p><em>Hediyeh</em>’s lack of self-confidence will take a long time to remedy.
Keeping a list of the times she’s been right
and reminding her of them frequently is a start,
but the real fix is to create and maintain a supportive environment.</p></li>
<li><p>Unmasking <em>Kenny</em>’s hitchhiking will feel like nit-picking,
but so does the accounting required to pin down other forms of fraud.
The most important thing is to have the discussion in the open
so that everyone realizes he’s taking credit for everyone else’s work
as well as theirs.</p></li>
<li><p><em>Melissa</em> needs a running partner—someone to work beside her
so that she starts when she should and doesn’t get distracted.
If that doesn’t work,
the project may need to assign everything mission-critical to someone else
(which will probably lead to her leaving).</p></li>
<li><p><em>Petra</em> can be managed with a one-for-one rule:
each time she builds or fixes something that someone else needs,
she can then work on something she thinks is cool.
However,
she’s only allowed to add whatever it is to the project
if someone else will publicly commit to maintaining it.</p></li>
<li><p>Get <em>Frank</em> and <em>Raj</em> off your project as quickly as you can.</p></li>
</ul>
</section>
</section>
<section id="chapter-configuration">
<h2>Chapter Configuration<a class="headerlink" href="#chapter-configuration" title="Link to this heading">#</a></h2>
<section id="id57">
<h3>Exercise 1<a class="headerlink" href="#id57" title="Link to this heading">#</a></h3>
<p>The build rule involving <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> should now read:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="c">## results/collated.png: plot the collated results.</span>
<span class="nf">results/collated.png </span><span class="o">:</span><span class="w"> </span><span class="n">results</span>/<span class="n">collated</span>.<span class="n">csv</span> <span class="k">$(</span><span class="nv">PARAMS</span><span class="k">)</span>
<span class="w">	</span>python<span class="w"> </span><span class="k">$(</span>PLOT<span class="k">)</span><span class="w"> </span>$&lt;<span class="w"> </span>--outfile<span class="w"> </span><span class="nv">$@</span><span class="w"> </span>--plotparams<span class="w"> </span><span class="k">$(</span>word<span class="w"> </span><span class="m">2</span>,$^<span class="k">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">PARAMS</span></code> is defined earlier in the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>
along with all the other variables and
also included later in the settings build rule:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">COUNT</span><span class="o">=</span>bin/countwords.py
<span class="nv">COLLATE</span><span class="o">=</span>bin/collate.py
<span class="nv">PARAMS</span><span class="o">=</span>bin/plotparams.yml
<span class="nv">PLOT</span><span class="o">=</span>bin/plotcounts.py
<span class="nv">SUMMARY</span><span class="o">=</span>bin/book_summary.sh
<span class="nv">DATA</span><span class="o">=</span><span class="k">$(</span>wildcard<span class="w"> </span>data/*.txt<span class="k">)</span>
<span class="nv">RESULTS</span><span class="o">=</span><span class="k">$(</span>patsubst<span class="w"> </span>data/%.txt,results/%.csv,<span class="k">$(</span>DATA<span class="k">))</span>
</pre></div>
</div>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="c">## settings : show variables&#39; values.</span>
<span class="nf">settings </span><span class="o">:</span>
<span class="w">	</span>@echo<span class="w"> </span>COUNT:<span class="w"> </span><span class="k">$(</span>COUNT<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>DATA:<span class="w"> </span><span class="k">$(</span>DATA<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>RESULTS:<span class="w"> </span><span class="k">$(</span>RESULTS<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>COLLATE:<span class="w"> </span><span class="k">$(</span>COLLATE<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>PARAMS:<span class="w"> </span><span class="k">$(</span>PARAMS<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>PLOT:<span class="w"> </span><span class="k">$(</span>PLOT<span class="k">)</span>
<span class="w">	</span>@echo<span class="w"> </span>SUMMARY:<span class="w"> </span><span class="k">$(</span>SUMMARY<span class="k">)</span>
</pre></div>
</div>
</section>
<section id="id58">
<h3>Exercise 2<a class="headerlink" href="#id58" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Make the following additions to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--style&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">choices</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">available</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;matplotlib style&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">nargs='*'</span></code> to the definition of the <code class="docutils literal notranslate"><span class="pre">--style</span></code> option:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--style&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span>
                    <span class="n">choices</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">available</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;matplotlib style&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id59">
<h3>Exercise 3<a class="headerlink" href="#id59" title="Link to this heading">#</a></h3>
<p>The first step is to add a new command-line argument to tell <code class="docutils literal notranslate"><span class="pre">plotcount.py</span></code> what we want to do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="c1"># ...other options as before...</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--saveconfig&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Save configuration to file&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we add three lines to <code class="docutils literal notranslate"><span class="pre">main</span></code> to act on this option <em>after</em> all of the plotting parameters have been set.
For now we use <code class="docutils literal notranslate"><span class="pre">return</span></code> to exit from <code class="docutils literal notranslate"><span class="pre">main</span></code> as soon as the parameters have been saved;
this lets us test our change without overwriting any of our actual plots.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">save_configuration</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save configuration to a file.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">reader</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
    <span class="n">set_plot_params</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">plotparams</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">saveconfig</span><span class="p">:</span>
        <span class="n">save_configuration</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">saveconfig</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;word_frequency&#39;</span><span class="p">))</span>
    <span class="c1"># ...carry on producing plot...</span>
</pre></div>
</div>
<p>Finally, we add a target to <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> to try out our change.
We do the test this way so that we can be sure that
we’re testing with the same options we use with the real program;
if we were to type in the whole command ourselves,
we might use something different.
We also save the configuration to <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> rather than to our project directory
to keep it out of version control’s way:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="c">## test-saveconfig : save plot configuration.</span>
<span class="nf">test-saveconfig </span><span class="o">:</span>
<span class="w">	</span>python<span class="w"> </span><span class="k">$(</span>PLOT<span class="k">)</span><span class="w"> </span>--saveconfig<span class="w"> </span>/tmp/test-saveconfig.yml<span class="w"> </span><span class="se">\</span>
<span class="w">	  </span>--plotparams<span class="w"> </span><span class="k">$(</span>PARAMS<span class="k">)</span>
</pre></div>
</div>
<p>The output is over 400 lines long,
and includes settings for everything from the animation bit rate to the size of y-axis ticks:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!!python/object/new:matplotlib.RcParams</span>
<span class="nt">dictitems</span><span class="p">:</span>
<span class="w">  </span><span class="nt">_internal.classic_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">agg.path.chunksize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">animation.avconv_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">animation.avconv_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">avconv</span>
<span class="w">  </span><span class="nt">animation.bitrate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">ytick.minor.size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">  </span><span class="nt">ytick.minor.visible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">ytick.minor.width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="w">  </span><span class="nt">ytick.right</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>The beautiful thing about this file is that the entries are automatically sorted alphabetically,
which makes it easy for both human beings and the <code class="docutils literal notranslate"><span class="pre">diff</span></code> command to spot differences.
This helps reproducibility because any one of these settings might change
in a new release of <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>,
and any of those changes might affect our plots.
Saving the settings allows us to compare what we had when we did our work
to what we have when we’re trying to re-create it,
which in turn gives us a starting point for debugging if we need to.</p>
</section>
<section id="id60">
<h3>Exercise 4<a class="headerlink" href="#id60" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">configparser</span>


<span class="k">def</span> <span class="nf">set_plot_params</span><span class="p">(</span><span class="n">param_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the matplotlib parameters.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">param_file</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">param_file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="n">section</span><span class="p">]:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">section</span><span class="p">][</span><span class="n">param</span><span class="p">]</span>
                <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Most people seem to find Windows INI files easier to write and read,
since it’s easier to see what’s a heading and what’s a value.</p></li>
<li><p>However, Windows INI files only provide one level of sectioning,
so complex configurations are harder to express.
Thus, while YAML may be a bit more difficult to get started with,
it will take us further.</p></li>
</ol>
</section>
<section id="id61">
<h3>Exercise 5<a class="headerlink" href="#id61" title="Link to this heading">#</a></h3>
<p>The answer depends on whether we are able to make changes to Program A and Program B. If we can, we can modify them to use overlay configuration
and put the shared parameters in a single file that both programs load.
If we can’t do that, the next best thing is to create a small helper program
that reads their configuration files and checks that common parameters have consistent values.
The first solution prevents the problem; the second detects it, which is a lot better than nothing.</p>
</section>
</section>
<section id="chapter-testing">
<h2>Chapter Testing<a class="headerlink" href="#chapter-testing" title="Link to this heading">#</a></h2>
<section id="id62">
<h3>Exercise 1<a class="headerlink" href="#id62" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The first assertion checks that the input sequence <code class="docutils literal notranslate"><span class="pre">values</span></code> is not empty.
An empty sequence such as <code class="docutils literal notranslate"><span class="pre">[]</span></code> will make it fail.</p></li>
<li><p>The second assertion checks that each value in the list can be turned into an integer.
Input such as <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,'c',</span> <span class="pre">3]</span></code> will make it fail.</p></li>
<li><p>The third assertion checks that the total of the list is greater than 0.
Input such as <code class="docutils literal notranslate"><span class="pre">[-10,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> will make it fail.</p></li>
</ul>
</section>
<section id="id63">
<h3>Exercise 2<a class="headerlink" href="#id63" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Remove the comments about inserting preconditions and add the following:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Rectangles must contain 4 coordinates&#39;</span>
<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">rect</span>
<span class="k">assert</span> <span class="n">x0</span> <span class="o">&lt;</span> <span class="n">x1</span><span class="p">,</span> <span class="s1">&#39;Invalid X coordinates&#39;</span>
<span class="k">assert</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="n">y1</span><span class="p">,</span> <span class="s1">&#39;Invalid Y coordinates&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Remove the comment about inserting postconditions and add the following</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">upper_x</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> \
  <span class="s1">&#39;Calculated upper X coordinate invalid&#39;</span>
<span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">upper_y</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> \
  <span class="s1">&#39;Calculated upper Y coordinate invalid&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The problem is that the following section of <code class="docutils literal notranslate"><span class="pre">normalize_rectangle</span></code>
should read <code class="docutils literal notranslate"><span class="pre">float(dy)</span> <span class="pre">/</span> <span class="pre">dx</span></code>, not <code class="docutils literal notranslate"><span class="pre">float(dx)</span> <span class="pre">/</span> <span class="pre">dy</span></code>.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="n">dy</span><span class="p">:</span>
    <span class="n">scaled</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">/</span> <span class="n">dy</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><code class="docutils literal notranslate"><span class="pre">test_geometry.py</span></code> should read as follows:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geometry</span>


<span class="k">def</span> <span class="nf">test_tall_skinny</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test normalization of a tall, skinny rectangle.&quot;&quot;&quot;</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="n">actual_result</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">normalize_rectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual_result</span> <span class="o">==</span> <span class="n">expected_result</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Other tests might include (but are not limited to):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_short_wide</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test normalization of a short, wide rectangle.&quot;&quot;&quot;</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">actual_result</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">normalize_rectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual_result</span> <span class="o">==</span> <span class="n">expected_result</span>


<span class="k">def</span> <span class="nf">test_negative_coordinates</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test rectangle normalization with negative coords.&quot;&quot;&quot;</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">actual_result</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">normalize_rectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">actual_result</span> <span class="o">==</span> <span class="n">expected_result</span>
</pre></div>
</div>
</section>
<section id="id64">
<h3>Exercise 3<a class="headerlink" href="#id64" title="Link to this heading">#</a></h3>
<p>There are three approaches to testing when pseudo-random numbers are involved:</p>
<ol class="arabic simple">
<li><p>Run the function once with a known <strong>seed</strong>,
check and record its output,
and then compare the output of subsequent runs to that saved output.
(Basically, if the function does the same thing it did the first time, we trust it.)</p></li>
<li><p>Replace the <strong>pseudo-random number generator</strong> with a function of our own
that generates a predictable series of values.
For example,
if we are randomly partitioning a list into two equal halves,
we could instead use a function that puts odd-numbered values in one partition
and even-numbered values in another
(which is a legal but unlikely outcome of truly random partitioning).</p></li>
<li><p>Instead of checking for an exact result,
check that the result lies within certain bounds,
just as we would with the result of a physical experiment.</p></li>
</ol>
</section>
<section id="id65">
<h3>Exercise 4<a class="headerlink" href="#id65" title="Link to this heading">#</a></h3>
<p>This result seems counter-intuitive to many people because relative error is a measure of a single value, but in this case we are looking at a distribution of values: each result is off by 0.1 compared to a range of 0–2,
which doesn’t “feel” infinite.
In this case, a better measure might be the largest <strong>absolute error</strong> divided by the standard deviation of the data.</p>
</section>
</section>
<section id="chapter-error-handling">
<h2>Chapter Error Handling<a class="headerlink" href="#chapter-error-handling" title="Link to this heading">#</a></h2>
<section id="id66">
<h3>Exercise 1<a class="headerlink" href="#id66" title="Link to this heading">#</a></h3>
<p>Add a new command-line argument to <code class="docutils literal notranslate"><span class="pre">collate.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Set logging level to DEBUG&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and two new lines to the beginning of the <code class="docutils literal notranslate"><span class="pre">main</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">log_level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log_level</span><span class="p">)</span>
</pre></div>
</div>
<p>such that the full <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> script now reads as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Combine multiple word count CSV-files</span>
<span class="sd">into a single cumulative count.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">utilities</span> <span class="k">as</span> <span class="nn">util</span>


<span class="n">ERRORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;not_csv_suffix&#39;</span> <span class="p">:</span> <span class="s1">&#39;</span><span class="si">{fname}</span><span class="s1">: File must end in .csv&#39;</span><span class="p">,</span>
    <span class="p">}</span>


<span class="k">def</span> <span class="nf">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update word counts with data from another reader/file.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">log_lev</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log_lev</span><span class="p">)</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Processing files...&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">infiles</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reading in </span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1">...&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.csv&#39;</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ERRORS</span><span class="p">[</span><span class="s1">&#39;not_csv_suffix&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Computing word counts...&#39;</span><span class="p">)</span>
            <span class="n">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
    <span class="n">util</span><span class="o">.</span><span class="n">collection_to_csv</span><span class="p">(</span><span class="n">word_counts</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infiles&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Input file names&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--num&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output n most frequent words&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span>
                        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Set logging level to DEBUG&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id67">
<h3>Exercise 2<a class="headerlink" href="#id67" title="Link to this heading">#</a></h3>
<p>Add a new command-line argument to <code class="docutils literal notranslate"><span class="pre">collate.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;--logfile&#39;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;collate.log&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Name of the log file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and pass the name of the log file to <code class="docutils literal notranslate"><span class="pre">logging.basicConfig</span></code>
using the <code class="docutils literal notranslate"><span class="pre">filename</span></code> argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log_lev</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">logfile</span><span class="p">)</span>
</pre></div>
</div>
<p>such that the <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> script now reads as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Combine multiple word count CSV-files</span>
<span class="sd">into a single cumulative count.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">utilities</span> <span class="k">as</span> <span class="nn">util</span>


<span class="n">ERRORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;not_csv_suffix&#39;</span> <span class="p">:</span> <span class="s1">&#39;</span><span class="si">{fname}</span><span class="s1">: File must end in .csv&#39;</span><span class="p">,</span>
    <span class="p">}</span>


<span class="k">def</span> <span class="nf">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update word counts with data from another reader/file.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">log_lev</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log_lev</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">logfile</span><span class="p">)</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Processing files...&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">infiles</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reading in </span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1">...&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.csv&#39;</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ERRORS</span><span class="p">[</span><span class="s1">&#39;not_csv_suffix&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Computing word counts...&#39;</span><span class="p">)</span>
            <span class="n">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
    <span class="n">util</span><span class="o">.</span><span class="n">collection_to_csv</span><span class="p">(</span><span class="n">word_counts</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infiles&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Input file names&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--num&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output n most frequent words&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span>
                        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Set logging level to DEBUG&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;--logfile&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;collate.log&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Name of the log file&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id68">
<h3>Exercise 3<a class="headerlink" href="#id68" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>The loop in <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> that reads/processes each input file
should now read as follows:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">infiles</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reading in </span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1">...&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.csv&#39;</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ERRORS</span><span class="p">[</span><span class="s1">&#39;not_csv_suffix&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Computing word counts...&#39;</span><span class="p">)</span>
            <span class="n">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1"> not processed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>The loop in <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> that reads/processes each input file
should now read as follows:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">infiles</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reading in </span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1">...&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;.csv&#39;</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ERRORS</span><span class="p">[</span><span class="s1">&#39;not_csv_suffix&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">fname</span><span class="o">=</span><span class="n">fname</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Computing word counts...&#39;</span><span class="p">)</span>
            <span class="n">update_counts</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1"> not processed: File does not exist&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1"> not processed: No read permission&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s1"> not processed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id69">
<h3>Exercise 4<a class="headerlink" href="#id69" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">try/except</span></code> block in <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> should begin as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">process_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<span class="c1"># ... the other exceptions</span>
</pre></div>
</div>
</li>
<li><p>The following additions need to be made to <code class="docutils literal notranslate"><span class="pre">test_zipfs.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">collate</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_not_csv_error</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Error handling test for csv check&quot;&quot;&quot;</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;data/dracula.txt&#39;</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">):</span>
        <span class="n">collate</span><span class="o">.</span><span class="n">process_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The following unit test needs to be added to <code class="docutils literal notranslate"><span class="pre">test_zipfs.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_missing_file_error</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Error handling test for missing file&quot;&quot;&quot;</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;fake_file.csv&#39;</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">):</span>
        <span class="n">collate</span><span class="o">.</span><span class="n">process_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">word_counts</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The following sequence of commands is required to test the code coverage.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>coverage<span class="w"> </span>run<span class="w"> </span>-m<span class="w"> </span>pytest
$<span class="w"> </span>coverage<span class="w"> </span>html
</pre></div>
</div>
<p>Open <code class="docutils literal notranslate"><span class="pre">htmlcov/index.html</span></code> and click on <code class="docutils literal notranslate"><span class="pre">bin/collate.py</span></code> to view a coverage summary.
The lines of <code class="docutils literal notranslate"><span class="pre">process_files</span></code> that include the <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">OSError</span></code> and
<code class="docutils literal notranslate"><span class="pre">open(fname,</span> <span class="pre">'r')</span></code> commands should appear in green after clicking the green “run” box
in the top left-hand corner of the page.</p>
</li>
</ol>
</section>
<section id="id70">
<h3>Exercise 5<a class="headerlink" href="#id70" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>The convention is to use <code class="docutils literal notranslate"><span class="pre">ALL_CAPS_WITH_UNDERSCORES</span></code> when defining global variables.</p></li>
<li><p>Python’s f-strings interpolate variables that are in scope:
there is no easy way to interpolate values from a lookup table.
In contrast,
<code class="docutils literal notranslate"><span class="pre">str.format</span></code> can be given any number of named keyword arguments (Appendix &#64;ref(style)),
so we can look up a string and then interpolate whatever values we want.</p></li>
<li><p>Once <code class="docutils literal notranslate"><span class="pre">ERRORS</span></code> has been moved to the <code class="docutils literal notranslate"><span class="pre">utilities</span></code> module,
all references to it in <code class="docutils literal notranslate"><span class="pre">collate.py</span></code> must be updated to <code class="docutils literal notranslate"><span class="pre">util.ERRORS</span></code>.</p></li>
</ol>
</section>
<section id="id71">
<h3>Exercise 6<a class="headerlink" href="#id71" title="Link to this heading">#</a></h3>
<p>A <strong>traceback</strong> is an object that records where an exception was
raised), what <strong>stack frames</strong> were on the <strong>call stack</strong> when the error occurred, and other details that are helpful for debugging. Python’s <a class="reference external" href="https://docs.python.org/3/library/traceback.html">traceback</a> library can be used to get an</p>
</section>
</section>
<section id="chapter-tracking-provenance">
<h2>Chapter Tracking Provenance<a class="headerlink" href="#chapter-tracking-provenance" title="Link to this heading">#</a></h2>
<section id="id72">
<h3>Exercise 1<a class="headerlink" href="#id72" title="Link to this heading">#</a></h3>
<p>You can get an ORCID by registering on <a class="reference external" href="https://orcid.org/register">here</a>.
Please add this 16-digit identifier to all of your published works and to your online profiles.</p>
</section>
<section id="id73">
<h3>Exercise 2<a class="headerlink" href="#id73" title="Link to this heading">#</a></h3>
<p>If possible, compare your answers with those of a colleague who works with the same data. Where did you agree and disagree, and why?</p>
</section>
<section id="id74">
<h3>Exercise 3<a class="headerlink" href="#id74" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>51 solicitors were interviewed as the participants.</p></li>
<li><p>Interview data, and data from a database on court decisions.</p></li>
<li><p>This information is not available within the documentation.
Information on their jobs and opinions are there,
but the participant demographics are only described within the associated article.
The difficulty is that the article is not linked within the documentation or the metadata.</p></li>
<li><p>We can search the dataset name and author name trying to find this.
A search for the grant information with “National Science Foundation (1228602)”
finds the <a class="reference external" href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1228602">grant page</a>.
Two articles are linked there,
but both the DOI links are broken.
We can search with the citation for each paper to find them.
The <a class="reference external" href="https://www.fmreview.org/fragilestates/meili">Forced Migration article</a>
uses a different subset of interviews and does not mention demographics,
nor links to the deposited dataset.
The <a class="reference external" href="https://lawdigitalcommons.bc.edu/cgi/viewcontent.cgi?article=3318&amp;amp;context=bclr">Boston College Law Review article</a>
has the same two problems of different data and no dataset citation.</p>
<p>Searching more broadly through Meili’s work, we can find <span id="id75">[<a class="reference internal" href="references.html#id55" title="Stephen Meili. Do Human Rights Treaties Help Asylum-Seekers?: Lessons from the United Kingdom. Minnesota Legal Studies Research Paper, 2015. doi:10.2139/ssrn.2668259.">Meili, 2015</a>]</span>.
This lists the dataset as a footnote and reports the 51 interviews
with demographic data on reported gender of the interviewees.
This paper lists data collection as 2010–2014,
while the other two say 2010–2013.
We might come to a conclusion that this extra year
is where the extra 9 interviews come in,
but that difference is not explained anywhere.</p>
</li>
</ol>
</section>
<section id="id76">
<h3>Exercise 4<a class="headerlink" href="#id76" title="Link to this heading">#</a></h3>
<p>For <a class="reference external" href="https://github.com/borstlab/reversephi_paper/"><code class="docutils literal notranslate"><span class="pre">borstlab/reversephi_paper</span></code></a>:</p>
<ol class="arabic">
<li><p>The software requirements are documented in <code class="docutils literal notranslate"><span class="pre">README.md</span></code>.
In addition to the tools used in the <code class="docutils literal notranslate"><span class="pre">zipf/</span></code> project (Python, Make and Git),
the project also requires ImageMagick.
No information on installing ImageMagick or a required version of ImageMagick is provided.</p>
<p>To re-create the <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment, you would need the file <code class="docutils literal notranslate"><span class="pre">my_environment.yml</span></code>.
Instructions for creating and using the environment are provided in <code class="docutils literal notranslate"><span class="pre">README.md</span></code>.</p>
</li>
<li><p>Like <code class="docutils literal notranslate"><span class="pre">zipf</span></code> the data processing and analysis steps are documented in a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>.
The <code class="docutils literal notranslate"><span class="pre">README</span></code> includes instructions for re-creating the results using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span></code>.</p></li>
<li><p>There doesn’t seem to be a DOI for the archived code and data,
but the GitHub repo does have a release <code class="docutils literal notranslate"><span class="pre">v1.0</span></code> with the description “Published manuscript (1.0)” beside it.
A zip file of this release could be downloaded from GitHub.</p></li>
</ol>
<p>For <a class="reference external" href="https://doi.org/10.6084/m9.figshare.7575830">the figshare page</a> that accompanies the paper <span id="id77">[<a class="reference internal" href="references.html#id45" title="D. B. Irving, S. Wijffels, and J. A. Church. Anthropogenic Aerosols, Greenhouse Gases, and the Uptake, Transport, and Storage of Excess Heat in the Climate System. Geophysical Research Letters, 46(9):4894-4903, 2019. URL: https://doi.org/10.1029/2019GL082015.">Irving <em>et al.</em>, 2019</a>]</span>:</p>
<ol class="arabic">
<li><p>The figshare page includes a “Software environment” section.
To re-create the <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment, you would need the file <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">figure*_log.txt</span></code> are log files for each figure in the paper.
These files show the computational steps performed in generating the figure,
in the form of a list of commands executed at the command line.</p>
<p><code class="docutils literal notranslate"><span class="pre">code.zip</span></code> is a version controlled (using git) file directory
containing the code written to perform the analysis
(i.e., it contains the scripts referred to in the log files).
This code can also be found on GitHub.</p>
</li>
<li><p>The figshare page itself is the archive, and includes a version history for the contents.</p></li>
</ol>
<p>For the GitHub repo <a class="reference external" href="https://github.com/blab/h3n2-reassortment"><code class="docutils literal notranslate"><span class="pre">blab/h3n2-reassortment</span></code></a>:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> includes an “Install requirements” section
that describes setting up the <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment using the file <code class="docutils literal notranslate"><span class="pre">h3n2_reassortment.yaml</span></code>.</p>
<p>The analysis also depends on components from Nextstrain.
Instructions for cloning them from GitHub are provided.</p>
</li>
<li><p>The code seems to be spread across the directories <code class="docutils literal notranslate"><span class="pre">jupyter_notebooks</span></code>, <code class="docutils literal notranslate"><span class="pre">hyphy</span></code>,
<code class="docutils literal notranslate"><span class="pre">flu_epidemiology</span></code>, and <code class="docutils literal notranslate"><span class="pre">src</span></code>, but it isn’t clear what order the code should be run in,
or how the components depend on each other.</p></li>
<li><p>The data itself is not archived, but links are provided
in the “Install requirements” section of <code class="docutils literal notranslate"><span class="pre">README.md</span></code> to
documents that describe how to obtain the data.
Some intermediate data is also provided in the <code class="docutils literal notranslate"><span class="pre">data/</span></code> directory.</p>
<p>The GitHub repo has a release with files “that are up-to-date with the version
of the manuscript that was submitted to Virus Evolution on 31 January 2019.”</p>
</li>
</ol>
</section>
<section id="id78">
<h3>Exercise 5<a class="headerlink" href="#id78" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://web.archive.org/web/20191105173924/https://ukhomeoffice.github.io/accessibility-posters/posters/accessibility-posters.pdf">https://web.archive.org/web/20191105173924/https://ukhomeoffice.github.io/accessibility-posters/posters/accessibility-posters.pdf</a></p>
</section>
<section id="id79">
<h3>Exercise 6<a class="headerlink" href="#id79" title="Link to this heading">#</a></h3>
<p>You’ll know you’ve completed this exercise when you have a URL
that points to zip archive for a specific release of your repository on GitHub,
e.g:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>https://github.com/amira-khan/zipf/archive/KhanVirtanen2020.zip
</pre></div>
</div>
</section>
<section id="id80">
<h3>Exercise 7<a class="headerlink" href="#id80" title="Link to this heading">#</a></h3>
<p>Some steps to publishing your project’s code would be:</p>
<ol class="arabic simple">
<li><p>Upload the code on GitHub.</p></li>
<li><p>Use a standard folder and file structure as taught in this book.</p></li>
<li><p>Include <code class="docutils literal notranslate"><span class="pre">README</span></code>, <code class="docutils literal notranslate"><span class="pre">CONTRIBUTING</span></code>, <code class="docutils literal notranslate"><span class="pre">CONDUCT</span></code>, and <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> files.</p></li>
<li><p>Make sure these files explain how to install and configure the required software
and tells people how to run the code in the project.</p></li>
<li><p>Include a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file for Python package dependencies.</p></li>
</ol>
</section>
</section>
<section id="chapter-packaging">
<h2>Chapter Packaging<a class="headerlink" href="#chapter-packaging" title="Link to this heading">#</a></h2>
<section id="id81">
<h3>Exercise 1<a class="headerlink" href="#id81" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">description</span></code> and <code class="docutils literal notranslate"><span class="pre">long_description</span></code> argument need to be provided
when the <code class="docutils literal notranslate"><span class="pre">setup</span></code> function is called in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.
On the TestPyPI webpage,
the user interface displays description in the grey banner
and long_description in the section named “Project Description.”</p>
<p>Other metadata that might be added includes the author email address,
software license details and a link to the documentation at Read the Docs.</p>
</section>
<section id="id82">
<h3>Exercise 2<a class="headerlink" href="#id82" title="Link to this heading">#</a></h3>
<p>The new <code class="docutils literal notranslate"><span class="pre">requirements_dev.txt</span></code> file will have this inside it:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
</section>
<section id="id83">
<h3>Exercise 3<a class="headerlink" href="#id83" title="Link to this heading">#</a></h3>
<p>The answers to the relevant questions from the checklist are shown below.</p>
<ul class="simple">
<li><p><em>Repository</em>: Is the source code for this software available at the repository url?</p>
<ul>
<li><p>Yes. The source code is available at PyPI.</p></li>
</ul>
</li>
<li><p><em>License</em>: Does the repository contain a plain-text LICENSE file
with the contents of an OSI approved software license?</p>
<ul>
<li><p>Yes. Our GitHub repository contains <a class="reference external" href="http://LICENSE.md">LICENSE.md</a> (Section <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/working_in_teams.html#include-a-license">Include a license</a>).</p></li>
</ul>
</li>
<li><p><em>Installation</em>: Does installation proceed as outlined in the documentation?</p>
<ul>
<li><p>Yes. Our README says the package can be installed via pip.</p></li>
</ul>
</li>
<li><p><em>Functionality</em>: Have the functional claims of the software been confirmed?</p>
<ul>
<li><p>Yes. The command-line programs <code class="docutils literal notranslate"><span class="pre">countwords</span></code>, <code class="docutils literal notranslate"><span class="pre">collate</span></code>, and <code class="docutils literal notranslate"><span class="pre">plotcounts</span></code>
perform as described in the README.</p></li>
</ul>
</li>
<li><p><em>A statement of need</em>: Do the authors clearly state what problems the software
is designed to solve and who the target audience is?</p>
<ul>
<li><p>Yes. The “Motivation” section of the README explains this.</p></li>
</ul>
</li>
<li><p><em>Installation instructions</em>: Is there a clearly stated list of dependencies?
Ideally these should be handled with an automated package management solution.</p>
<ul>
<li><p>Yes. In our <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> argument lists dependencies.</p></li>
</ul>
</li>
<li><p><em>Example usage</em>: Do the authors include examples of how to use the software
(ideally to solve real-world analysis problems).</p>
<ul>
<li><p>Yes. There are examples in the README.</p></li>
</ul>
</li>
<li><p><em>Functionality documentation</em>: Is the core functionality of the software documented
to a satisfactory level (e.g., API method documentation)?</p>
<ul>
<li><p>Yes. This information is available on Read the Docs.</p></li>
</ul>
</li>
<li><p><em>Automated tests</em>: Are there automated tests or manual steps described
so that the functionality of the software can be verified?</p>
<ul>
<li><p>We have unit tests written and available (<code class="docutils literal notranslate"><span class="pre">test_zipfs.py</span></code>),
but our documentation needs to be updated to tell people
to run <code class="docutils literal notranslate"><span class="pre">pytest</span></code> in order to manually run those tests.</p></li>
</ul>
</li>
<li><p><em>Community guidelines</em>: Are there clear guidelines for third parties wishing
to 1) Contribute to the software 2) Report issues or problems
with the software 3) Seek support?</p>
<ul>
<li><p>Yes. Our CONTRIBUTING file explains this (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/working_in_teams.html#make-all-this-obvious-to-newcomers">Section - Making it obvious to newcomers</a>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="id84">
<h3>Exercise 4<a class="headerlink" href="#id84" title="Link to this heading">#</a></h3>
<p>The directory tree for the <code class="docutils literal notranslate"><span class="pre">pratchett</span></code> package is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pratchett
├── pratchett
│   └── quotes.py
├── README.md
└── setup.py
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> should contain a basic description of the package and how to install/use it,
while <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> should contain:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>


<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pratchett&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Amira Khan&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pratchett&#39;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The following sequence of commands will create the development environment,
activate it,
and then install the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>pratchett<span class="w"> </span>python
$<span class="w"> </span>conda<span class="w"> </span>activate<span class="w"> </span>pratchett
<span class="o">(</span>pratchett<span class="o">)</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>pratchett
<span class="o">(</span>pratchett<span class="o">)</span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
</section>
</section>
<section id="snakemake-exercise-solutions">
<h2>Snakemake Exercise Solutions<a class="headerlink" href="#snakemake-exercise-solutions" title="Link to this heading">#</a></h2>
<p><strong>NOTE</strong> the solution are only meant to be a guide, therefore the file paths might not be 100% accurate.</p>
<section id="write-two-new-rules">
<h3>1. Write two New Rules<a class="headerlink" href="#write-two-new-rules" title="Link to this heading">#</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">zipf_test</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="s1">&#39;results/jane_eyre.dat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;results/frankenstein.dat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;results/sherlock_holmes.dat&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/results.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python zipf_test.py results/frankenstein.dat results/jane_eyre.dat results/sherlock_holmes.dat &gt; results/results.txt&#39;</span>

<span class="n">rule</span> <span class="n">dats</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="s1">&#39;jane_eyre.dat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dracula.dat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;sherlock_holmes.dat&#39;</span>

<span class="c1"># delete everything so we can re-run things</span>
<span class="n">rule</span> <span class="n">clean</span><span class="p">:</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;rm -f results/*.dat results/results.txt&#39;</span>

<span class="c1"># Count words in one of the books</span>
<span class="n">rule</span> <span class="n">count_words</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;data/frankenstein.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/frankenstein.dat&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python wordcount.py data/frankenstein.txt results/frankenstein.dat&#39;</span>

<span class="n">rule</span> <span class="n">count_words_jane</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;data/jane_eyre.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/jane_eyre.dat&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python wordcount.py data/jane_eyre.txt results/jane_eyre.dat&#39;</span>

<span class="n">rule</span> <span class="n">count_words_sherlock</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;data/sherlock_holmes.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/sherlock_holmes.dat&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python wordcount.py data/sherlock_holmes.txt results/sherlock_holmes.dat&#39;</span>
</pre></div>
</div>
</section>
<section id="update-dependencies">
<h3>2. Update Dependencies<a class="headerlink" href="#update-dependencies" title="Link to this heading">#</a></h3>
<p>Only <code class="docutils literal notranslate"><span class="pre">results.txt</span></code> recreated.</p>
<p>The rules for <code class="docutils literal notranslate"><span class="pre">*.dat</span></code> are not executed because their corresponding <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files haven’t been modified.</p>
<p>if you run :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch<span class="w"> </span>data/*.txt
snakemake<span class="w"> </span>results.txt
</pre></div>
</div>
</section>
<section id="rewrite-dat-rules-to-use-wildcards">
<h3>3. Rewrite .dat rules to use wildcards<a class="headerlink" href="#rewrite-dat-rules-to-use-wildcards" title="Link to this heading">#</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">count_words</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;data/dracula.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/dracula.dat&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python wordcount.py </span><span class="si">{input}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>
</pre></div>
</div>
</section>
<section id="updating-one-input-file">
<h3>4. Updating One Input File<a class="headerlink" href="#updating-one-input-file" title="Link to this heading">#</a></h3>
<ol class="arabic simple" start="3">
<li><p>only last.dat and results.txt are recreated</p></li>
</ol>
</section>
<section id="updating-zipf-test-rule">
<h3>5. Updating Zipf_test rule<a class="headerlink" href="#updating-zipf-test-rule" title="Link to this heading">#</a></h3>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">zipf_test</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>  <span class="s1">&#39;zipf_test.py&#39;</span><span class="p">,</span> <span class="s1">&#39;results/dracula.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;results/frankenstein.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;results/sherlock_holmes.dat&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results.txt&#39;</span>
    <span class="n">shell</span><span class="p">:</span>  <span class="s1">&#39;python </span><span class="si">{input[0]}</span><span class="s1"> </span><span class="si">{input[1]}</span><span class="s1"> </span><span class="si">{input[2]}</span><span class="s1"> </span><span class="si">{input[3]}</span><span class="s1"> &gt; </span><span class="si">{output}</span><span class="s1">&#39;</span>
</pre></div>
</div>
</section>
<section id="putting-it-all-together">
<h3>6. Putting it all Together<a class="headerlink" href="#putting-it-all-together" title="Link to this heading">#</a></h3>
<p>The critical change is to the assignment of <code class="docutils literal notranslate"><span class="pre">DATS</span></code>, building it dynamically from the input <code class="docutils literal notranslate"><span class="pre">*.txt</span></code> file names.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">DATS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{book}</span><span class="s1">.dat&#39;</span><span class="p">,</span> <span class="n">book</span><span class="o">=</span><span class="n">glob_wildcards</span><span class="p">(</span><span class="s1">&#39;./data/</span><span class="si">{book}</span><span class="s1">.txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">book</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="moving-the-dat-files">
<h3>7. Moving the <code class="docutils literal notranslate"><span class="pre">dat</span></code> files<a class="headerlink" href="#moving-the-dat-files" title="Link to this heading">#</a></h3>
<p>First update the <code class="docutils literal notranslate"><span class="pre">DATS</span></code> variable with the <code class="docutils literal notranslate"><span class="pre">dats</span></code> directory:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">DATS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="s1">&#39;dats/</span><span class="si">{file}</span><span class="s1">.dat&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">glob_wildcards</span><span class="p">(</span><span class="s1">&#39;./books/</span><span class="si">{book}</span><span class="s1">.txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">book</span><span class="p">)</span>
</pre></div>
</div>
<p>Then update <code class="docutils literal notranslate"><span class="pre">count_words</span></code> so the dat files get created in the same place:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">count_words</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s1">&#39;wordcount.py&#39;</span><span class="p">,</span>
        <span class="n">book</span><span class="o">=</span><span class="s1">&#39;data/</span><span class="si">{file}</span><span class="s1">.txt&#39;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;results/dats/</span><span class="si">{file}</span><span class="s1">.dat&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python </span><span class="si">{input.cmd}</span><span class="s1"> </span><span class="si">{input.book}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>Finally, update the <code class="docutils literal notranslate"><span class="pre">clean</span></code> rule to remove the <code class="docutils literal notranslate"><span class="pre">dats</span></code> directory:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">clean</span><span class="p">:</span>
      <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;rm -rf results/dats/ *.dat results/results.txt&#39;</span>
</pre></div>
</div>
<p><em>Note that in the clean rule there is no harm from keeping the <code class="docutils literal notranslate"><span class="pre">*.dat</span></code> pattern in the <code class="docutils literal notranslate"><span class="pre">rm</span></code> command even though no new files will be created in that location. It will help clean up if you forgot to run <code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">clean</span></code> before updating the Snakefile.</em></p>
</section>
<section id="creating-pngs">
<h3>8. Creating PNGs<a class="headerlink" href="#creating-pngs" title="Link to this heading">#</a></h3>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">clean</span></code> rule and add a new pattern rule <code class="docutils literal notranslate"><span class="pre">make_plot</span></code>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># delete everything so we can re-run things</span>
<span class="n">rule</span> <span class="n">clean</span><span class="p">:</span>
     <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;rm -rf dats/ plots/ *.dat results.txt&#39;</span>

<span class="c1"># plot one word count dat file</span>
<span class="n">rule</span> <span class="n">make_plot</span><span class="p">:</span>
     <span class="nb">input</span><span class="p">:</span>
         <span class="n">cmd</span><span class="o">=</span><span class="s1">&#39;plotcount.py&#39;</span><span class="p">,</span>
         <span class="n">dat</span><span class="o">=</span><span class="s1">&#39;dats/</span><span class="si">{file}</span><span class="s1">.dat&#39;</span>
     <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;plots/</span><span class="si">{file}</span><span class="s1">.png&#39;</span>
     <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python </span><span class="si">{input.cmd}</span><span class="s1"> </span><span class="si">{input.dat}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>
</pre></div>
</div>
</section>
<section id="generating-plots">
<h3>9. Generating Plots<a class="headerlink" href="#generating-plots" title="Link to this heading">#</a></h3>
<p>First, we modify the existing code that builds <code class="docutils literal notranslate"><span class="pre">DATS</span></code> to first extract the list of book names, and then to build <code class="docutils literal notranslate"><span class="pre">DATS</span></code> and a new global variable <code class="docutils literal notranslate"><span class="pre">PLOTS</span></code>listing all plots:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the list of book names. We need to use it multiple times when building</span>
<span class="c1"># the lists of files that will be built in the workflow</span>
<span class="n">BOOK_NAMES</span> <span class="o">=</span> <span class="n">glob_wildcards</span><span class="p">(</span><span class="s1">&#39;./data/</span><span class="si">{book}</span><span class="s1">.txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">book</span>

<span class="c1"># The list of all dat files</span>
<span class="n">DATS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="s1">&#39;dats/</span><span class="si">{file}</span><span class="s1">.dat&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">BOOK_NAMES</span><span class="p">)</span>
<span class="c1"># The list of all plot files</span>
<span class="n">PLOTS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="s1">&#39;plots/</span><span class="si">{file}</span><span class="s1">.png&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">BOOK_NAMES</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can define the <code class="docutils literal notranslate"><span class="pre">all</span></code> rule:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pseudo-rule that tries to build everything.</span>
<span class="c1"># Just add all the final outputs that you want built.</span>
<span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;results.txt&#39;</span><span class="p">,</span> <span class="n">PLOTS</span>
</pre></div>
</div>
</section>
<section id="creating-an-archive">
<h3>10. Creating an Archive<a class="headerlink" href="#creating-an-archive" title="Link to this heading">#</a></h3>
<p>First the <code class="docutils literal notranslate"><span class="pre">create_archive</span></code> rule:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create an archive with all results</span>
<span class="n">rule</span> <span class="n">create_archive</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;results.txt&#39;</span><span class="p">,</span> <span class="n">DATS</span><span class="p">,</span> <span class="n">PLOTS</span>
    <span class="n">output</span><span class="p">:</span> <span class="s1">&#39;zipf_analysis.tar.gz&#39;</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;tar -czvf </span><span class="si">{output}</span><span class="s1"> </span><span class="si">{input}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>Then the update to the <code class="docutils literal notranslate"><span class="pre">clean</span> <span class="pre">target</span></code>:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># delete everything so we can re-run things</span>
<span class="n">rule</span> <span class="n">clean</span><span class="p">:</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;rm -rf dats/ plots/ *.dat results.txt zipf_analysis.tar.gz&#39;</span>
</pre></div>
</div>
<p>Then the change to <code class="docutils literal notranslate"><span class="pre">all</span></code>. The workflow would still be correct without this step, but since <code class="docutils literal notranslate"><span class="pre">create_archive</span></code> requires building everything, it is simpler to just get <code class="docutils literal notranslate"><span class="pre">all</span></code> to depend on <code class="docutils literal notranslate"><span class="pre">create_archive</span></code>. This means we have just one rule to maintain if we add new outputs later on.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pseudo-rule that tries to build everything.</span>
<span class="c1"># Just add all the final outputs that you want built.</span>
<span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s1">&#39;zipf_analysis.tar.gz&#39;</span>
</pre></div>
</div>
</section>
<section id="what-happens-if-snakemake-does-not-have-enough-resources">
<h3>12. What happens if Snakemake does not have enough resources?<a class="headerlink" href="#what-happens-if-snakemake-does-not-have-enough-resources" title="Link to this heading">#</a></h3>
<p>Similar to the case where a rule specifies more threads than are available, the rule still runs.</p>
<p>Resource constraints will limit the maximum number of rules that Snakemake will attempt to run at the same time, but not the minimum.
Where sufficient resources are not available, Snakemake will still run at least one task.</p>
<p>Once again, it is up to the code being run by the rule to check that sufficient resources are actually available.</p>
<p>The Bash <code class="docutils literal notranslate"><span class="pre">if</span></code> test approach used for <code class="docutils literal notranslate"><span class="pre">{threads}</span></code> works equally well to check for minimum required resource values. Just use <code class="docutils literal notranslate"><span class="pre">{resources.gpu}</span></code> (or your actual resource name) to access the value.</p>
</section>
<section id="replace-all-other-duplicated-strings-with-global-variables">
<h3>13. Replace all other duplicated strings with global variables<a class="headerlink" href="#replace-all-other-duplicated-strings-with-global-variables" title="Link to this heading">#</a></h3>
<p>This solution is also available as <code class="docutils literal notranslate"><span class="pre">.solutions/reduce_duplication/Snakefile-remove-duplicates</span></code>.
Possibly the only tricky part is in the <code class="docutils literal notranslate"><span class="pre">clean</span></code> rule where we use
a formatted Python string to build the global variables into the shell
command. We used f-string notation, but <code class="docutils literal notranslate"><span class="pre">string.format</span></code> would also work.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">RESULTS_FILE</span> <span class="o">=</span> <span class="s1">&#39;results.txt&#39;</span>
<span class="n">ARCHIVE_FILE</span> <span class="o">=</span> <span class="s1">&#39;zipf_analysis.tar.gz&#39;</span>

<span class="c1"># a single plot file</span>
<span class="n">PLOT_FILE</span> <span class="o">=</span> <span class="s1">&#39;plots/</span><span class="si">{book}</span><span class="s1">.png&#39;</span>

<span class="c1"># a single dat file</span>
<span class="n">DAT_FILE</span> <span class="o">=</span> <span class="s1">&#39;dats/</span><span class="si">{book}</span><span class="s1">.dat&#39;</span>

<span class="c1"># a single input book</span>
<span class="n">BOOK_FILE</span> <span class="o">=</span> <span class="s1">&#39;books/</span><span class="si">{book}</span><span class="s1">.txt&#39;</span>

<span class="c1"># Build the list of book names.</span>
<span class="n">BOOK_NAMES</span> <span class="o">=</span> <span class="n">glob_wildcards</span><span class="p">(</span><span class="n">BOOK_FILE</span><span class="p">)</span><span class="o">.</span><span class="n">book</span>

<span class="c1"># The list of all dat files</span>
<span class="n">ALL_DATS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">DAT_FILE</span><span class="p">,</span> <span class="n">book</span><span class="o">=</span><span class="n">BOOK_NAMES</span><span class="p">)</span>

<span class="c1"># The list of all plot files</span>
<span class="n">ALL_PLOTS</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">PLOT_FILE</span><span class="p">,</span> <span class="n">book</span><span class="o">=</span><span class="n">BOOK_NAMES</span><span class="p">)</span>

<span class="c1"># pseudo-rule that tries to build everything.</span>
<span class="c1"># Just add all the final outputs that you want built.</span>
<span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">ARCHIVE_FILE</span>

<span class="c1"># Generate summary table</span>
<span class="n">rule</span> <span class="n">zipf_test</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s1">&#39;zipf_test.py&#39;</span><span class="p">,</span>
        <span class="n">dats</span><span class="o">=</span><span class="n">ALL_DATS</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">RESULTS_FILE</span>
    <span class="n">shell</span><span class="p">:</span>  <span class="s1">&#39;python </span><span class="si">{input.cmd}</span><span class="s1"> </span><span class="si">{input.dats}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>

<span class="c1"># delete everything so we can re-run things</span>
<span class="n">rule</span> <span class="n">clean</span><span class="p">:</span>
    <span class="n">shell</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;rm -rf dats/ plots/ </span><span class="si">{</span><span class="n">RESULTS_FILE</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">ARCHIVE_FILE</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="c1"># Count words in one of the books</span>
<span class="n">rule</span> <span class="n">count_words</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s1">&#39;wordcount.py&#39;</span><span class="p">,</span>
        <span class="n">book</span><span class="o">=</span><span class="n">BOOK_FILE</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">DAT_FILE</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python </span><span class="si">{input.cmd}</span><span class="s1"> </span><span class="si">{input.book}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>

<span class="c1"># plot one word count dat file</span>
<span class="n">rule</span> <span class="n">make_plot</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s1">&#39;plotcount.py&#39;</span><span class="p">,</span>
        <span class="n">dat</span><span class="o">=</span><span class="n">DAT_FILE</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">PLOT_FILE</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;python </span><span class="si">{input.cmd}</span><span class="s1"> </span><span class="si">{input.dat}</span><span class="s1"> </span><span class="si">{output}</span><span class="s1">&#39;</span>

<span class="c1"># create an archive with all results</span>
<span class="n">rule</span> <span class="n">create_archive</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">RESULTS_FILE</span><span class="p">,</span> <span class="n">ALL_DATS</span><span class="p">,</span> <span class="n">ALL_PLOTS</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">ARCHIVE_FILE</span>
    <span class="n">shell</span><span class="p">:</span> <span class="s1">&#39;tar -czvf </span><span class="si">{output}</span><span class="s1"> </span><span class="si">{input}</span><span class="s1">&#39;</span>
</pre></div>
</div>
</section>
<section id="combining-global-variables-and-wildcards-in-formatted-strings">
<h3>14 Combining global variables and wildcards in formatted strings<a class="headerlink" href="#combining-global-variables-and-wildcards-in-formatted-strings" title="Link to this heading">#</a></h3>
<p>No example code is given here. By this stage you should be able to trust your
own judgement.</p>
<p>If you really need it, a full example of the entire workflow with no duplication and all configurable values moved into a configuration file is in <a class="reference external" href="https://github.com/Software-Engineering-Group-UP/RSE-UP/tree/main/zipf/snakemake">here on Github</a>. .</p>
<p>Note that the example uses <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings">f-strings</a>, which are only available in Python 3.6
and higher.</p>
<p>If you must use an older version of Python then you can use the older string formatting
methods, although the results will be less concise.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../exercises/provenance.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exercises - Provenance</p>
      </div>
    </a>
    <a class="right-next"
       href="working_remotely.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Working Remotely</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-basics">Chapter Bash Basics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-4">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-5">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-6">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-7">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-8">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-9">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-10">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-11">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-12">Exercise 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-13">Exercise 13</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-14">Exercise 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-15">Exercise 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-16">Exercise 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-17">Exercise 17</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-tools">Chapter Bash-Tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Exercise 12</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-bash-advanced">Chapter Bash Advanced</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Exercise 9</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Exercise 10</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-python-cli">Chapter Python CLI</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Exercise 3</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-introduction-to-version-control">Chapter Introduction to Version Control</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id34">Exercise 10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id35">Exercise 11</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id36">Exercise 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id37">Exercise 13</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id38">Exercise 14</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id39">Exercise 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id40">Exercise 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id41">Exercise 17</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-18">Exercise 18</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-git-advanced">Chapter Git Advanced</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id42">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id43">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id44">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id45">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id46">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id47">Exercise 6</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-working-in-teams">Chapter Working in Teams</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id48">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id49">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id50">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id51">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id52">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id53">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id54">Exercise 7</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id55">Exercise 8</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id56">Exercise 9</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-configuration">Chapter Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id57">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id58">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id59">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id60">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id61">Exercise 5</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-testing">Chapter Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id62">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id63">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id64">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id65">Exercise 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-error-handling">Chapter Error Handling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id66">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id67">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id68">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id69">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id70">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id71">Exercise 6</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-tracking-provenance">Chapter Tracking Provenance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id72">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id73">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id74">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id76">Exercise 4</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id78">Exercise 5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id79">Exercise 6</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id80">Exercise 7</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-packaging">Chapter Packaging</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id81">Exercise 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id82">Exercise 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id83">Exercise 3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id84">Exercise 4</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#snakemake-exercise-solutions">Snakemake Exercise Solutions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#write-two-new-rules">1. Write two New Rules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-dependencies">2. Update Dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rewrite-dat-rules-to-use-wildcards">3. Rewrite .dat rules to use wildcards</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-one-input-file">4. Updating One Input File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-zipf-test-rule">5. Updating Zipf_test rule</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-it-all-together">6. Putting it all Together</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-the-dat-files">7. Moving the <code class="docutils literal notranslate"><span class="pre">dat</span></code> files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-pngs">8. Creating PNGs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-plots">9. Generating Plots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-an-archive">10. Creating an Archive</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-happens-if-snakemake-does-not-have-enough-resources">12. What happens if Snakemake does not have enough resources?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-all-other-duplicated-strings-with-global-variables">13. Replace all other duplicated strings with global variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-global-variables-and-wildcards-in-formatted-strings">14 Combining global variables and wildcards in formatted strings</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Software Engineering Group - University of Potsdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>