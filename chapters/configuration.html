
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuring Programs &#8212; RSE-UP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css?v=c89437f7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/configuration';</script>
    <link rel="canonical" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/configuration.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="YAML" href="yaml.html" />
    <link rel="prev" title="Introduction to Configuration" href="introduction/config.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">RSE-UP</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python, Bash and Git Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_refresher.html">Python Refresher</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/bash.html">Introduction to Bash</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="bash_basics.html">The Basics of the Unix Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_basics.html">Bash Basics Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_tools.html">Building Tools with the Unix Shell</a></li>

<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_tools.html">Bash Tool Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_advanced.html">Bash Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/bash_advanced.html">Bash Advanced Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/vcs.html">Version Control</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_version_control.html">Using Git at the Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/version_control.html">Exercise Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_ssh-key.html">Using SSH on Gitlab and Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit_messages.html">Writing good commit messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_advanced.html">Going Further with Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_advanced_github.html">Forking on Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/git_advanced.html">Exercises Git Advanced</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Writing Clean Code</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clean_readable_code.html">Writing Readable Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/clean_code.html">Exercises - Clean Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_documentation.html">Documenting Programs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/documentation.html">Introduction to writing Documentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computational Narrative</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction/jupyter.html">Introduction to Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="anaconda.html">Working with Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp_narative.html">Story Telling with Data Computational Narrative</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Licenses, Software Citation and FAIR</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses, Software Citation and FAIR</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working in teams</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_in_teams.html">Working in Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/work_teams.html">Exercise - Work Teams</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Requirements, Architecture and Design</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/requirements_architecture_design.html">Application Classes, Software Requirements, Architecture and Design</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="application_classes.html">Application Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Software Development Process and Requirements Engineering in RSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture_design.html">Architecture and Design</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing, Error Handling and CLI Apps using Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/python_cli.html">Introduction to CLI application using Python</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/python_cli.html">Exercises - Scripting Python for CLI tools</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/testing.html">Introduction to Testing</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="testing_programs.html">Testing Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/testing.html">Exercises - Testing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/error_handling.html">Introduction to Error Handling</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="error_handling.html">Handling Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/error_handling.html">Exercises - Error Handling</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration and Packaging</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="introduction/config.html">Introduction to Configuration</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Configuring Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml.html">YAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/config.html">Exercises - Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/packaging.html">Introduction to Packaging Python Software</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="python_packaging.html">Creating Packages with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/packaging.html">Exercises - Packaging</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows and Automation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/workflows.html">Introduction to Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="workflow.html">Introduction to Workflows</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="introduction/automation.html">Introduction to Make and Snakemake</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_make.html">Automating Analyses with Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/intro_make.html">Exercises - Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_snakemake.html">Introduction to Snakemake</a></li>
<li class="toctree-l2"><a class="reference internal" href="snakemake_continued.html">Snakemake Continued</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/snakemake.html">Snakemake Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction/cicd.html">Introduction to CI/CD</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tracking Provenance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tracking_provenance.html">Tracking Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/provenance.html">Exercises - Provenance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="solutions.html">Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_remotely.html">Working Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Project Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP/issues/new?title=Issue%20on%20page%20%2Fchapters/configuration.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/configuration.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Configuring Programs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-file-formats">Configuration File Formats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-configuration">Matplotlib Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-global-configuration-file">The Global Configuration File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-user-configuration-file">The User Configuration File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-command-line-options">Adding Command-Line Options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-job-control-file">A Job Control File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="configuring-programs">
<h1>Configuring Programs<a class="headerlink" href="#configuring-programs" title="Link to this heading">#</a></h1>
<p>In this chapter, we’ll explore a number approaches for configuring our Zipf’s Law project,
and ultimately decide to apply one of them.</p>
<p>That project should now contain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>zipf/
├── .gitignore
├── CONDUCT.md
├── CONTRIBUTING.md
├── LICENSE.md
├── Makefile
├── README.md
├── bin
│   ├── book_summary.sh
│   ├── collate.py
│   ├── countwords.py
│   ├── plotcounts.py
│   ├── script_template.py
│   └── utilities.py
├── data
│   ├── README.md
│   ├── dracula.txt
│   └── ...
└── results
    ├── collate.csv
    ├── collate.png
    ├── dracula.csv
    ├── dracula.png
    └── ...
</pre></div>
</div>
<blockquote>
<div><p><strong>Be Careful When Applying Settings outside Your Project</strong></p>
<p>This chapter’s examples modify files outside of the Zipf’s Law project
in order to illustrate some concepts.
If you alter these files while following along,
remember to change them back later.</p>
</div></blockquote>
<section id="configuration-file-formats">
<h2>Configuration File Formats<a class="headerlink" href="#configuration-file-formats" title="Link to this heading">#</a></h2>
<p>Programmers have invented far too many formats for configuration files;
rather than creating one of your own,
you should adopt some widely used approach.
One is to write the configuration as a Python module
and load it as if it was a library.
This is clever,
but means that tools in other languages can’t process it.</p>
<p>A second option is <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/">Windows INI format</a>,
which is laid out like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[section1]</span>
<span class="na">key1</span><span class="o">=</span><span class="s">value1</span>
<span class="na">key2</span><span class="o">=</span><span class="s">value2</span>

<span class="k">[section2]</span>
<span class="na">key3</span><span class="o">=</span><span class="s">value3</span>
<span class="na">key4</span><span class="o">=</span><span class="s">value4</span>
</pre></div>
</div>
<p>INI files are simple to read and write,
but the format is slowly falling out of use in favor of <strong>YAML</strong>.
A simple YAML configuration file looks like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard settings for thesis.</span>
<span class="nt">logfile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/log.txt&quot;</span>
<span class="nt">quiet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">overwrite</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">fonts</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Verdana</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Serif</span>
</pre></div>
</div>
<p>Here,
the keys <code class="docutils literal notranslate"><span class="pre">logfile</span></code>, <code class="docutils literal notranslate"><span class="pre">quiet</span></code>, and <code class="docutils literal notranslate"><span class="pre">overwrite</span></code>
have the values <code class="docutils literal notranslate"><span class="pre">/tmp/log.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, and <code class="docutils literal notranslate"><span class="pre">false</span></code> respectively,
while the value associated with the key <code class="docutils literal notranslate"><span class="pre">fonts</span></code>
is a list containing <code class="docutils literal notranslate"><span class="pre">Verdana</span></code> and <code class="docutils literal notranslate"><span class="pre">Serif</span></code>.
For more discussion of YAML, see <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/yaml.html">Appendix - YAML</a>.</p>
</section>
<section id="matplotlib-configuration">
<h2>Matplotlib Configuration<a class="headerlink" href="#matplotlib-configuration" title="Link to this heading">#</a></h2>
<p>To see overlay configuration in action,
let’s consider a common task in data science:
changing the size of the labels on a plot.
The labels on our <em>Jane Eyre</em> word frequency plot are fine for viewing on screen
(<a class="reference internal" href="#configuartion-jane-eyre-default"><span class="xref myst">Figure Config Jane Eyre Default</span></a>),
but they will need to be bigger if we want to include the figure in a slideshow or report.</p>
<figure class="align-default" id="configuration-jane-eyre-default">
<img alt="../_images/jane-eyre-default.png" src="../_images/jane-eyre-default.png" />
<figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Configuration example Jane Eyre</span><a class="headerlink" href="#configuration-jane-eyre-default" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>We could use any of the overlay options described above
to change the size of the labels:</p>
<ul class="simple">
<li><p>Edit the system-wide Matplotlib configuration file
(which would affect everyone using this computer).</p></li>
<li><p>Create a user-specific Matplotlib style sheet.</p></li>
<li><p>Create a job-specific configuration file to set plotting options in <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>.</p></li>
<li><p>Add some new command-line options to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> .</p></li>
</ul>
<p>Let’s consider these options one by one.</p>
</section>
<section id="the-global-configuration-file">
<h2>The Global Configuration File<a class="headerlink" href="#the-global-configuration-file" title="Link to this heading">#</a></h2>
<p>Our first configuration possibility is to edit the system-wide Matplotlib runtime configuration file, when we import Matplotlib,
it uses this file to set the default characteristics of the plot.
We can find it on our system by running this command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">matplotlib_fname</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/amira/anaconda3/lib/python3.7/site-packages/matplotlib/
mpl-data/matplotlibrc
</pre></div>
</div>
<p>In this case the file is located in the Python installation directory (<code class="docutils literal notranslate"><span class="pre">anaconda3</span></code>).
All the different Python packages installed with Anaconda
live in a <code class="docutils literal notranslate"><span class="pre">python3.7/site-packages</span></code> directory,
including Matplotlib.</p>
<p><code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> lists all the default settings as comments.
The default size of the X and Y axis labels is “medium”,
as is the size of the tick labels:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">#axes.labelsize    : medium  ## fontsize of the x and y labels</span>
<span class="c1">#xtick.labelsize   : medium  ## fontsize of the tick labels</span>
<span class="c1">#ytick.labelsize   : medium  ## fontsize of the tick labels</span>
</pre></div>
</div>
<p>We can uncomment those lines and change the sizes to “large” and “extra large”:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">axes.labelsize     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">x-large</span><span class="w">  </span><span class="c1">## fontsize of the x and y labels</span>
<span class="nt">xtick.labelsize    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">large</span><span class="w">    </span><span class="c1">## fontsize of the tick labels</span>
<span class="nt">ytick.labelsize    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">large</span><span class="w">    </span><span class="c1">## fontsize of the tick labels</span>
</pre></div>
</div>
<p>and then re-generate the <em>Jane Eyre</em> plot with bigger labels
(<a class="reference internal" href="#configuration-jane-eyre-big-labels"><span class="std std-ref">Figure JE Labels</span></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="n">python</span> <span class="nb">bin</span><span class="o">/</span><span class="n">plotcounts</span><span class="o">.</span><span class="n">py</span> <span class="n">results</span><span class="o">/</span><span class="n">jane_eyre</span><span class="o">.</span><span class="n">csv</span> <span class="o">--</span><span class="n">outfile</span>
  <span class="n">results</span><span class="o">/</span><span class="n">jane_eyre</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<figure class="align-default" id="configuration-jane-eyre-big-labels">
<img alt="../_images/jane-eyre-big-labels.png" src="../_images/jane-eyre-big-labels.png" />
<figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">Jane Eyre Config labels</span><a class="headerlink" href="#configuration-jane-eyre-big-labels" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>This does what we want,
but is usually the wrong approach.
Since the <code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> file sets system-wide defaults,
we will now have big labels by default for all plotting we do in the future,
which we may not want.
Secondly,
we want to package our Zipf’s Law code and make it available to other people (Chapter <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/packaging.html">packaging</a>).
That package won’t include our <code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> file,
and we don’t have access to the one on their computer,
so this solution isn’t as reproducible as others.</p>
<p>A global options file <em>is</em> useful, though.
If we are using Matplotlib with <strong>LaTeX</strong> to generate reports
and the latter is installed in an unusual place on our computing cluster,
a one-line change in <code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> can prevent a lot of failed jobs.</p>
</section>
<section id="the-user-configuration-file">
<h2>The User Configuration File<a class="headerlink" href="#the-user-configuration-file" title="Link to this heading">#</a></h2>
<p>If we don’t want to change the configuration for everyone,
we can change it for just ourself.
Matplotlib defines several carefully designed styles for plots:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="nb">print</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">available</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;seaborn-dark&#39;, &#39;seaborn-darkgrid&#39;, &#39;seaborn-ticks&#39;,
&#39;fivethirtyeight&#39;, &#39;seaborn-whitegrid&#39;, &#39;classic&#39;,
&#39;_classic_test&#39;, &#39;fast&#39;, &#39;seaborn-talk&#39;, &#39;seaborn-dark-palette&#39;,
&#39;seaborn-bright&#39;, &#39;seaborn-pastel&#39;, &#39;grayscale&#39;,
&#39;seaborn-notebook&#39;, &#39;ggplot&#39;, &#39;seaborn-colorblind&#39;,
&#39;seaborn-muted&#39;, &#39;seaborn&#39;, &#39;Solarize_Light2&#39;, &#39;seaborn-paper&#39;,
&#39;bmh&#39;, &#39;tableau-colorblind10&#39;, &#39;seaborn-white&#39;,
&#39;dark_background&#39;, &#39;seaborn-poster&#39;, &#39;seaborn-deep&#39;]
</pre></div>
</div>
<p>In order to make the labels bigger in all of our Zipf’s Law plots,
we could create a custom Matplotlib style sheet.
The convention is to store custom style sheets in a <code class="docutils literal notranslate"><span class="pre">stylelib</span></code> sub-directory
in the Matplotlib configuration directory.
That directory can be located by running the following command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mpl</span><span class="o">.</span><span class="n">get_configdir</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/Users/amira/.matplotlib
</pre></div>
</div>
<p>Once we’ve created the new sub-directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>/Users/amira/.matplotlib/stylelib
</pre></div>
</div>
<p>we can add a new file called <code class="docutils literal notranslate"><span class="pre">big-labels.mplstyle</span></code>
that has the same YAML format as the <code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">axes</span><span class="o">.</span><span class="n">labelsize</span>   <span class="p">:</span> <span class="n">x</span><span class="o">-</span><span class="n">large</span>  <span class="c1">## fontsize of the x and y labels</span>
<span class="n">xtick</span><span class="o">.</span><span class="n">labelsize</span>  <span class="p">:</span> <span class="n">large</span>    <span class="c1">## fontsize of the tick labels</span>
<span class="n">ytick</span><span class="o">.</span><span class="n">labelsize</span>  <span class="p">:</span> <span class="n">large</span>    <span class="c1">## fontsize of the tick labels</span>
</pre></div>
</div>
<p>To use this new style,
we would just need to add one line to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;big-labels&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a custom style sheet leaves the system-wide defaults unchanged,
and it’s a good way to achieve a consistent look across our personal data visualization projects.
However,
since each user has their own <code class="docutils literal notranslate"><span class="pre">stylelib</span></code> directory,
it doesn’t solve the problem of ensuring that other people can reproduce our plots.</p>
</section>
<section id="adding-command-line-options">
<h2>Adding Command-Line Options<a class="headerlink" href="#adding-command-line-options" title="Link to this heading">#</a></h2>
<p>A third way to change the plot’s properties
is to add some new command-line arguments to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>.
The <code class="docutils literal notranslate"><span class="pre">choices</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">add_argument</span></code> lets us tell <code class="docutils literal notranslate"><span class="pre">argparse</span></code>
that the user is only allowed to specify a value from a predefined list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mpl_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xx-small&#39;</span><span class="p">,</span> <span class="s1">&#39;x-small&#39;</span><span class="p">,</span> <span class="s1">&#39;small&#39;</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span>
             <span class="s1">&#39;large&#39;</span><span class="p">,</span> <span class="s1">&#39;x-large&#39;</span><span class="p">,</span> <span class="s1">&#39;xx-large&#39;</span><span class="p">]</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--labelsize&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;x-large&#39;</span><span class="p">,</span>
                    <span class="n">choices</span><span class="o">=</span><span class="n">mpl_sizes</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;fontsize of the x and y labels&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--xticksize&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span>
                    <span class="n">choices</span><span class="o">=</span><span class="n">mpl_sizes</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;fontsize of the x tick labels&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--yticksize&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;large&#39;</span><span class="p">,</span>
                    <span class="n">choices</span><span class="o">=</span><span class="n">mpl_sizes</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;fontsize of the y tick labels&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can then add a few lines after the <code class="docutils literal notranslate"><span class="pre">ax</span></code> variable is defined in <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>
to update the label sizes according to the user input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">labelsize</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">labelsize</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">xticksize</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">yticksize</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively,
we can change the default runtime configuration settings before the plot is created.
These are stored in a variable called <code class="docutils literal notranslate"><span class="pre">matplotlib.rcParams</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">labelsize</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">xticksize</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">yticksize</span>
</pre></div>
</div>
<p>Adding extra command-line arguments is a good solution
if we only want to change a small number of plot characteristics.
It also makes our work more reproducible:
if we use a Makefile to regenerate our plots (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/intro_make.md">Chapter Intro to make</a>),
the settings will all be saved in one place.
However,
<code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> has hundreds of parameters we could change,
so the number of new arguments can quickly get out of hand
if we want to tweak other aspects of the plot.</p>
</section>
<section id="a-job-control-file">
<h2>A Job Control File<a class="headerlink" href="#a-job-control-file" title="Link to this heading">#</a></h2>
<p>The final option for configuring our plots—the one we will actually adopt in this case—is
to pass a YAML file full of Matplotlib parameters to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>.
First,
we save the parameters we want to change in a file inside our project directory.
We can call it anything,
but <code class="docutils literal notranslate"><span class="pre">plotparams.yml</span></code> seems like it will be easy to remember.
We’ll store it in <code class="docutils literal notranslate"><span class="pre">bin</span></code> with the scripts that will use it:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot characteristics</span>
<span class="nt">axes.labelsize   </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">x-large</span><span class="w">  </span><span class="c1">## fontsize of the x and y labels</span>
<span class="nt">xtick.labelsize  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">large</span><span class="w">    </span><span class="c1">## fontsize of the tick labels</span>
<span class="nt">ytick.labelsize  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">large</span><span class="w">    </span><span class="c1">## fontsize of the tick labels</span>
</pre></div>
</div>
<p>Because this file is located in our project directory
instead of the user-specific style sheet directory,
we need to add one new option to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> to load it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plotparams&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;matplotlib parameters (YAML file)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can use Python’s <code class="docutils literal notranslate"><span class="pre">yaml</span></code> library to read that file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;plotparams.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
    <span class="n">plot_params</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">BaseLoader</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">plot_params</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;axes.labelsize&#39;: &#39;x-large&#39;,
 &#39;xtick.labelsize&#39;: &#39;large&#39;,
 &#39;ytick.labelsize&#39;: &#39;large&#39;}
</pre></div>
</div>
<p>and then loop over each item in <code class="docutils literal notranslate"><span class="pre">plot_params</span></code> to update Matplotlib’s <code class="docutils literal notranslate"><span class="pre">mpl.rcParams</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> now looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot word counts.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize_scalar</span>


<span class="k">def</span> <span class="nf">nlog_likelihood</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
    <span class="c1"># ...as before...</span>


<span class="k">def</span> <span class="nf">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">):</span>
    <span class="c1"># ...as before...</span>


<span class="k">def</span> <span class="nf">set_plot_params</span><span class="p">(</span><span class="n">param_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the matplotlib parameters.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">param_file</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">param_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">param_dict</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span>
                                   <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">BaseLoader</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">param_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>


<span class="k">def</span> <span class="nf">plot_fit</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">,</span> <span class="n">max_rank</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
    <span class="c1"># ...as before...</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">set_plot_params</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">plotparams</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;word_frequency&#39;</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                           <span class="n">method</span><span class="o">=</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">,</span>
                         <span class="n">y</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">,</span> <span class="n">loglog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
                         <span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">xlim</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">xlim</span><span class="p">)</span>

    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;alpha:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

    <span class="c1"># Since the ranks are already sorted, we can take the last</span>
    <span class="c1"># one instead of computing which row has the highest rank</span>
    <span class="n">max_rank</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Use the range of the data as the boundaries</span>
    <span class="c1"># when drawing the power law curve</span>
    <span class="n">curve_xmin</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">curve_xmax</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="n">plot_fit</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">,</span> <span class="n">max_rank</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Word count csv file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--outfile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="s1">&#39;plotcounts.png&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output image file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--xlim&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                        <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;XMIN&#39;</span><span class="p">,</span> <span class="s1">&#39;XMAX&#39;</span><span class="p">),</span>
                        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;X-axis limits&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plotparams&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;matplotlib parameters (YAML file)&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>Programs are only useful if they can be controlled,
and work is only reproducible if those controls are explicit and shareable.
If the number of controls needed is small,
adding command-line options to programs and setting those options in Makefiles
is usually the best solution.
As the number of options grows,
so too does the value of putting options in files of their own.
And if we are installing the software on large systems that are used by many people,
such as a research cluster,
system-wide configuration files let us hide the details
from people who just want to get their science done.</p>
<p>More generally,
the problem of configuring a program illustrates the difference
between “works for me on my machine”
and “works for everyone, everywhere.”
From reproducible workflows (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/intro_make.html">Chapter make</a> or <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/snakemake.html">chapter workflows with snakemake</a> to logging (<a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/error_handling.md#reporting-errors.html">Section Reporting Errors</a>),
this difference influences every aspect of a research software engineer’s work.
We don’t always have to design for large-scale re-use,
but knowing what it entails allows us to make a conscious, thoughtful choice.</p>
</section>
<section id="keypoints">
<h2>Keypoints<a class="headerlink" href="#keypoints" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Overlay configuration</strong> specifies settings for a program in layers,
each of which overrides previous layers.</p></li>
<li><p>Use a system-wide configuration file for general settings.</p></li>
<li><p>Use a user-specific configuration file for personal preferences.</p></li>
<li><p>Use a job-specific configuration file with settings for a particular run.</p></li>
<li><p>Use command-line options to change things that commonly change.</p></li>
<li><p>Use <strong>YAML</strong> or some other standard syntax to write configuration files.</p></li>
<li><p>Save configuration information to make your research <strong>reproducible</strong>.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="introduction/config.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to Configuration</p>
      </div>
    </a>
    <a class="right-next"
       href="yaml.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">YAML</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-file-formats">Configuration File Formats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-configuration">Matplotlib Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-global-configuration-file">The Global Configuration File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-user-configuration-file">The User Configuration File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-command-line-options">Adding Command-Line Options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-job-control-file">A Job Control File</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Software Engineering Group - University of Potsdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>