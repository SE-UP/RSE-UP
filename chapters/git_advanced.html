

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Going Further with Git &#8212; RSE-ING</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/git_advanced';</script>
    <link rel="canonical" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/git_advanced.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Exercises Git Advanced" href="../exercises/git_advanced.html" />
    <link rel="prev" title="Exercise Version Control" href="../exercises/version_control.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">RSE-ING</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/guide.html">Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bash and the CLI</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="bash_basics.html">The Basics of the Unix Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash_tools.html">Building Tools with the Unix Shell</a></li>

<li class="toctree-l1"><a class="reference internal" href="bash_advanced.html">Going Further with the Unix Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/bash.html">Bash Exercises</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Building CLI with Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="python_building_cli.html">Building Command-Line Tools with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/python_cli.html">Exercises Scripting Python for CLI tools</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Version Control</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_version_control.html">Using Git at the Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/version_control.html">Exercise Version Control</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Going Further with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/git_advanced.html">Exercises Git Advanced</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working in teams</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_in_teams.html">Working in Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/work_teams.html">Exercise - Work Teams</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to automation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro_make.html">Automating Analyses with Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/intro_make.html">Exercises - Make</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuring Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/config.html">Exercises - Configuration</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing Software</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="testing_programs.html">Testing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/testing.html">Exercises - Testing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Error Handling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">Handling Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/error_handling.html">Exercises - Error Handling</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tracking Provenance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tracking_provenance.html">Tracking Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/provenance.html">Exercises - Provenance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Packaging</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="python_packaging.html">Creating Packages with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/packaging.html">Exercises - Packaging</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Writing Clean Code</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="clean_readable_code.html">Writing Readable Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="writing_documentation.html">Documenting Programs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflows</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Introduction to Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="snakemake.html">Snake Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_cicd.html">CI/CD</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheets - Course Work</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet1_python_refresher.html">Worksheet 1 - Python refresher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet2_install_more_tool_shell.html">Worksheet 2 - Installing more Tools, working with the Unix SHell, Getting Started with the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet3_cli_python_git.html">Worksheet 3 - Command Line Tools with Python , Git and the Command Line, Git UP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet4_readable_code.html">Worksheet 4 - Readable Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet6_software_license.html">Worksheet 6 - Software Licensing, Citation and FAIR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../worksheets/worksheet7_git_advanced.html">Worksheet 8 - Going further with Git</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">First Project - Invdividual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/1_project_instructions.html">Project Assignment 1: Select a Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/2_project_instructions.html">Project Assignment 2: Setting Up the Repository on Git.UP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/3_project_instructions.html">Project Assignment 4: Start Coding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/4_project_instructions.html">Project Assignment 4: More Code, a Notebook, and a README.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/5_project_instructions.html">Project Assignment 5: Add License and Citation Informatoon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/individual/6_project_instructions.html">Project Assignment 6:</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Second Project - Group</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projects/group/1_project_assignment.html">Project Assignment: Form Groups for Second Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/group/2_project_assignment.html">Project Assignment 2: Name, Idea and Basic Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/group/3_project_assignment.html">Project Assignment 3: Requirements, Architecture, Design and Implementation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="anaconda.html">Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">YAML</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_remotely.html">Working Remotely</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Software-Engineering-Group-UP/RSE-UP/issues/new?title=Issue%20on%20page%20%2Fchapters/git_advanced.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/git_advanced.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Going Further with Git</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-s-a-branch">What’s a Branch?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-branch">Creating a Branch</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-curve-should-we-fit">What Curve Should We Fit?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verifying-zipf-s-law">Verifying Zipf’s Law</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#merging">Merging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-conflicts">Handling Conflicts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-branch-based-workflow">A Branch-Based Workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-other-people-s-work">Using Other People’s Work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pull-requests">Pull Requests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-conflicts-in-pull-requests-git-advanced-pr-conflict">Handling Conflicts in Pull Requests {#git-advanced-pr-conflict}</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="going-further-with-git">
<h1>Going Further with Git<a class="headerlink" href="#going-further-with-git" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p>It’s got three keyboards and a hundred extra knobs, including twelve with ‘?’ on them.</p>
<p>— Terry Pratchett</p>
</div></blockquote>
<p>Two of Git’s advanced features let us to do much more than just track our work.
<strong>Branches</strong> let us work on multiple things simultaneously in a single repository; <strong>pull requests</strong> (PRs) let us submit our work for review,
get feedback, and make updates. Used together, they allow us to go through the write-review-revise cycle familiar to anyone who has ever written a journal paper in hours rather than weeks.</p>
<p>Your <code class="docutils literal notranslate"><span class="pre">zipf</span></code> project directory should now include:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>zipf/
├── .gitignore
├── bin
│   ├── book_summary.sh
│   ├── collate.py
│   ├── countwords.py
│   ├── plotcounts.py
│   ├── script_template.py
│   └── utilities.py
├── data
│   ├── README.md
│   ├── dracula.txt
│   ├── frankenstein.txt
│   └── ...
└── results
    ├── dracula.csv
    ├── dracula.png
    ├── jane_eyre.csv
    ├── jane_eyre.png
    └── moby_dick.csv
</pre></div>
</div>
<p>All of these files should also be tracked in your version history.
We’ll use them and some additional analyses to explore Zipf’s Law
using Git’s advanced features.</p>
<section id="what-s-a-branch">
<h2>What’s a Branch?<a class="headerlink" href="#what-s-a-branch" title="Permalink to this heading">#</a></h2>
<p>So far we have only used a sequential timeline with Git:
each change builds on the one before,
and <em>only</em> on the one before.
However,
there are times when we want to try things out
without disrupting our main work.
To do this, we can use <strong>branches</strong> to work on separate tasks in parallel.
Each branch is a parallel timeline; changes made on the branch only affect that branch unless and until we explicitly combine them with work done in another branch.</p>
<p>We can see what branches exist in a repository using this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>* master
</pre></div>
</div>
<p>When we initialize a repository, Git automatically creates a branch called <code class="docutils literal notranslate"><span class="pre">master</span></code>. It is often considered the “official” version of the repository.
The asterisk <code class="docutils literal notranslate"><span class="pre">*</span></code> indicates that it is currently active,
i.e., that all changes we make will take place in this branch by default.
(The active branch is like the <strong>current working directory</strong> in the shell.)</p>
<blockquote>
<div><p><strong>Default Branches</strong></p>
<p>In mid-2020,
GitHub changed the name of the default branch
(the first branch created when a repository is initialized)
from “master” to “main.”
Owners of repositories may also change the name of the default branch.
This means that the name of the default branch may be different among repositories
based on when and where it was created,
as well as who manages it.</p>
</div></blockquote>
<p>In the previous chapter, we foreshadowed some experimental changes that we could try and make to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>.</p>
<p>Making sure our project directory is our working directory, we can inspect our current <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/zipf
$<span class="w"> </span>cat<span class="w"> </span>bin/plotcounts.py
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot word counts.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;word_frequency&#39;</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                           <span class="n">method</span><span class="o">=</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">,</span>
                         <span class="n">y</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">,</span> <span class="n">loglog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
                         <span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">xlim</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">xlim</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Word count csv file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--outfile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="s1">&#39;plotcounts.png&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output image file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--xlim&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                        <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;XMIN&#39;</span><span class="p">,</span> <span class="s1">&#39;XMAX&#39;</span><span class="p">),</span>
                        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;X-axis limits&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>We used this version of <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> to display the word counts for <em>Dracula</em> on a log-log plot (<a class="reference internal" href="#git-cmdline-loglog-plot"><span class="std std-ref">Figure</span></a>).
The relationship between word count and rank looked linear,
but since the eye is easily fooled,
we should fit a curve to the data.
Doing this will require more than just a trivial change to the script,
so to ensure that this version of <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> keeps working
while we try to build a new one,
we will do our work in a separate branch.
Once we have successfully added curve fitting to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code>,
we can decide if we want to merge our changes back into the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p>
<figure class="align-default" id="git-cmdline-loglog-plot">
<img alt="../_images/plot-loglog.png" src="../_images/plot-loglog.png" />
<figcaption>
<p><span class="caption-number">Fig. 15 </span><span class="caption-text">Git Command line LogLog plot</span><a class="headerlink" href="#git-cmdline-loglog-plot" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="creating-a-branch">
<h2>Creating a Branch<a class="headerlink" href="#creating-a-branch" title="Permalink to this heading">#</a></h2>
<p>To create a new branch called <code class="docutils literal notranslate"><span class="pre">fit</span></code>,
we run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>fit
</pre></div>
</div>
<p>We can check that the branch exists by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>* master
  fit
</pre></div>
</div>
<p>Our branch is there, but the asterisk <code class="docutils literal notranslate"><span class="pre">*</span></code> shows that we are still in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch. (By analogy, creating a new directory doesn’t automatically move us into that directory.) As a further check, let’s see what our repository’s status is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>status
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>On branch master
nothing to commit, working directory clean
</pre></div>
</div>
<p>To switch to our new branch we can use the <code class="docutils literal notranslate"><span class="pre">checkout</span></code> command that we first saw in Chapter <a class="reference external" href="https://software-engineering-group-up.github.io/RSE-UP/chapters/intro_version_control.html">git command line</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>fit
$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  master
* fit
</pre></div>
</div>
<p>In this case, we’re using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> to check out a whole repository,
i.e., switch it from one saved state to another.</p>
<p>We should choose the name to signal the purpose of the branch,
just as we choose the names of files and variables to indicate what they are for.
We haven’t made any changes since switching to the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch,
so at this point <code class="docutils literal notranslate"><span class="pre">master</span></code> and <code class="docutils literal notranslate"><span class="pre">fit</span></code> are at the same point in the repository’s history.
Commands like <code class="docutils literal notranslate"><span class="pre">ls</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> therefore show that the files and history haven’t changed.</p>
<blockquote>
<div><p><strong>Where Are Branches Saved?</strong></p>
<p>Git saves every version of every file in the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory
that it creates in the project’s root directory.
When we switch from one branch to another,
it replaces the files we see with
their counterparts from the branch we’re switching to.
It also rearranges directories as needed
so that those files are in the right places.</p>
</div></blockquote>
</section>
<section id="what-curve-should-we-fit">
<h2>What Curve Should We Fit?<a class="headerlink" href="#what-curve-should-we-fit" title="Permalink to this heading">#</a></h2>
<p>Before we make any changes to our new branch, we need to figure out how to fit a line to the word count data. Zipf’s Law says:</p>
<blockquote>
<div><p>The second most common word in a body of text
appears half as often as the most common,
the third most common appears a third as often, and so on.</p>
</div></blockquote>
<p>In other words
the frequency of a word <span class="math notranslate nohighlight">\(f\)</span> is proportional to its inverse rank <span class="math notranslate nohighlight">\(r\)</span>:</p>
<p><span class="math notranslate nohighlight">\( f \propto \frac{1}{r^\alpha} \)</span></p>
<p>with a value of <span class="math notranslate nohighlight">\(\alpha\)</span> close to one.
The reason <span class="math notranslate nohighlight">\(\alpha\)</span> must be close to one for Zipf’s Law to hold
becomes clear if we include it in a modified version of the earlier definition:</p>
<blockquote>
<div><p>The most frequent word will occur approximately <span class="math notranslate nohighlight">\(2^\alpha\)</span> times
as often as the second most frequent word,
<span class="math notranslate nohighlight">\(3^\alpha\)</span> times as often as the third most frequent word, and so on.</p>
</div></blockquote>
<p>This mathematical expression for Zipf’s Law is an example of a <strong>power law</strong>.
In general, when two variables <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are related through a power law, so that
<span class="math notranslate nohighlight">\( y = ax^b \)</span>
taking logarithms of both sides yields a linear relationship:</p>
<p><span class="math notranslate nohighlight">\( \log(y) = \log(a) + b\log(x) \)</span></p>
<p>Hence, plotting the variables on a log-log scale reveals this linear relationship. If Zipf’s Law holds, we should have</p>
<p><span class="math notranslate nohighlight">\( r = cf^{\frac{-1}{\alpha}} \)</span></p>
<p>where <span class="math notranslate nohighlight">\(c\)</span> is a constant of proportionality.
The linear relationship between the log word frequency and log rank is then</p>
<p><span class="math notranslate nohighlight">\( \log(r) = \log(c) - \frac{1}{\alpha}\log(f) \)</span></p>
<p>This suggests that the points on our log-log plot should fall on a straight  line with a slope of <span class="math notranslate nohighlight">\(- \tfrac{1}{\alpha}\)</span> and intercept <span class="math notranslate nohighlight">\(\log(c)\)</span>.
To fit a line to our word count data we therefore need to estimate the value of <span class="math notranslate nohighlight">\(\alpha\)</span>; we’ll see later that <span class="math notranslate nohighlight">\(c\)</span> is completely defined.</p>
<p>In order to determine the best method for estimating <span class="math notranslate nohighlight">\(\alpha\)</span>, we turn to <span id="id1">[<a class="reference internal" href="references.html#id53" title="Isabel Moreno-Sánchez, Francesc Font-Clos, and Álvaro Corral. Large-scale Analysis of Zipf's Law in English Texts. PLoS ONE, 11(1):e0147073, Jan 2016. doi:10.1371/journal.pone.0147073.">Moreno-Sánchez <em>et al.</em>, 2016</a>]</span>, which suggests using a method called <strong>maximum likelihood estimation</strong>. The likelihood function is the probability of our observed data
as a function of the parameters in the statistical model that we assume generated it. We estimate the parameters in the model by choosing them to maximize this likelihood; computationally, it is often easier to minimize the negative log likelihood function. <span id="id2">[<a class="reference internal" href="references.html#id53" title="Isabel Moreno-Sánchez, Francesc Font-Clos, and Álvaro Corral. Large-scale Analysis of Zipf's Law in English Texts. PLoS ONE, 11(1):e0147073, Jan 2016. doi:10.1371/journal.pone.0147073.">Moreno-Sánchez <em>et al.</em>, 2016</a>]</span> define the likelihood using a parameter <span class="math notranslate nohighlight">\(\beta\)</span>, which is related to the <span class="math notranslate nohighlight">\(\alpha\)</span> parameter in our definition of Zipf’s Law through <span class="math notranslate nohighlight">\(\alpha = \tfrac{1}{\beta-1}\)</span>.
Under their model, the value of <span class="math notranslate nohighlight">\(c\)</span> is the total number of unique words,
or equivalently the largest value of the rank.</p>
<p>Expressed as a Python function, the negative log likelihood function is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">nlog_likelihood</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log-likelihood function.&quot;&quot;&quot;</span>
    <span class="n">likelihood</span> <span class="o">=</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">((</span><span class="mi">1</span><span class="o">/</span><span class="n">counts</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                          <span class="o">-</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">counts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span><span class="o">**</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">likelihood</span>
</pre></div>
</div>
<p>Obtaining an estimate of (\beta) (and thus (\alpha)) then becomes a numerical optimization problem, for which we can use the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/optimize.html"><code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code></a> library.
Again following &#64;More2016, we use Brent’s Method with (1 &lt; \beta \leq 4).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize_scalar</span>


<span class="k">def</span> <span class="nf">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the power law parameters.&quot;&quot;&quot;</span>
    <span class="n">mle</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="n">nlog_likelihood</span><span class="p">,</span>
                          <span class="n">bracket</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                          <span class="n">args</span><span class="o">=</span><span class="n">word_counts</span><span class="p">,</span>
                          <span class="n">method</span><span class="o">=</span><span class="s1">&#39;brent&#39;</span><span class="p">)</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">mle</span><span class="o">.</span><span class="n">x</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">alpha</span>
</pre></div>
</div>
<p>We can then plot the fitted curve on the plot axes (<code class="docutils literal notranslate"><span class="pre">ax</span></code>) defined in the <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_fit</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">,</span> <span class="n">max_rank</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot the power law curve that was fitted to the data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    curve_xmin : float</span>
<span class="sd">        Minimum x-bound for fitted curve</span>
<span class="sd">    curve_xmax : float</span>
<span class="sd">        Maximum x-bound for fitted curve</span>
<span class="sd">    max_rank : int</span>
<span class="sd">        Maximum word frequency rank.</span>
<span class="sd">    alpha : float</span>
<span class="sd">        Estimated alpha parameter for the power law.</span>
<span class="sd">    ax : matplotlib axes</span>
<span class="sd">        Scatter plot to which the power curve will be added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">)</span>
    <span class="n">yvals</span> <span class="o">=</span> <span class="n">max_rank</span> <span class="o">*</span> <span class="p">(</span><span class="n">xvals</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where the maximum word frequency rank corresponds to <span class="math notranslate nohighlight">\(c\)</span>, and <span class="math notranslate nohighlight">\(-1 / \alpha\)</span> the exponent in the power law. We have followed the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">numpydoc</span></code></a> format for the detailed docstring
in <code class="docutils literal notranslate"><span class="pre">plot_fit</span></code>—see Appendix <strong>TODO</strong> ref(documentation) for more information about docstring formats.</p>
</section>
<section id="verifying-zipf-s-law">
<h2>Verifying Zipf’s Law<a class="headerlink" href="#verifying-zipf-s-law" title="Permalink to this heading">#</a></h2>
<p>Now that we can fit a curve to our word count plots, we can update <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> so the entire script reads as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot word counts.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize_scalar</span>


<span class="k">def</span> <span class="nf">nlog_likelihood</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log-likelihood function.&quot;&quot;&quot;</span>
    <span class="n">likelihood</span> <span class="o">=</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">((</span><span class="mi">1</span><span class="o">/</span><span class="n">counts</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                          <span class="o">-</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">counts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span><span class="o">**</span><span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">likelihood</span>


<span class="k">def</span> <span class="nf">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the power law parameters.&quot;&quot;&quot;</span>
    <span class="n">mle</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="n">nlog_likelihood</span><span class="p">,</span>
                          <span class="n">bracket</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                          <span class="n">args</span><span class="o">=</span><span class="n">word_counts</span><span class="p">,</span>
                          <span class="n">method</span><span class="o">=</span><span class="s1">&#39;brent&#39;</span><span class="p">)</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">mle</span><span class="o">.</span><span class="n">x</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">alpha</span>


<span class="k">def</span> <span class="nf">plot_fit</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">,</span> <span class="n">max_rank</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot the power law curve that was fitted to the data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    curve_xmin : float</span>
<span class="sd">        Minimum x-bound for fitted curve</span>
<span class="sd">    curve_xmax : float</span>
<span class="sd">        Maximum x-bound for fitted curve</span>
<span class="sd">    max_rank : int</span>
<span class="sd">        Maximum word frequency rank.</span>
<span class="sd">    alpha : float</span>
<span class="sd">        Estimated alpha parameter for the power law.</span>
<span class="sd">    ax : matplotlib axes</span>
<span class="sd">        Scatter plot to which the power curve will be added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">)</span>
    <span class="n">yvals</span> <span class="o">=</span> <span class="n">max_rank</span> <span class="o">*</span> <span class="p">(</span><span class="n">xvals</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yvals</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the command line program.&quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">infile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;word_frequency&#39;</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                           <span class="n">method</span><span class="o">=</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">,</span>
                         <span class="n">y</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">,</span> <span class="n">loglog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
                         <span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">xlim</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">xlim</span><span class="p">)</span>

    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;alpha:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

    <span class="c1"># Since the ranks are already sorted, we can take the last</span>
    <span class="c1"># one instead of computing which row has the highest rank</span>
    <span class="n">max_rank</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Use the range of the data as the boundaries</span>
    <span class="c1"># when drawing the power law curve</span>
    <span class="n">curve_xmin</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">curve_xmax</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word_frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="n">plot_fit</span><span class="p">(</span><span class="n">curve_xmin</span><span class="p">,</span> <span class="n">curve_xmax</span><span class="p">,</span> <span class="n">max_rank</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">),</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Word count csv file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--outfile&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="s1">&#39;plotcounts.png&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output image file name&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--xlim&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                        <span class="n">metavar</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;XMIN&#39;</span><span class="p">,</span> <span class="s1">&#39;XMAX&#39;</span><span class="p">),</span>
                        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;X-axis limits&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>We can then run the script to obtain the <span class="math notranslate nohighlight">\(\alpha\)</span> value for <em>Dracula</em>
and a new plot with a line fitted.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>bin/plotcounts.py<span class="w"> </span>results/dracula.csv<span class="w"> </span>--outfile
<span class="w">  </span>results/dracula.png
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>alpha: 1.0866646252515038
</pre></div>
</div>
<p>So according to our fit, the most frequent word will occur approximately <span class="math notranslate nohighlight">\(2^{1.1}=2.1\)</span> times as often as the second most frequent word, <span class="math notranslate nohighlight">\(3^{1.1}=3.3\)</span> times as often as the third most frequent word, and so on. <span class="xref myst">Figure</span> shows the plot.</p>
<figure class="align-default" id="git-advanced-dracula-fit-png">
<img alt="../_images/dracula-fit.png" src="../_images/dracula-fit.png" />
<figcaption>
<p><span class="caption-number">Fig. 16 </span><span class="caption-text">Dracula Fit</span><a class="headerlink" href="#git-advanced-dracula-fit-png" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The script appears to be working as we’d like, so we can go ahead and commit our changes to the <code class="docutils literal notranslate"><span class="pre">fit</span></code> development branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>bin/plotcounts.py<span class="w"> </span>results/dracula.png
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Added fit to word count data&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[fit 38c209b] Added fit to word count data
 2 files changed, 57 insertions(+)
 rewrite results/dracula.png (99%)
</pre></div>
</div>
<p>If we look at the last couple of commits using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>, we see our most recent change:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>38c209b (HEAD -&gt; fit) Added fit to word count data
ddb00fb (origin/master, master) removing inverse rank
        calculation
</pre></div>
</div>
<p>(We use <code class="docutils literal notranslate"><span class="pre">--oneline</span></code> and <code class="docutils literal notranslate"><span class="pre">-n 2</span></code> to shorten the log display.) But if we switch back to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>master
$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  fit
* master
</pre></div>
</div>
<p>and look at the log,
our change is not there:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ddb00fb (HEAD -&gt; master, origin/master) removing inverse rank
        calculation
7de9877 ignoring __pycache__
</pre></div>
</div>
<p>We have not lost our work:
it just isn’t included in this branch.
We can prove this by switching back to the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch and checking the log again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>fit
$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>38c209b (HEAD -&gt; fit) Added fit to word count data
ddb00fb (origin/master, master) removing inverse rank
        calculation
</pre></div>
</div>
<p>We can also look inside <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> and see our changes.
If we make another change and commit it, that change will also go into the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch. For instance, we could add some additional information to one of our docstrings to make it clear what equations were used in estimating (\alpha).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_power_law_params</span><span class="p">(</span><span class="n">word_counts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the power law parameters.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    Moreno-Sanchez et al (2016) define alpha (Eq. 1),</span>
<span class="sd">      beta (Eq. 2) and the maximum likelihood estimation (mle)</span>
<span class="sd">      of beta (Eq. 6).</span>

<span class="sd">    Moreno-Sanchez I, Font-Clos F, Corral A (2016)</span>
<span class="sd">      Large-Scale Analysis of Zipf&#39;s Law in English Texts.</span>
<span class="sd">      PLoS ONE 11(1): e0147073.</span>
<span class="sd">      https://doi.org/10.1371/journal.pone.0147073</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mle</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="n">nlog_likelihood</span><span class="p">,</span>
                          <span class="n">bracket</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                          <span class="n">args</span><span class="o">=</span><span class="n">word_counts</span><span class="p">,</span>
                          <span class="n">method</span><span class="o">=</span><span class="s1">&#39;brent&#39;</span><span class="p">)</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">mle</span><span class="o">.</span><span class="n">x</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">alpha</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>bin/plotcounts.py
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Adding Moreno-Sanchez et al (2016) reference&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[fit 1577404] Adding Moreno-Sanchez et al (2016) reference
 1 file changed, 14 insertions(+), 1 deletion(-)
</pre></div>
</div>
<p>Finally, if we want to see the differences between two branches,
we can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> with the same double-dot <code class="docutils literal notranslate"><span class="pre">..</span></code> syntax used to view differences between two revisions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>diff<span class="w"> </span>master..fit
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/bin/plotcounts.py b/bin/plotcounts.py</span>
<span class="gh">index c511da1..6905b6e 100644</span>
<span class="gd">--- a/bin/plotcounts.py</span>
<span class="gi">+++ b/bin/plotcounts.py</span>
<span class="gu">@@ -2,7 +2,62 @@</span>
<span class="w"> </span>
<span class="w"> </span>import argparse
<span class="w"> </span>
<span class="gi">+import numpy as np</span>
<span class="w"> </span>import pandas as pd
<span class="gi">+from scipy.optimize import minimize_scalar</span>
<span class="gi">+</span>
<span class="gi">+</span>
<span class="gi">+def nlog_likelihood(beta, counts):</span>
<span class="gi">+    &quot;&quot;&quot;Log-likelihood function.&quot;&quot;&quot;</span>
<span class="gi">+    likelihood = - np.sum(np.log((1/counts)**(beta - 1)</span>
<span class="gi">+                          - (1/(counts + 1))**(beta - 1)))</span>
<span class="gi">+    return likelihood</span>
<span class="gi">+</span>
<span class="gi">+</span>
<span class="gi">+def get_power_law_params(word_counts):</span>
<span class="gi">+    &quot;&quot;&quot;</span>
<span class="gi">+    Get the power law parameters.</span>
<span class="gi">+</span>
<span class="gi">+    References</span>
<span class="gi">+    ----------</span>
<span class="gi">+    Moreno-Sanchez et al (2016) define alpha (Eq. 1),</span>
<span class="gi">+      beta (Eq. 2) and the maximum likelihood estimation (mle)</span>
<span class="gi">+      of beta (Eq. 6).</span>
<span class="gi">+</span>
<span class="gi">+    Moreno-Sanchez I, Font-Clos F, Corral A (2016)</span>
<span class="gi">+      Large-Scale Analysis of Zipf&#39;s Law in English Texts.</span>
<span class="gi">+      PLoS ONE 11(1): e0147073.</span>
<span class="gi">+      https://doi.org/10.1371/journal.pone.0147073</span>
<span class="gi">+    &quot;&quot;&quot;</span>
<span class="gi">+    mle = minimize_scalar(nlog_likelihood,</span>
<span class="gi">+                          bracket=(1 + 1e-10, 4),</span>
<span class="gi">+                          args=word_counts,</span>
<span class="gi">+                          method=&#39;brent&#39;)</span>
<span class="gi">+    beta = mle.x</span>
<span class="gi">+    alpha = 1 / (beta - 1)</span>
<span class="gi">+    return alpha</span>
<span class="gi">+</span>
<span class="gi">+</span>
<span class="gi">+def plot_fit(curve_xmin, curve_xmax, max_rank, alpha, ax):</span>
<span class="gi">+    &quot;&quot;&quot;</span>
<span class="gi">+    Plot the power law curve that was fitted to the data.</span>
<span class="gi">+</span>
<span class="gi">+    Parameters</span>
<span class="gi">+    ----------</span>
<span class="gi">+    curve_xmin : float</span>
<span class="gi">+        Minimum x-bound for fitted curve</span>
<span class="gi">+    curve_xmax : float</span>
<span class="gi">+        Maximum x-bound for fitted curve</span>
<span class="gi">+    max_rank : int</span>
<span class="gi">+        Maximum word frequency rank.</span>
<span class="gi">+    alpha : float</span>
<span class="gi">+        Estimated alpha parameter for the power law.</span>
<span class="gi">+    ax : matplotlib axes</span>
<span class="gi">+        Scatter plot to which the power curve will be added.</span>
<span class="gi">+    &quot;&quot;&quot;</span>
<span class="gi">+    xvals = np.arange(curve_xmin, curve_xmax)</span>
<span class="gi">+    yvals = max_rank * (xvals**(-1 / alpha))</span>
<span class="gi">+    ax.loglog(xvals, yvals, color=&#39;grey&#39;)</span>
<span class="w"> </span>
<span class="w"> </span>
<span class="w"> </span>def main(args):
<span class="gu">@@ -16,6 +71,21 @@ def main(args):</span>
<span class="w"> </span>                         figsize=[12, 6],
<span class="w"> </span>                         grid=True,
<span class="w"> </span>                         xlim=args.xlim)
<span class="gi">+</span>
<span class="gi">+    word_counts = df[&#39;word_frequency&#39;].to_numpy()</span>
<span class="gi">+    alpha = get_power_law_params(word_counts)</span>
<span class="gi">+    print(&#39;alpha:&#39;, alpha)</span>
<span class="gi">+</span>
<span class="gi">+    # Since the ranks are already sorted, we can take the last</span>
<span class="gi">+    # one instead of computing which row has the highest rank</span>
<span class="gi">+    max_rank = df[&#39;rank&#39;].to_numpy()[-1]</span>
<span class="gi">+</span>
<span class="gi">+    # Use the range of the data as the boundaries</span>
<span class="gi">+    # when drawing the power law curve</span>
<span class="gi">+    curve_xmin = df[&#39;word_frequency&#39;].min()</span>
<span class="gi">+    curve_xmax = df[&#39;word_frequency&#39;].max()</span>
<span class="gi">+</span>
<span class="gi">+    plot_fit(curve_xmin, curve_xmax, max_rank, alpha, ax)</span>
<span class="w"> </span>    ax.figure.savefig(args.outfile)
<span class="w"> </span>
<span class="w"> </span>
<span class="gh">diff --git a/results/dracula.png b/results/dracula.png</span>
<span class="gh">index 57a7b70..5f10271 100644</span>
Binary files a/results/dracula.png and b/results/dracula.png
<span class="gh">differ</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Why Branch?</strong></p>
<p>Why go to all this trouble?
Imagine we are in the middle of debugging a change like this
when we are asked to make final revisions
to a paper that was created using the old code.
If we revert <code class="docutils literal notranslate"><span class="pre">plotcount.py</span></code> to its previous state we might lose our changes.
If instead we have been doing the work on a branch,
we can switch branches,
create the plot,
and switch back in complete safety.</p>
</div></blockquote>
</section>
<section id="merging">
<h2>Merging<a class="headerlink" href="#merging" title="Permalink to this heading">#</a></h2>
<p>We could proceed in three ways at this point:</p>
<ol class="arabic simple">
<li><p>Add our changes to <code class="docutils literal notranslate"><span class="pre">plotcounts.py</span></code> once again in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p></li>
<li><p>Stop working in <code class="docutils literal notranslate"><span class="pre">master</span></code> and start using the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch for future development.</p></li>
<li><p><strong>Merge</strong> the <code class="docutils literal notranslate"><span class="pre">fit</span></code> and <code class="docutils literal notranslate"><span class="pre">master</span></code> branches.</p></li>
</ol>
<p>The first option is tedious and error-prone; the second will lead to a bewildering proliferation of branches, but the third option is simple, fast, and reliable. To start, let’s make sure we’re in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>master
$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  fit
* master
</pre></div>
</div>
<p>We can now merge the changes in the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch into our current branch
with a single command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>fit
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Updating ddb00fb..1577404
Fast-forward
 bin/plotcounts.py   |  70 ++++++++++++++++++++++++++++++++++++++
                           +++++++++++++++++++++++++++++++
 results/dracula.png | Bin 23291 -&gt; 38757 bytes
 2 files changed, 70 insertions(+)
</pre></div>
</div>
<p>Merging doesn’t change the source branch <code class="docutils literal notranslate"><span class="pre">fit</span></code>, but once the merge is done,
all of the changes made in <code class="docutils literal notranslate"><span class="pre">fit</span></code> are also in the history of <code class="docutils literal notranslate"><span class="pre">master</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1577404 (HEAD -&gt; master, fit) Adding Moreno-Sanchez et al
        (2016) reference
38c209b Added fit to word count data
ddb00fb (origin/master) removing inverse rank calculation
7de9877 ignoring __pycache__
</pre></div>
</div>
<p>Note that Git automatically creates a new commit (in this case, <code class="docutils literal notranslate"><span class="pre">1577404</span></code>)
to represent the merge. If we now run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">master..fit</span></code>, Git doesn’t print anything because there aren’t any differences to show.</p>
<p>Now that we have merged all of the changes from <code class="docutils literal notranslate"><span class="pre">fit</span></code> into <code class="docutils literal notranslate"><span class="pre">master</span></code>
there is no need to keep the <code class="docutils literal notranslate"><span class="pre">fit</span></code> branch, so we can delete it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>fit
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Deleted branch fit (was 1577404).
</pre></div>
</div>
<blockquote>
<div><p><strong>Not Just the Command Line</strong></p>
<p>We have been creating, merging, and deleting branches on the command line,
but we can do all of these things using <a class="reference external" href="https://www.gitkraken.com">GitKraken</a>or <a class="reference external" href="https://github.com/extrawurst/gitui">gitUI</a>
and other GUIs.
The operations stay the same;
all that changes is how we tell the computer what we want to do.</p>
</div></blockquote>
</section>
<section id="handling-conflicts">
<h2>Handling Conflicts<a class="headerlink" href="#handling-conflicts" title="Permalink to this heading">#</a></h2>
<p>A <strong>conflict</strong> occurs when a line has been changed in different ways in two separate branches or when a file has been deleted in one branch but edited in the other. Merging <code class="docutils literal notranslate"><span class="pre">fit</span></code> into <code class="docutils literal notranslate"><span class="pre">master</span></code> went smoothly because there were no conflicts between the two branches, but if we are going to use branches,
we must learn how to merge conflicts.</p>
<p>To start, use <code class="docutils literal notranslate"><span class="pre">nano</span></code> to add the project’s title to a new file called <code class="docutils literal notranslate"><span class="pre">README.md</span></code> in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, which we can then view:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>README.md
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>README.md
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial commit of README file&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[master 232b564] Initial commit of README file
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
</pre></div>
</div>
<p>Now let’s create a new development branch called <code class="docutils literal notranslate"><span class="pre">docs</span></code> to work on improving the documentation for our code. We will use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span></code> to create a new branch and switch to it in a single step:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>docs
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Switched to a new branch &#39;docs&#39;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>* docs
  master
</pre></div>
</div>
<p>On this new branch, let’s add some information to the README file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

These Zipf&#39;s Law scripts tally the occurrences of words in text
files and plot each word&#39;s rank versus its frequency.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>README.md
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Added repository overview&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[docs a0b88e5] Added repository overview
 1 file changed, 3 insertions(+)
</pre></div>
</div>
<p>In order to create a conflict, let’s switch back to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.
The changes we made in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> branch are not present:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Switched to branch &#39;master&#39;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>README.md
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law
</pre></div>
</div>
<p>Let’s add some information about the contributors to our work:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

## Contributors

- Amira Khan &lt;amira@zipf.org&gt;
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git add README.md
$ git commit -m &quot;Added contributor list&quot;
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[master 45a576b] Added contributor list
 1 file changed, 4 insertions(+)
</pre></div>
</div>
<p>We now have two branches,
<code class="docutils literal notranslate"><span class="pre">master</span></code> and <code class="docutils literal notranslate"><span class="pre">docs</span></code>,
in which we have changed <code class="docutils literal notranslate"><span class="pre">README.md</span></code> in different ways:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>diff<span class="w"> </span>docs..master
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/README.md b/README.md</span>
<span class="gh">index f40e895..71f67db 100644</span>
<span class="gd">--- a/README.md</span>
<span class="gi">+++ b/README.md</span>
<span class="gu">@@ -1,4 +1,5 @@</span>
<span class="w"> </span># Zipf&#39;s Law
<span class="w"> </span>
<span class="gd">-These Zipf&#39;s Law scripts tally occurrences of words in text</span>
<span class="gd">-files and plot each word&#39;s rank versus its frequency.</span>
<span class="gi">+## Contributors</span>
<span class="gi">+</span>
<span class="gi">+- Amira Khan &lt;amira@zipf.org&gt;</span>
</pre></div>
</div>
<p>When we try to merge <code class="docutils literal notranslate"><span class="pre">docs</span></code> into <code class="docutils literal notranslate"><span class="pre">master</span></code>,
Git doesn’t know which of these changes to keep:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>docs<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.
</pre></div>
</div>
<p>If we look in <code class="docutils literal notranslate"><span class="pre">README.md</span></code>,
we see that Git has kept both sets of changes,
but has marked which came from where:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>README.md
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
## Contributors

- Amira Khan &lt;amira@zipf.org&gt;
=======
These Zipf&#39;s Law scripts tally the occurrences of words in text
files and plot each word&#39;s rank versus its frequency.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; docs
</pre></div>
</div>
<p>The lines from <code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></code> to <code class="docutils literal notranslate"><span class="pre">=======</span></code> are what was in <code class="docutils literal notranslate"><span class="pre">master</span></code>,
while the lines from there to <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;&gt;&gt;&gt;&gt; docs</span></code> show what was in <code class="docutils literal notranslate"><span class="pre">docs</span></code>.
If there were several conflicting regions in the same file,
Git would mark each one this way.</p>
<p>We have to decide what to do next: keep the <code class="docutils literal notranslate"><span class="pre">master</span></code> changes,
keep those from <code class="docutils literal notranslate"><span class="pre">docs</span></code>, edit this part of the file to combine them,
or write something new. Whatever we do, we must remove the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">===</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;</span></code> markers. Let’s combine the two sets of changes so the resulting file reads:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

These Zipf&#39;s Law scripts tally the occurrences of words in text
files and plot each word&#39;s rank versus its frequency.

## Contributors

- Amira Khan &lt;amira@zipf.org&gt;
</pre></div>
</div>
<p>We can now add the file and commit the change, just as we would after any other edit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>README.md
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Merging README additions&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[master 55c63d0] Merging README additions
</pre></div>
</div>
<p>Our branch’s history now shows a single sequence of commits, with the <code class="docutils literal notranslate"><span class="pre">master</span></code> changes on top of the earlier <code class="docutils literal notranslate"><span class="pre">docs</span></code> changes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>55c63d0 (HEAD -&gt; master) Merging README additions
45a576b Added contributor list
a0b88e5 (docs) Added repository overview
232b564 Initial commit of README file
</pre></div>
</div>
<p>If we want to see what really happened, we can add the <code class="docutils literal notranslate"><span class="pre">--graph</span></code> option to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>--graph<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>*   55c63d0 (HEAD -&gt; master) Merging README additions
|\  
| * a0b88e5 (docs) Added repository overview
* | 45a576b Added contributor list
|/  
* 232b564 Initial commit of README file
</pre></div>
</div>
<p>At this point we can delete the <code class="docutils literal notranslate"><span class="pre">docs</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>docs
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Deleted branch docs (was a0b88e5).
</pre></div>
</div>
<p>Alternatively, we can keep using <code class="docutils literal notranslate"><span class="pre">docs</span></code> for documentation updates.
Each time we switch to it, we merge changes <em>from</em> <code class="docutils literal notranslate"><span class="pre">master</span></code> <em>into</em> <code class="docutils literal notranslate"><span class="pre">docs</span></code>,
do our editing (while switching back to <code class="docutils literal notranslate"><span class="pre">master</span></code> or other branches as needed
to work on the code), and then merge <em>from</em> <code class="docutils literal notranslate"><span class="pre">docs</span></code> <em>to</em> <code class="docutils literal notranslate"><span class="pre">master</span></code> once the documentation is updated.</p>
<blockquote>
<div><p><strong>Remember to Push</strong></p>
<p>If you are using a remote repository,
don’t forget to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>
to keep your version on GitHub up to date
with your local version.</p>
</div></blockquote>
</section>
<section id="a-branch-based-workflow">
<h2>A Branch-Based Workflow<a class="headerlink" href="#a-branch-based-workflow" title="Permalink to this heading">#</a></h2>
<p>What is the best way to incorporate branching into our regular coding practice?
If we are working on our own computer, this workflow will help us keep track of what we are doing:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span></code> to make sure we are in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">name-of-feature</span></code> to create a new branch.
We <em>always</em> create a branch when making changes,
since we never know what else might come up.
The branch name should be as descriptive as a variable name or filename would be.</p></li>
<li><p>Make our changes.
If something occurs to us along the way—for example,
if we are writing a new function and realize that
the documentation for some other function should be updated—we do <em>not</em>
do that work in this branch just because we happen to be there.
Instead,
we commit our changes,
switch back to <code class="docutils literal notranslate"><span class="pre">master</span></code>,
and create a new branch for the other work.</p></li>
<li><p>When the new feature is complete,
we <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">master</span> <span class="pre">name-of-feature</span></code>
to get any changes we merged into <code class="docutils literal notranslate"><span class="pre">master</span></code> after creating <code class="docutils literal notranslate"><span class="pre">name-of-feature</span></code>
and resolve any conflicts.
This is an important step:
we want to do the merge and test that everything still works in our feature branch,
not in <code class="docutils literal notranslate"><span class="pre">master</span></code>.</p></li>
<li><p>Finally,
we switch back to <code class="docutils literal notranslate"><span class="pre">master</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">name-of-feature</span> <span class="pre">master</span></code>
to merge our changes into <code class="docutils literal notranslate"><span class="pre">master</span></code>.
We should not have any conflicts,
and all of our tests should pass.</p></li>
</ol>
<p>Most experienced developers use this <strong>branch-per-feature workflow</strong>, but what exactly is a “feature”? These rules make sense for small projects:</p>
<ol class="arabic simple">
<li><p>Anything cosmetic that is only one or two lines long
can be done in <code class="docutils literal notranslate"><span class="pre">master</span></code> and committed right away.
Here, “cosmetic” means changes to comments or documentation:
nothing that affects how code runs, not even a simple variable renaming.</p></li>
<li><p>A pure addition that doesn’t change anything else is a feature and goes into a branch.
For example, if we run a new analysis and save the results,
that should be done on its own branch because it might take several tries to get the analysis to run, and we might interrupt ourselves to fix things that we discover aren’t working.</p></li>
<li><p>Every change to code that someone might want to undo later in one step is a feature.
For example, if a new parameter is added to a function,
then every call to the function has to be updated.
Since neither alteration makes sense without the other,
those changes are considered a single feature and should be done in one branch.</p></li>
</ol>
<p>The hardest thing about using a branch-per-feature workflow is sticking to it for small changes. As the first point in the list above suggests, most people are pragmatic about this on small projects; on large ones, where dozens of people might be committing, even the smallest and most innocuous change needs to be in its own branch so that it can be reviewed (which we discuss below).</p>
</section>
<section id="using-other-people-s-work">
<h2>Using Other People’s Work<a class="headerlink" href="#using-other-people-s-work" title="Permalink to this heading">#</a></h2>
<p>So far we have used Git to manage individual work,
but it really comes into its own when we are working with other people.
We can do this in two ways:</p>
<ol class="arabic simple">
<li><p>Everyone has read and write access to a single shared repository.</p></li>
<li><p>Everyone can read from the project’s main repository,
but only a few people can commit changes to it.
The project’s other contributors <strong>fork</strong> the main repository
to create one that they own,
do their work in that,
and then submit their changes to the main repository.</p></li>
</ol>
<p>The first approach works well for teams of up to half a dozen people
who are all comfortable using Git, but if the project is larger,
or if contributors are worried that they might make a mess in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, the second approach is safer.</p>
<p>Git itself doesn’t have any notion of a “main repository”,
but \gref{forges}{forge} like Github, Gitlab, Bitbucket or selfhosted solutions like Gitea all encourage people to use Git in ways that effectively create one.
Suppose, for example, that Sami wants to contribute to the Zipf’s Law code that
Amira is hosting on GitHub at <code class="docutils literal notranslate"><span class="pre">https://github.com/amira-khan/zipf</span></code>.
Sami can go to that URL and click on the “Fork” button in the upper right corner
(<a class="reference internal" href="#git-advanced-fork-button"><span class="std std-ref">Figure</span></a>).
GitHub immediately creates a copy of Amira’s repository within Sami’s account on GitHub’s own servers.</p>
<figure class="align-default" id="git-advanced-fork-button">
<img alt="../_images/fork-button.png" src="../_images/fork-button.png" />
<figcaption>
<p><span class="caption-number">Fig. 17 </span><span class="caption-text">Git Fork button</span><a class="headerlink" href="#git-advanced-fork-button" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>When the command completes, the setup on GitHub now looks like <a class="reference internal" href="#git-advanced-after-fork"><span class="std std-ref">Figure</span></a>.Nothing has happened yet on Sami’s own machine:
the new repository exists only on GitHub.
When Sami explores its history, they see that it contains all of the changes Amira made.</p>
<figure class="align-default" id="git-advanced-after-fork">
<img alt="../_images/after-fork.png" src="../_images/after-fork.png" />
<figcaption>
<p><span class="caption-number">Fig. 18 </span><span class="caption-text">Git: After Fork</span><a class="headerlink" href="#git-advanced-after-fork" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>A copy of a repository is called a <strong>clone</strong> In order to start working on the project, Sami needs a clone of <em>their</em> repository (not Amira’s) on their own computer. We will modify Sami’s prompt to include their desktop user ID (<code class="docutils literal notranslate"><span class="pre">sami</span></code>
and working directory (initially <code class="docutils literal notranslate"><span class="pre">~</span></code>) to make it easier to follow what’s happening:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/sami-virtanen/zipf.git
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Cloning into &#39;zipf&#39;...
remote: Enumerating objects: 64, done.
remote: Counting objects: 100% (64/64), done.
remote: Compressing objects: 100% (43/43), done.
remote: Total 64 (delta 20), reused 63 (delta 19), pack-reused 0
Receiving objects: 100% (64/64), 2.20 MiB | 2.66 MiB/s, done.
Resolving deltas: 100% (20/20), done.
</pre></div>
</div>
<p>This command creates a new directory with the same name as the project,
i.e., <code class="docutils literal notranslate"><span class="pre">zipf</span></code>. When Sami goes into this directory and runs <code class="docutils literal notranslate"><span class="pre">ls</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>,
they see that all of the project’s files and history are there:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~<span class="w"> </span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>zipf
sami:~/zipf<span class="w"> </span>$<span class="w"> </span>ls
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>README.md       bin             data             results
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>55c63d0 (HEAD -&gt; master, origin/master, origin/HEAD) 
        Merging README additions
45a576b Added contributor list
a0b88e5 Added repository overview
232b564 Initial commit of README file
</pre></div>
</div>
<p>Sami also sees that Git has automatically created a <strong>remote</strong> for their repository that points back at their repository on GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>-v
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>origin  https://github.com/sami-virtanen/zipf.git (fetch)
origin  https://github.com/sami-virtanen/zipf.git (push)
</pre></div>
</div>
<p>Sami can pull changes from their fork and push work back there, but needs to do one more thing before getting the changes from Amira’s repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>upstream
<span class="w">              </span>https://github.com/amira-khan/zipf.git
sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>-v
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>origin      https://github.com/sami-virtanen/zipf.git (fetch)
origin      https://github.com/sami-virtanen/zipf.git (push)
upstream    https://github.com/amira-khan/zipf.git (fetch)
upstream    https://github.com/amira-khan/zipf.git (push)
</pre></div>
</div>
<p>Sami has called their new remote <code class="docutils literal notranslate"><span class="pre">upstream</span></code> because it points at the repository
from which theirs is derived. They could use any name, but <code class="docutils literal notranslate"><span class="pre">upstream</span></code> is a nearly universal convention.</p>
<p>With this remote in place, Sami is finally set up. Suppose, for example,
that Amira has modified the project’s <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file to add Sami as a contributor. (Again, we show Amira’s user ID and working directory in her prompt to make it clear who’s doing what):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Zipf&#39;s Law

These Zipf&#39;s Law scripts tally the occurrences of words in text
files and plot each word&#39;s rank versus its frequency.

## Contributors

- Amira Khan &lt;amira@zipf.org&gt;
- Sami Virtanen
</pre></div>
</div>
<p>Amira commits her changes and pushes them to <em>her</em> repository on GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amira:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-a<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Adding Sami as a contributor&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[master 35fca86] Adding Sami as a contributor
 1 file changed, 1 insertion(+)
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amira:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 315 bytes | 315.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local
        objects.
To https://github.com/amira-khan/zipf.git
   55c63d0..35fca86  master -&gt; master
</pre></div>
</div>
<p>\newpage</p>
<p>Amira’s changes are now on her desktop and in her GitHub repository
but not in either of Sami’s repositories (local or remote).
Since Sami has created a remote that points at Amira’s GitHub repository,
though, they can easily pull those changes to their desktop:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>From https://github.com/amira-khan/zipf
 * branch            master     -&gt; FETCH_HEAD
 * [new branch]      master     -&gt; upstream/master
Updating 55c63d0..35fca86
Fast-forward
 README.md | 1 +
 1 file changed, 1 insertion(+)
</pre></div>
</div>
<p>Pulling from a repository owned by someone else is no different than pulling from a repository we own. In either case, Git merges the changes and asks us to resolve any conflicts that arise.
The only significant difference is that, as with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>,
we have to specify both a remote and a branch:
in this case, <code class="docutils literal notranslate"><span class="pre">upstream</span></code> and <code class="docutils literal notranslate"><span class="pre">master</span></code>.</p>
</section>
<section id="pull-requests">
<h2>Pull Requests<a class="headerlink" href="#pull-requests" title="Permalink to this heading">#</a></h2>
<p>Sami can now get Amira’s work, but how can Amira get Sami’s?
She could create a remote that pointed at Sami’s repository on GitHub
and periodically pull in Sami’s changes, but that would lead to chaos, since we could never be sure that everyone’s work was in any one place at the same time.
Instead,
almost everyone uses <strong>pull requests</strong>. They aren’t part of Git itself,
but are supported by all major online <strong>forges</strong>.</p>
<p>A pull request is essentially a note saying, “Someone would like to merge branch A of repository B into branch X of repository Y.”
The pull request does not contain the changes, but instead points at two particular branches. That way, the difference displayed is always up to date
if either branch changes.</p>
<p>But a pull request can store more than just the source and destination branches:
it can also store comments people have made about the proposed merge.
Users can comment on the pull request as a whole, or on particular lines,
and mark comments as out of date if the author of the pull request updates the code that the comment is attached to. Complex changes can go through several rounds of review and revision before being merged,
which makes pull requests the review system we all wish journals actually had.</p>
<p>To see this in action, suppose Sami wants to add their email address to <code class="docutils literal notranslate"><span class="pre">README.md</span></code>. They create a new branch and switch to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>adding-email
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Switched to a new branch &#39;adding-email&#39;
</pre></div>
</div>
<p>then make a change and commit it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-a<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Adding my email address&quot;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[adding-email 3e73dc0] Adding my email address
 1 file changed, 1 insertion(+), 1 deletion(-)
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>diff<span class="w"> </span>HEAD~1
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/README.md b/README.md</span>
<span class="gh">index e8281ee..e1bf630 100644</span>
<span class="gd">--- a/README.md</span>
<span class="gi">+++ b/README.md</span>
<span class="gu">@@ -6,4 +6,4 @@ and plot each word&#39;s rank versus its frequency.</span>
<span class="w"> </span>## Contributors
<span class="w"> </span>
<span class="w"> </span>- Amira Khan &lt;amira@zipf.org&gt;
<span class="gd">-- Sami Virtanen</span>
<span class="gi">+- Sami Virtanen &lt;sami@zipf.org&gt;</span>
</pre></div>
</div>
<p>Sami’s changes are only in their local repository. They cannot create a pull request until those changes are on GitHub, so they push their new branch to their repository on GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>adding-email
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 315 bytes | 315.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local
  objects.
remote: 
remote: Create a pull request for &#39;adding-email&#39; on GitHub by
  visiting:
  https://github.com/sami-virtanen/zipf/pull/new/adding-email
remote: 
To https://github.com/sami-virtanen/zipf.git
 * [new branch]      adding-email -&gt; adding-email
</pre></div>
</div>
<p>When Sami goes to their GitHub repository in the browser, GitHub notices that they have just pushed a new branch and asks them if they want to create a pull request (<a class="reference internal" href="#git-advanced-after-sami-pushes"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-after-sami-pushes">
<img alt="../_images/after-sami-pushes.png" src="../_images/after-sami-pushes.png" />
<figcaption>
<p><span class="caption-number">Fig. 19 </span><span class="caption-text">Git after Push</span><a class="headerlink" href="#git-advanced-after-sami-pushes" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>When Sami clicks on the button, GitHub displays a page showing the default source and destination of the pull request and a pair of editable boxes for the pull request’s title and a longer comment (<a class="reference internal" href="#git-advanced-pull-request-start"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pull-request-start">
<img alt="../_images/open-pull-request.png" src="../_images/open-pull-request.png" />
<figcaption>
<p><span class="caption-number">Fig. 20 </span><span class="caption-text">Start a pull request</span><a class="headerlink" href="#git-advanced-pull-request-start" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>If they scroll down, Sami can see a summary of the changes that will be in the pull request (<a class="reference internal" href="#git-advanced-pull-request-summary"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pull-request-summary">
<img alt="../_images/open-pull-request-detail.png" src="../_images/open-pull-request-detail.png" />
<figcaption>
<p><span class="caption-number">Fig. 21 </span><span class="caption-text">Git pull request summary</span><a class="headerlink" href="#git-advanced-pull-request-summary" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The top (title) box is autofilled with the previous commit message,
so Sami adds an extended explanation to provide additional context
before clicking on “Create Pull Request”
(<a class="reference internal" href="#git-advanced-pull-request-fill-in"><span class="std std-ref">Figure</span></a>).
When they do, GitHub displays a page showing the new pull request,
which has a unique serial number (<a class="reference internal" href="#git-advanced-pull-request-new"><span class="std std-ref">Figure</span></a>).
Note that this pull request is displayed in Amira’s repository rather than Sami’s, since it is Amira’s repository that will be affected if the pull request is merged.</p>
<figure class="align-default" id="git-advanced-pull-request-fill-in">
<img alt="../_images/fill-in-pull-request.png" src="../_images/fill-in-pull-request.png" />
<figcaption>
<p><span class="caption-number">Fig. 22 </span><span class="caption-text">Git Fill in pull request</span><a class="headerlink" href="#git-advanced-pull-request-fill-in" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-new">
<img alt="../_images/new-pull-request.png" src="../_images/new-pull-request.png" />
<figcaption>
<p><span class="caption-number">Fig. 23 </span><span class="caption-text">Git new pull request</span><a class="headerlink" href="#git-advanced-pull-request-new" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Amira’s repository now shows a new pull request
(<a class="reference internal" href="#git-advanced-pull-request-viewing"><span class="std std-ref">Figure</span></a>).
Clicking on the “Pull requests” tab brings up a list of PRs
(<a class="reference internal" href="#git-advanced-pull-request-list"><span class="std std-ref">Figure</span></a>)
and clicking on the pull request link itself displays its details
(<a class="reference internal" href="#git-advanced-pull-request-details"><span class="std std-ref">Figure</span></a>).
Sami and Amira can both see and interact with these pages,
though only Amira has permission to merge.</p>
<figure class="align-default" id="git-advanced-pull-request-viewing">
<img alt="../_images/viewing-new-pull-request.png" src="../_images/viewing-new-pull-request.png" />
<figcaption>
<p><span class="caption-number">Fig. 24 </span><span class="caption-text">View pull request</span><a class="headerlink" href="#git-advanced-pull-request-viewing" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-list">
<img alt="../_images/pr-list.png" src="../_images/pr-list.png" />
<figcaption>
<p><span class="caption-number">Fig. 25 </span><span class="caption-text">Git pull request list</span><a class="headerlink" href="#git-advanced-pull-request-list" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-details">
<img alt="../_images/pr-details.png" src="../_images/pr-details.png" />
<figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text">Git pull request details</span><a class="headerlink" href="#git-advanced-pull-request-details" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Since there are no conflicts,GitHub will let Amira merge the PR immediately using the “Merge pull request” button. She could also discard or reject it without merging using the “Close pull request” button. Instead,
she clicks on the “Files changed” tab to see what Sami has changed
(<a class="reference internal" href="#git-advanced-pull-request-changes"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pull-request-changes">
<img alt="../_images/pr-changes.png" src="../_images/pr-changes.png" />
<figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Pull request changes</span><a class="headerlink" href="#git-advanced-pull-request-changes" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>If she moves her mouse over particular lines, a white-on-blue cross appears near the numbers to indicate that she can add comments
(<a class="reference internal" href="#git-advanced-pull-request-comment-marker"><span class="std std-ref">Figure</span></a>).
She clicks on the marker beside her own name and writes a comment:
She only wants to make one comment rather than write a lengthier multi-comment review, so she chooses “Add single comment” (<a class="reference internal" href="#git-advanced-pull-request-write-comment"><span class="std std-ref">Figure</span></a>).
GitHub redisplays the page with her remarks inserted (<a class="reference internal" href="#git-advanced-pull-request-pr-with-comment"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pull-request-comment-marker">
<img alt="../_images/pr-comment-marker.png" src="../_images/pr-comment-marker.png" />
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Pull request comment marker</span><a class="headerlink" href="#git-advanced-pull-request-comment-marker" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-write-comment">
<img alt="../_images/pr-writing-comment.png" src="../_images/pr-writing-comment.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Pull request write a comment</span><a class="headerlink" href="#git-advanced-pull-request-write-comment" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-pr-with-comment">
<img alt="../_images/pr-with-comment.png" src="../_images/pr-with-comment.png" />
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Pull request with comment</span><a class="headerlink" href="#git-advanced-pull-request-pr-with-comment" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>While Amira is working, GitHub has been emailing notifications to both Sami and Amira. When Sami clicks on the link in their email notification, it takes them to the PR and shows Amira’s comment. Sami changes <code class="docutils literal notranslate"><span class="pre">README.md</span></code>, commits, and pushes, but does <em>not</em> create a new pull request or do anything to the existing one.
As explained above, a PR is a note asking that two branches be merged,
so if either end of the merge changes, the PR updates automatically.</p>
<p>Sure enough, when Amira looks at the PR again a few moments later she sees Sami’s changes (<a class="reference internal" href="#git-advanced-pull-request-pr-with-fix"><span class="std std-ref">Figure</span></a>).
Satisfied, she goes back to the “Conversation” tab and clicks on “Merge”.
The icon at the top of the PR’s page changes text and color to show that the merge was successful
(<a class="reference internal" href="#git-advanced-pull-request-successful-merge"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pull-request-pr-with-fix">
<img alt="../_images/pr-with-fix.png" src="../_images/pr-with-fix.png" />
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Pull request with fix</span><a class="headerlink" href="#git-advanced-pull-request-pr-with-fix" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="git-advanced-pull-request-successful-merge">
<img alt="../_images/pr-successful-merge.png" src="../_images/pr-successful-merge.png" />
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">PR successful merge</span><a class="headerlink" href="#git-advanced-pull-request-successful-merge" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>To get those changes from GitHub to her desktop repository,
Amira uses <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amira:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>From https://github.com/amira-khan/zipf
 * branch            master     -&gt; FETCH_HEAD
Updating 35fca86..a04e3b9
Fast-forward
 README.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
</pre></div>
</div>
<p>To get the change they just made from their <code class="docutils literal notranslate"><span class="pre">adding-email</span></code> branch into their <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, Sami could use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> on the command line. It’s a little clearer, though, if they also use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> from their <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository (i.e., Amira’s repository) so that they’re sure to get any other changes that Amira may have merged:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Switched to branch &#39;master&#39;
Your branch is up to date with &#39;origin/master&#39;.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>From https://github.com/amira-khan/zipf
 * branch            master     -&gt; FETCH_HEAD
Updating 35fca86..a04e3b9
Fast-forward
 README.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
</pre></div>
</div>
<p>Finally, Sami can push their changes back to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch
in their own remote repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sami:~/zipf<span class="w"> </span>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>master
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
To https://github.com/sami-virtanen/zipf.git
   35fca86..a04e3b9  master -&gt; master
</pre></div>
</div>
<p>All four repositories are now synchronized.</p>
</section>
<section id="handling-conflicts-in-pull-requests-git-advanced-pr-conflict">
<h2>Handling Conflicts in Pull Requests {#git-advanced-pr-conflict}<a class="headerlink" href="#handling-conflicts-in-pull-requests-git-advanced-pr-conflict" title="Permalink to this heading">#</a></h2>
<p>Finally, suppose that Amira and Sami have decided to collaborate more extensively on this project.
Amira has added Sami as a collaborator to the GitHub repository.
Now Sami can make contributions directly to the repository,
rather than via a pull request from a forked repository.</p>
<p>Sami makes a change to <code class="docutils literal notranslate"><span class="pre">README.md</span></code> in the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch on GitHub.
Meanwhile, Amira is making a conflicting change to the same file in a different branch. When Amira creates her pull request, GitHub will detect the conflict and report that the PR cannot be merged automatically (<a class="reference internal" href="#git-advanced-pr-conflict"><span class="std std-ref">Figure</span></a>).</p>
<figure class="align-default" id="git-advanced-pr-conflict">
<img alt="../_images/pr-conflict.png" src="../_images/pr-conflict.png" />
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">Pull request conflict</span><a class="headerlink" href="#git-advanced-pr-conflict" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Amira can solve this problem with the tools she already has.
If she has made her changes in a branch called <code class="docutils literal notranslate"><span class="pre">editing-readme</span></code>, the steps are:</p>
<ol class="arabic simple">
<li><p>Pull Sami’s changes from the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of the GitHub repository
into the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of her desktop repository.</p></li>
<li><p>Merge <em>from</em> the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of her desktop repository
<em>to</em> the <code class="docutils literal notranslate"><span class="pre">editing-readme</span></code> branch in the same repository.</p></li>
<li><p>Push her updated <code class="docutils literal notranslate"><span class="pre">editing-readme</span></code> branch to her repository on GitHub.
The pull request from there back to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of the main repository
will update automatically.</p></li>
</ol>
<p>GitHub and other forges do allow people to merge conflicts through their browser-based interfaces, but doing it on our desktop means we can use our favorite editor to resolve the conflict.
It also means that if the change affects the project’s code,
we can run everything to make sure it still works.</p>
<p>But what if Sami or someone else merges another change while Amira is resolving this one, so that by the time she pushes to her repository there is another, different, conflict? In theory this cycle could go on forever;
in practice, it reveals a communication problem that Amira (or someone) needs to address. If two or more people are constantly making incompatible changes to the same files, they should discuss who’s supposed to be doing what,
or rearrange the project’s contents so that they aren’t stepping on each other’s toes.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>Branches and pull requests seem complicated at first, but they quickly become second nature. Everyone involved in the project can work at their own pace on what they want to, picking up others’ changes and submitting their own whenever they want. More importantly, this workflow gives everyone has a chance to review each other’s work. As we discuss in Section <strong>TODO</strong> ref(style-review),
doing reviews doesn’t just prevent errors from creeping in:
it is also an effective way to spread understanding and skills.</p>
</section>
<section id="keypoints">
<h2>Keypoints<a class="headerlink" href="#keypoints" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Use a <strong>branch-per-feature</strong> workflow to develop new features while leaving the master branch in working order.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> creates a new branch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> switches between branches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> <strong>merges</strong> changes from another branch into the current branch.</p></li>
<li><p><strong>Conflicts</strong> occur when files or parts of files are changed in different ways on different branches.</p></li>
<li><p>Version control systems do not allow people to overwrite changes silently;
instead, they highlight conflicts that need to be resolved.</p></li>
<li><p><strong>Forking</strong> a repository makes a copy of it on a server.</p></li>
<li><p><strong>Cloning</strong> a repository with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> creates a local copy of a remote repository.</p></li>
<li><p>Create a remote called <code class="docutils literal notranslate"><span class="pre">upstream</span></code> to point to the repository a fork was derived from.</p></li>
<li><p>Create <strong>pull requests</strong> to submit changes from your fork to the upstream repository.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../exercises/version_control.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exercise Version Control</p>
      </div>
    </a>
    <a class="right-next"
       href="../exercises/git_advanced.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Exercises Git Advanced</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-s-a-branch">What’s a Branch?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-branch">Creating a Branch</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-curve-should-we-fit">What Curve Should We Fit?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verifying-zipf-s-law">Verifying Zipf’s Law</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#merging">Merging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-conflicts">Handling Conflicts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-branch-based-workflow">A Branch-Based Workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-other-people-s-work">Using Other People’s Work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pull-requests">Pull Requests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-conflicts-in-pull-requests-git-advanced-pr-conflict">Handling Conflicts in Pull Requests {#git-advanced-pr-conflict}</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keypoints">Keypoints</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Software Engineering Group - University of Potsdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>